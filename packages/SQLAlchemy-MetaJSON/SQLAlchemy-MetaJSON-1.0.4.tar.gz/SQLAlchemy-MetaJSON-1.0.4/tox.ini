[tox]
envlist =
    py{37,36}
    stylecheck
    docs-html

[testenv]
passenv = LANG
deps =
    pytest-cov
    sqlalchemy
    sqlalchemy_utils
commands =
    pytest --cov --cov-report= {posargs}

[testenv:stylecheck]
deps =
    pre-commit
commands =
    pre-commit run --all-files --show-diff-on-failure

[testenv:docs-html]
deps =
    sphinx
    pallets-sphinx-themes
commands = sphinx-build -W -b html -d {envtmpdir}/doctrees docs {envtmpdir}/html
