


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>StructuredData.SDshelllibFun &mdash; YAML-StructuredData 5.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/bootstrap.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> YAML-StructuredData
          

          
          </a>

          
            
            
              <div class="version">
                5.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Installing StructuredData</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../install.html#parts-of-structureddata">Parts of StructuredData</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../install.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../install.html#install-from-pypi-with-pip">Install from pypi with pip</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../install.html#install-from-source-tar-gz-or-zip-file">Install from source (tar.gz or zip file)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../install.html#install-as-root-to-default-directories">Install as root to default directories</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../install.html#install-to-a-separate-directory">Install to a separate directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../install.html#install-in-your-home">Install in your home</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../introduction.html#what-is-structureddata">What is StructuredData ?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../introduction.html#the-concept">The concept</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../introduction.html#what-kind-of-data-can-be-stored">What kind of data can be stored ?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../introduction.html#how-is-the-data-stored">How is the data stored ?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../introduction.html#how-do-i-address-parts-of-the-data">How do I address parts of the data ?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../introduction.html#how-can-i-test-the-validity-of-the-data">How can I test the validity of the data ?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../introduction.html#the-software-package">The software package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../introduction.html#what-does-it-do">What does it do ?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../introduction.html#do-i-always-have-to-use-the-software-package">Do I always have to use the software package ?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction.html#applications-of-structureddata">Applications of StructuredData</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../introduction.html#where-can-structureddata-be-useful">Where can StructuredData be useful ?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../introduction.html#how-does-structureddata-support-collaboration">How does StructuredData support collaboration ?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../introduction.html#can-graphs-be-represented-in-structureddata">Can graphs be represented in StructuredData ?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../introduction.html#can-trees-be-represented-in-structureddata">Can trees be represented in StructuredData ?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../introduction.html#can-the-data-of-a-relational-database-represented-in-structureddata">Can the data of a relational database represented in StructuredData ?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html#comparisons-to-other-concepts">Comparisons to other concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../introduction.html#advantages-of-structureddata-compared-to-a-database">Advantages of StructuredData compared to a database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction.html#advantages-of-structureddata-compared-to-other-text-file-formats">Advantages of StructuredData compared to other text file formats</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../reference.html">Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../reference.html#structureddata-in-general">StructuredData in general</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference.html#structureddata-terminology">StructuredData terminology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference.html#references-and-links">References and links</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference.html#relation-of-structured-data-to-python-data-structures">Relation of Structured Data to python data structures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference.html#paths">Paths</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference.html#joining-a-keylist-to-a-path">Joining a keylist to a path</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference.html#escape-rules">Escape rules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../reference.html#patterns">Patterns</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference.html#id1">Example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../reference.html#structureddatastore">StructuredDataStore</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference.html#structureddatatypes">StructuredDataTypes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference.html#differences-to-programming-language-type-declarations">Differences to programming language type declarations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference.html#typepatterns">Typepatterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference.html#typepattern-matching">Typepattern matching</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference.html#type-declarations">Type declarations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference.html#boolean">boolean</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference.html#integer">integer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference.html#real">real</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference.html#string">string</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference.html#optional-struct">optional struct</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference.html#open-struct">open struct</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference.html#struct">struct</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference.html#typed-map">typed map</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference.html#map">map</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference.html#optional-list">optional list</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference.html#typed-list">typed list</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference.html#list">list</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../reference.html#structureddatacontainer">StructuredDataContainer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../SDpyshell.html">SDpyshell</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../SDpyshell.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SDpyshell.html#basic-syntax">Basic Syntax</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../SDpyshell.html#function-calls">function calls</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SDpyshell.html#procedure-calls">procedure calls</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SDpyshell.html#string-literals">string literals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../SDpyshell.html#basic-function">Basic function</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SDpyshell.html#command-layers">Command layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SDpyshell.html#format-specifications">Format Specifications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../SDpyshell.html#structure-formats">Structure Formats</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SDpyshell.html#text-formats">Text formats</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SDpyshell.html#marking-links">Marking links</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SDpyshell.html#flat-format">Flat format</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SDpyshell.html#dry-run">Dry run</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../SDpyshell.html#commands-and-functions">Commands and Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../SDpyshell.html#generic-functions">Generic functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#help">help</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id1">help()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-help">txt.help()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-help">fun.help()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#sdtype">SDtype</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-sdtype">fun.SDtype()</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../SDpyshell.html#string-and-path-functions">String and path functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#format">format</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id2">format()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-format">txt.format()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#string2pathkey">string2pathkey</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id3">string2pathkey()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-string2pathkey">txt.string2pathkey()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-string2pathkey">fun.string2pathkey()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#pathkey2string">pathkey2string</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id4">pathkey2string()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-pathkey2string">txt.pathkey2string()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-pathkey2string">fun.pathkey2string()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#splitpath">splitpath</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id5">splitpath()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-splitpath">txt.splitpath()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-splitpath">fun.splitpath()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#joinpath">joinpath</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id6">joinpath()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-joinpath">txt.joinpath()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-joinpath">fun.joinpath()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#combinepaths">combinepaths</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id7">combinepaths()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-combinepaths">txt.combinepaths()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-combinepaths">fun.combinepaths()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#addpaths">addpaths</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id8">addpaths()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-addpaths">txt.addpaths()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-addpaths">fun.addpaths()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#poppath">poppath</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id9">poppath()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-poppath">txt.poppath()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-poppath">fun.poppath()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#substpath">substpath</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id10">substpath()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-substpath">txt.substpath()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-substpath">fun.substpath()</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../SDpyshell.html#functions-for-the-structureddatacontainer">Functions for the StructuredDataContainer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#newsdc">newsdc</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-newsdc">fun.newsdc()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#namedsdc">namedsdc</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-namedsdc">fun.namedsdc()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#locksdc">locksdc</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-locksdc">fun.locksdc()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#copy">copy</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id11">copy()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-copy">txt.copy()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-copy">fun.copy()</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../SDpyshell.html#file-i-o">File I/O</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#lockfile">lockfile</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-lockfile">fun.lockfile()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#lockdir">lockdir</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-lockdir">fun.lockdir()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#read">read</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id12">read()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-read">txt.read()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-read">fun.read()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#write">write</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id13">write()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-write">txt.write()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-write">fun.write()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#rewrite">rewrite</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id14">rewrite()</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../SDpyshell.html#printing">Printing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#pr">pr</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id15">pr()</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../SDpyshell.html#generic-functions-for-the-structureddatastore">Generic functions for the StructuredDataStore</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#clear-store">clear_store</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id16">clear_store()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-clear-store">txt.clear_store()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-clear-store">fun.clear_store()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#refresh-links">refresh_links</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id17">refresh_links()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-refresh-links">txt.refresh_links()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-refresh-links">fun.refresh_links()</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../SDpyshell.html#generic-functions-for-structureddatatypes">Generic functions for StructuredDataTypes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#clear-types">clear_types</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id18">clear_types()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-clear-types">txt.clear_types()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-clear-types">fun.clear_types()</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../SDpyshell.html#querying-the-data">Querying the data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#paths">paths</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id19">paths()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-paths">txt.paths()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-paths">fun.paths()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#find">find</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id20">find()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-find">txt.find()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-find">fun.find()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#ifind">ifind</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id21">ifind()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-ifind">txt.ifind()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-ifind">fun.ifind()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#rxfind">rxfind</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id22">rxfind()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-rxfind">txt.rxfind()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-rxfind">fun.rxfind()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#findval">findval</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id24">findval()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-findval">txt.findval()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-findval">fun.findval()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#ifindval">ifindval</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id25">ifindval()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-ifindval">txt.ifindval()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-ifindval">fun.ifindval()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#rxfindval">rxfindval</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id26">rxfindval()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-rxfindval">txt.rxfindval()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-rxfindval">fun.rxfindval()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#get">get</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id29">get()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-get">txt.get()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-get">fun.get()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#getlinks">getlinks</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id30">getlinks()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-getlinks">txt.getlinks()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-getlinks">fun.getlinks()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#findlinks">findlinks</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id31">findlinks()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-findlinks">txt.findlinks()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-findlinks">fun.findlinks()</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../SDpyshell.html#modifying-the-data">Modifying the data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#filter-out">filter_out</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id32">filter_out()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-filter-out">txt.filter_out()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-filter-out">fun.filter_out()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#change">change</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id33">change()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-change">txt.change()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-change">fun.change()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#put">put</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id34">put()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-put">txt.put()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-put">fun.put()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#delete">delete</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id35">delete()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-delete">txt.delete()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-delete">fun.delete()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#link">link</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id36">link()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-link">txt.link()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-link">fun.link()</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../SDpyshell.html#querying-types">Querying types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#typepaths">typepaths</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id37">typepaths()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-typepaths">txt.typepaths()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-typepaths">fun.typepaths()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#typefind">typefind</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id38">typefind()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-typefind">txt.typefind()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-typefind">fun.typefind()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#typeget">typeget</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id39">typeget()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-typeget">txt.typeget()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-typeget">fun.typeget()</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../SDpyshell.html#modifying-types">Modifying types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#typeput">typeput</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id40">typeput()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-typeput">txt.typeput()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-typeput">fun.typeput()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#typeadditem">typeadditem</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id41">typeadditem()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-typeadditem">txt.typeadditem()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-typeadditem">fun.typeadditem()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#typedelete">typedelete</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id42">typedelete()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-typedelete">txt.typedelete()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-typedelete">fun.typedelete()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#typedeleteitem">typedeleteitem</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id43">typedeleteitem()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-typedeleteitem">txt.typedeleteitem()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-typedeleteitem">fun.typedeleteitem()</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../SDpyshell.html#typechecking">Typechecking</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#typecheck">typecheck</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id44">typecheck()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-typecheck">txt.typecheck()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-typecheck">fun.typecheck()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../SDpyshell.html#typematch">typematch</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#id45">typematch()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#txt-typematch">txt.typematch()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../SDpyshell.html#fun-typematch">fun.typematch()</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../SDpyshell.html#command-aliases">Command aliases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SDpyshell.html#invoking-sdpyshell">Invoking SDpyshell</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../SDpyshell.html#precommands">Precommands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SDpyshell.html#extensions">Extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SDpyshell.html#server-mode">Server mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SDpyshell.html#server-password">Server password</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SDpyshell.html#process-management">Process management</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../SDpyshell_examples.html">SDpyshell Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../SDpyshell_examples.html#start-the-sdpyshell-and-read-the-data-file">Start the SDpyshell and read the data file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SDpyshell_examples.html#reports-with-get">Reports with get</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SDpyshell_examples.html#reports-with-find">Reports with find</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SDpyshell_examples.html#reports-with-rxfind">Reports with rxfind</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SDpyshell_examples.html#reports-with-findval">Reports with findval</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SDpyshell_examples.html#reports-with-rxfindval">Reports with rxfindval</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SDpyshell_examples.html#reports-with-pr">Reports with pr</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SDpyshell_examples.html#changing-a-single-value-with-change">Changing a single value with change</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SDpyshell_examples.html#adding-a-value-with-put">Adding a value with put</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SDpyshell_examples.html#working-with-links">Working with links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SDpyshell_examples.html#working-with-types">Working with types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SDpyshell_examples.html#a-change-of-many-parameters-with-export-and-re-import">A change of many parameters with export and re-import</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SDpyshell_examples.html#converting-a-python-structure-to-structureddata">Converting a python structure to StructuredData</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SDpyshell_examples.html#converting-a-perl-structure-to-structureddata">Converting a perl structure to StructuredData</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../SDxmlrpc.html">SDxmlrpc</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../SDxmlrpc.html#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../SDxmlrpc.html#what-is-xml-rpc">What is XML-RPC ?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SDxmlrpc.html#what-is-the-difference-between-sdxmlrpc-and-sdpyshell">What is the difference between SDxmlrpc and SDpyshell ?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../SDxmlrpc.html#basic-function">Basic function</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../SDxmlrpc.html#the-structureddatacontainer-key">The StructuredDataContainer key</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SDxmlrpc.html#return-values">Return values</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../SDxmlrpc.html#functions">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SDxmlrpc.html#examples">Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../SDxmlrpc.html#python">Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SDxmlrpc.html#perl">Perl</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SDxmlrpc.html#c">C</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SDxmlrpc.html#id1">C++</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../SDxmlrpc.html#invoking-sdxmlrpc">Invoking SDxmlrpc</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../SDxmlrpc.html#precommands">Precommands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SDxmlrpc.html#extensions">Extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SDxmlrpc.html#process-management">Process management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SDxmlrpc.html#restarting-the-server">Restarting the server</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../SDview.html">SDview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../SDview.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SDview.html#the-start-screen">The start screen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SDview.html#the-tree-frame">The tree frame</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SDview.html#the-tree-display-frame">The tree display frame</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../SDview.html#collapse-all">collapse all</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SDview.html#expand-all">expand all</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SDview.html#collapse">collapse</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SDview.html#expand">expand</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../SDview.html#the-search-frame">The search frame</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../SDview.html#the-search-type">The search type</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../SDview.html#pattern">pattern</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../SDview.html#ipattern">ipattern</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../SDview.html#regexp">regexp</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../SDview.html#find-value">find value</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../SDview.html#ipattern-find-value">ipattern find value</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../SDview.html#regexp-find-value">regexp find value</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../SDview.html#report-only-leaves">report only leaves</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SDview.html#result-window">result window</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../SDview.html#no">no</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../SDview.html#show-paths">show paths</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../SDview.html#show-paths-and-values">show paths and values</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../examples.html">Various ways of accessing the data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../examples.html#an-example-with-sdpyshell">An example with SDpyshell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples.html#an-example-using-the-sdshellib">An example using the SDshellib</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples.html#an-example-using-structureddata-classes">An example using StructuredData.Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples.html#an-example-with-python-and-pure-yaml">An example with python and pure yaml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples.html#an-example-with-perl-and-pure-yaml">An example with perl and pure yaml</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../python_modules.html">Python Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../python_modules.html#module-StructuredData.SDshelllib">SDshelllib</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python_modules.html#module-StructuredData.SDshelllibTxt">SDshelllibTxt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python_modules.html#module-StructuredData.SDshelllibFun">SDshelllibFun</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python_modules.html#module-StructuredData.SDshelllibBase">SDshelllibBase</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python_modules.html#module-StructuredData.SDshellrpclib">SDshellrpclib</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python_modules.html#module-StructuredData.Classes">Classes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">StructuredData License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">YAML-StructuredData</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
      <li>StructuredData.SDshelllibFun</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for StructuredData.SDshelllibFun</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;SDshellibFun</span>

<span class="sd">implements the functional layer of StructuredData.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">os.path</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">StructuredData.Classes</span> <span class="k">as</span> <span class="nn">SD</span>
<span class="kn">from</span> <span class="nn">StructuredData.internal</span> <span class="k">import</span> <span class="n">rst_load</span>
<span class="kn">from</span> <span class="nn">StructuredData.internal</span> <span class="k">import</span> <span class="n">myyaml</span>
<span class="kn">import</span> <span class="nn">StructuredData.SDshelllibBase</span> <span class="k">as</span> <span class="nn">base</span>

<span class="n">__version__</span><span class="o">=</span><span class="s2">&quot;5.1&quot;</span> <span class="c1">#VERSION#</span>

<span class="k">assert</span> <span class="n">__version__</span><span class="o">==</span><span class="n">SD</span><span class="o">.</span><span class="n">__version__</span>
<span class="k">assert</span> <span class="n">__version__</span><span class="o">==</span><span class="n">rst_load</span><span class="o">.</span><span class="n">__version__</span>
<span class="k">assert</span> <span class="n">__version__</span><span class="o">==</span><span class="n">myyaml</span><span class="o">.</span><span class="n">__version__</span>
<span class="k">assert</span> <span class="n">__version__</span><span class="o">==</span><span class="n">base</span><span class="o">.</span><span class="n">__version__</span>

<span class="c1"># pylint: disable=invalid-name</span>

<span class="n">write_defaults</span><span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;container&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="s2">&quot;store&quot;</span>    <span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="s2">&quot;types&quot;</span>    <span class="p">:</span> <span class="kc">None</span>
                <span class="p">}</span>

<span class="n">std_return</span><span class="o">=</span> <span class="kc">None</span>
<span class="c1"># standard return value for commands</span>

<span class="n">ROOTKEY</span><span class="o">=</span> <span class="n">SD</span><span class="o">.</span><span class="n">ROOTKEY</span>
<span class="n">ANYKEY</span> <span class="o">=</span> <span class="n">SD</span><span class="o">.</span><span class="n">ANYKEY</span>


<div class="viewcode-block" id="SDtype"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.SDtype">[docs]</a><span class="k">def</span> <span class="nf">SDtype</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;return the software stack on which we are running.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;library&quot;</span></div>

<div class="viewcode-block" id="global_sym"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.global_sym">[docs]</a><span class="k">def</span> <span class="nf">global_sym</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;return a global symbol of the given name.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">globals</span><span class="p">()[</span><span class="n">name</span><span class="p">]</span></div>

<span class="k">def</span> <span class="nf">struc2sym</span><span class="p">(</span><span class="n">struc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;return a global symbol from a structure.</span>

<span class="sd">    In XMLRPC we cannot simply transfer references global objects.</span>
<span class="sd">    So can implement here a way to get a global object from an</span>
<span class="sd">    arbitrary structure. The default is to return the object</span>
<span class="sd">    itself.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">struc</span>

<span class="k">def</span> <span class="nf">sym2struc</span><span class="p">(</span><span class="n">sym</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;return structure from a global symbol.</span>

<span class="sd">    vardict is usually global().</span>

<span class="sd">    In XMLRPC we cannot simply transfer references global objects.  So can</span>
<span class="sd">    implement here a way to convert a global object to an arbitrary structure.</span>
<span class="sd">    The default is to return the object itself.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">sym</span>

<div class="viewcode-block" id="error"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.error">[docs]</a><span class="k">def</span> <span class="nf">error</span><span class="p">(</span><span class="n">exception</span><span class="p">,</span> <span class="n">st</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;raise an exception (why is this needed?).&quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="n">exception</span><span class="p">(</span><span class="n">st</span><span class="p">)</span></div>

<span class="n">_sdshell_rst</span><span class="o">=</span> <span class="kc">None</span>

<span class="k">def</span> <span class="nf">_load_help</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;load the RST help file.&quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_sdshell_rst</span> <span class="c1"># pylint: disable= global-statement</span>
    <span class="k">if</span> <span class="n">_sdshell_rst</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="n">module_dir</span><span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">SD</span><span class="o">.</span><span class="vm">__file__</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">data_dir</span><span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">module_dir</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">)</span>
    <span class="n">sd_shell_help_file</span><span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="s2">&quot;SDpyshell.rst&quot;</span><span class="p">)</span>
    <span class="n">_sdshell_rst</span><span class="o">=</span> <span class="n">rst_load</span><span class="o">.</span><span class="n">Rst</span><span class="p">(</span><span class="n">rst_load</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">sd_shell_help_file</span><span class="p">))</span>

<span class="c1"># pylint: disable=redefined-builtin</span>

<div class="viewcode-block" id="help"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.help">[docs]</a><span class="k">def</span> <span class="nf">help</span><span class="p">(</span><span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;implement the shell&#39;s help function.&quot;&quot;&quot;</span>
    <span class="n">_load_help</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">item</span><span class="p">:</span>
        <span class="c1"># filename==None or filename==&quot;&quot;:</span>
        <span class="n">lines</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Please select a topic:&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">]</span>
        <span class="n">lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">_sdshell_rst</span><span class="o">.</span><span class="n">index</span><span class="p">())</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">lines</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;error: 1st parameter must be a string&quot;</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">lines</span><span class="o">=</span> <span class="n">_sdshell_rst</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">level</span><span class="p">)</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span></div>

<span class="c1"># pylint: enable=redefined-builtin</span>

<span class="n">SDC</span><span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="namedsdc"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.namedsdc">[docs]</a><span class="k">def</span> <span class="nf">namedsdc</span><span class="p">(</span><span class="n">arg</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;create a new StructuredDataContainer-Key.</span>

<span class="sd">    here an sdc-key and an sdc-object are identical.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sdc</span><span class="o">=</span> <span class="n">SD</span><span class="o">.</span><span class="n">StructuredDataContainer</span><span class="p">()</span>
    <span class="n">sdc</span><span class="o">.</span><span class="n">set_store</span><span class="p">(</span><span class="n">SD</span><span class="o">.</span><span class="n">StructuredDataStore</span><span class="p">())</span>
    <span class="n">sdc</span><span class="o">.</span><span class="n">set_types</span><span class="p">(</span><span class="n">SD</span><span class="o">.</span><span class="n">StructuredDataTypes</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">sdc_register</span><span class="p">(</span><span class="n">sdc</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span></div>

<div class="viewcode-block" id="newsdc"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.newsdc">[docs]</a><span class="k">def</span> <span class="nf">newsdc</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;create a new StructuredDataContainer-Key.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">namedsdc</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="locksdc"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.locksdc">[docs]</a><span class="k">def</span> <span class="nf">locksdc</span><span class="p">(</span><span class="n">sdc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;make the sdc read-only.&quot;&quot;&quot;</span>
    <span class="n">sdc_obj</span><span class="o">=</span> <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span>
    <span class="n">sdc_obj</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">std_return</span></div>

<div class="viewcode-block" id="lockfile"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.lockfile">[docs]</a><span class="k">def</span> <span class="nf">lockfile</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;define a filename read-only.&quot;&quot;&quot;</span>
    <span class="n">base</span><span class="o">.</span><span class="n">add_locked_file</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span></div>

<div class="viewcode-block" id="lockdir"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.lockdir">[docs]</a><span class="k">def</span> <span class="nf">lockdir</span><span class="p">(</span><span class="n">dirname</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;define a directory read-only.&quot;&quot;&quot;</span>
    <span class="n">base</span><span class="o">.</span><span class="n">add_locked_dir</span><span class="p">(</span><span class="n">dirname</span><span class="p">)</span></div>

<span class="k">def</span> <span class="nf">sdc_register</span><span class="p">(</span><span class="n">sdc</span><span class="p">,</span> <span class="n">user_key</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;create an sdc key from a new sdc object.</span>

<span class="sd">    This function is not here to be called directly. It intended to be</span>
<span class="sd">    overridden by an application defined function that is then called whenever</span>
<span class="sd">    a new sdc object is created. In this &quot;dummy&quot; implementation of the</span>
<span class="sd">    function, it simply returns the sdc object, so sdc-key and sdc-object are</span>
<span class="sd">    identical here.</span>

<span class="sd">    The user_key is an user provided key for the sdc object.  Since this</span>
<span class="sd">    implementation simply returns the sdc object itself, the user_key is</span>
<span class="sd">    ignored here. However, if this function is overridden, the user_key may be</span>
<span class="sd">    taken into account by the new function.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># pylint: disable=unused-argument</span>
    <span class="k">return</span> <span class="n">sdc</span>

<span class="k">def</span> <span class="nf">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;returns an sdc-object from an sdc-key.</span>

<span class="sd">    This function is not here to be called directly. It intended to be</span>
<span class="sd">    overridden by an application defined function that is then called whenever</span>
<span class="sd">    a new sdc object is read or written to. In this &quot;dummy&quot; implementation of</span>
<span class="sd">    the function, it simply returns the sdc object since the sdc-key and</span>
<span class="sd">    sdc-object are identical here.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">SDC</span> <span class="c1"># pylint: disable= global-statement</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">sdc</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">SDC</span><span class="p">:</span>
            <span class="n">new_key</span><span class="o">=</span> <span class="n">newsdc</span><span class="p">()</span>
            <span class="c1"># here an sdc-key and an sdc-object are identical:</span>
            <span class="n">SDC</span><span class="o">=</span> <span class="n">new_key</span>
        <span class="k">return</span> <span class="n">SDC</span>
    <span class="k">return</span> <span class="n">sdc</span>

<span class="k">def</span> <span class="nf">_process_paths</span><span class="p">(</span><span class="n">paths</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;returns an iterator on a single string, a pathlist or a pairlist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># pylint: disable=redefined-outer-name</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">SD</span><span class="o">.</span><span class="n">is_iterable</span><span class="p">(</span><span class="n">paths</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">paths</span>
        <span class="k">return</span> <span class="c1"># StopIteration</span>
    <span class="k">for</span> <span class="n">elm</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">elm</span><span class="p">,</span><span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">elm</span><span class="p">,</span><span class="s2">&quot;__getitem__&quot;</span><span class="p">)):</span>
            <span class="k">yield</span> <span class="n">elm</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">elm</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">return</span> <span class="c1"># StopIteration</span>

<span class="k">def</span> <span class="nf">_path_cmd</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;execute a command on a path or a list of paths.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">SD</span><span class="o">.</span><span class="n">is_iterable</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
        <span class="n">func</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">_process_paths</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
            <span class="n">func</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_path_func</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;execute a function on a path or a list of paths.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">SD</span><span class="o">.</span><span class="n">is_iterable</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">func</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">_process_paths</span><span class="p">(</span><span class="n">path</span><span class="p">)]</span>

<div class="viewcode-block" id="string2pathkey"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.string2pathkey">[docs]</a><span class="k">def</span> <span class="nf">string2pathkey</span><span class="p">(</span><span class="n">st</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;apply escaping rules on &#39;.&#39;,&#39;[&#39;,&#39;]&#39; in st.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">SD</span><span class="o">.</span><span class="n">escape_in_stringkey</span><span class="p">(</span><span class="n">st</span><span class="p">)</span></div>

<div class="viewcode-block" id="pathkey2string"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.pathkey2string">[docs]</a><span class="k">def</span> <span class="nf">pathkey2string</span><span class="p">(</span><span class="n">pk</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;unapply escaping rules on &#39;.&#39;,&#39;[&#39;,&#39;]&#39; in pk.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">SD</span><span class="o">.</span><span class="n">unescape_in_stringkey</span><span class="p">(</span><span class="n">pk</span><span class="p">)</span></div>

<div class="viewcode-block" id="splitpath"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.splitpath">[docs]</a><span class="k">def</span> <span class="nf">splitpath</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;splits a path according to the rules.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">my_split_path</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;local split path utility.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">sym2struc</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">SD</span><span class="o">.</span><span class="n">StructuredDataStore</span><span class="o">.</span><span class="n">split_path</span><span class="p">(</span><span class="n">path</span><span class="p">)]</span>
    <span class="k">return</span> <span class="n">_path_func</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">my_split_path</span><span class="p">)</span></div>

<div class="viewcode-block" id="joinpath"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.joinpath">[docs]</a><span class="k">def</span> <span class="nf">joinpath</span><span class="p">(</span><span class="n">keys</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;joins a path according to the rules.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">SD</span><span class="o">.</span><span class="n">StructuredDataStore</span><span class="o">.</span><span class="n">join_path</span><span class="p">([</span><span class="n">struc2sym</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">])</span></div>

<div class="viewcode-block" id="combinepaths"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.combinepaths">[docs]</a><span class="k">def</span> <span class="nf">combinepaths</span><span class="p">(</span><span class="n">paths</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;combine partial paths to a new one.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># pylint: disable=redefined-outer-name</span>
    <span class="n">keys</span><span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>
        <span class="n">keys</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">SD</span><span class="o">.</span><span class="n">StructuredDataStore</span><span class="o">.</span><span class="n">split_path</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">joinpath</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span></div>

<div class="viewcode-block" id="addpaths"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.addpaths">[docs]</a><span class="k">def</span> <span class="nf">addpaths</span><span class="p">(</span><span class="n">path1</span><span class="p">,</span> <span class="n">path2</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;combine 2 paths. One may be a list of paths.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">SD</span><span class="o">.</span><span class="n">is_iterable</span><span class="p">(</span><span class="n">path1</span><span class="p">)</span> <span class="ow">and</span> <span class="n">SD</span><span class="o">.</span><span class="n">is_iterable</span><span class="p">(</span><span class="n">path2</span><span class="p">):</span>
        <span class="n">error</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="s2">&quot;ERROR: only one arg may be an iterable&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">std_return</span>
    <span class="c1"># pylint: disable= no-else-return</span>
    <span class="k">if</span> <span class="n">SD</span><span class="o">.</span><span class="n">is_iterable</span><span class="p">(</span><span class="n">path1</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">_combine</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;utility function.&quot;&quot;&quot;</span>
            <span class="k">return</span> <span class="n">combinepaths</span><span class="p">((</span><span class="n">p</span><span class="p">,</span> <span class="n">path2</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">_path_func</span><span class="p">(</span><span class="n">path1</span><span class="p">,</span> <span class="n">_combine</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">SD</span><span class="o">.</span><span class="n">is_iterable</span><span class="p">(</span><span class="n">path2</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">_combine</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;utility function.&quot;&quot;&quot;</span>
            <span class="k">return</span> <span class="n">combinepaths</span><span class="p">((</span><span class="n">path1</span><span class="p">,</span> <span class="n">p</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">_path_func</span><span class="p">(</span><span class="n">path2</span><span class="p">,</span> <span class="n">_combine</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">combinepaths</span><span class="p">((</span><span class="n">path1</span><span class="p">,</span> <span class="n">path2</span><span class="p">))</span></div>

<div class="viewcode-block" id="poppath"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.poppath">[docs]</a><span class="k">def</span> <span class="nf">poppath</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">no</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;removes parts of a path from the end.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">_poppath</span><span class="p">(</span><span class="n">path_</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;utility function.&quot;&quot;&quot;</span>
        <span class="n">l</span><span class="o">=</span> <span class="n">SD</span><span class="o">.</span><span class="n">StructuredDataStore</span><span class="o">.</span><span class="n">split_path</span><span class="p">(</span><span class="n">path_</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">no</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">l</span><span class="o">=</span> <span class="n">l</span><span class="p">[:</span><span class="o">-</span><span class="n">no</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">l</span><span class="o">=</span> <span class="n">l</span><span class="p">[</span><span class="o">-</span><span class="n">no</span><span class="p">:]</span>
        <span class="k">return</span> <span class="n">SD</span><span class="o">.</span><span class="n">StructuredDataStore</span><span class="o">.</span><span class="n">join_path</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_path_func</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">_poppath</span><span class="p">)</span></div>

<div class="viewcode-block" id="substpath"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.substpath">[docs]</a><span class="k">def</span> <span class="nf">substpath</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;changes the path according to a pattern.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pattern_keylist</span><span class="o">=</span> <span class="n">SD</span><span class="o">.</span><span class="n">StructuredDataStore</span><span class="o">.</span><span class="n">split_path</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_substpath</span><span class="p">(</span><span class="n">path_</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;utility function.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">SD</span><span class="o">.</span><span class="n">StructuredDataStore</span><span class="o">.</span><span class="n">join_path</span><span class="p">(</span> \
                   <span class="n">SD</span><span class="o">.</span><span class="n">SpecialKey</span><span class="o">.</span><span class="n">keysubst</span><span class="p">(</span>
                       <span class="n">SD</span><span class="o">.</span><span class="n">StructuredDataStore</span><span class="o">.</span><span class="n">split_path</span><span class="p">(</span><span class="n">path_</span><span class="p">),</span>
                       <span class="n">pattern_keylist</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">_path_func</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">_substpath</span><span class="p">)</span></div>

<span class="n">_read_formatspec_obj</span><span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">MultiStringOption</span><span class="p">(</span>\
        <span class="p">{</span>
            <span class="s2">&quot;container&quot;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;store&quot;</span>     <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;types&quot;</span>     <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;yaml&quot;</span>      <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;py&quot;</span>        <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;flat&quot;</span>      <span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s2">&quot;nonflat&quot;</span>   <span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="p">[</span><span class="s2">&quot;container&quot;</span><span class="p">,</span> <span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;nonflat&quot;</span><span class="p">]</span> \
        <span class="p">)</span>

<span class="k">def</span> <span class="nf">_my_filter</span><span class="p">(</span><span class="n">sds</span><span class="p">,</span> <span class="n">path_patterns</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;create a new sds with the filtered data.&quot;&quot;&quot;</span>
    <span class="n">m</span><span class="o">=</span> <span class="n">sds</span><span class="o">.</span><span class="n">simple_search</span><span class="p">(</span><span class="n">path_patterns</span><span class="o">=</span> <span class="n">path_patterns</span><span class="p">,</span> <span class="n">add_values</span><span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                         <span class="n">only_leaves</span><span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">show_links</span><span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
    <span class="n">sds_new</span><span class="o">=</span> <span class="n">SD</span><span class="o">.</span><span class="n">StructuredDataStore</span><span class="p">()</span>
    <span class="n">sds_new</span><span class="o">.</span><span class="n">setitems</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">create_missing</span><span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">sds_new</span>

<div class="viewcode-block" id="read"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.read">[docs]</a><span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">formatspec</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">sdc</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;generic read from file.</span>

<span class="sd">    If bool(sdc) is False, use the global SDC variable.</span>
<span class="sd">    Note: this function *does not* create a new StructuredDataStore,</span>
<span class="sd">    use newsdc() if you want to create a new one.</span>

<span class="sd">    returns:</span>
<span class="sd">        (sdc, list_of_read_files)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># pylint: disable=too-many-branches</span>
    <span class="p">(</span><span class="n">structure</span><span class="p">,</span> <span class="n">format_</span><span class="p">,</span> <span class="n">extra</span><span class="p">)</span><span class="o">=</span> <span class="n">_read_formatspec_obj</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">formatspec</span><span class="p">)</span>
    <span class="n">sdc_obj</span><span class="o">=</span> <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="p">:</span>
        <span class="c1"># filename==None or filename==&quot;&quot;:</span>
        <span class="n">globs</span><span class="o">=</span> <span class="p">{</span><span class="s2">&quot;container&quot;</span><span class="p">:</span> <span class="s2">&quot;./*.SDCyml&quot;</span><span class="p">,</span>
                <span class="s2">&quot;store&quot;</span>    <span class="p">:</span> <span class="s2">&quot;./*.SDSyml&quot;</span><span class="p">,</span>
                <span class="s2">&quot;types&quot;</span>    <span class="p">:</span> <span class="s2">&quot;./*.SDTyml&quot;</span><span class="p">}</span>
        <span class="n">lst</span><span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">globs</span><span class="p">[</span><span class="n">structure</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">lst</span><span class="o">=</span> <span class="p">[</span><span class="n">filename</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">lst</span><span class="p">:</span>
        <span class="n">write_defaults</span><span class="p">[</span><span class="n">structure</span><span class="p">]</span><span class="o">=</span> <span class="n">lst</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">structure</span><span class="o">==</span><span class="s2">&quot;container&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">format_</span><span class="o">==</span><span class="s2">&quot;yaml&quot;</span><span class="p">:</span>
                <span class="n">sdc_new</span><span class="o">=</span> <span class="n">SD</span><span class="o">.</span><span class="n">StructuredDataContainer</span><span class="o">.</span><span class="n">from_yaml_file</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">format_</span><span class="o">==</span><span class="s1">&#39;py&#39;</span><span class="p">:</span>
                <span class="n">dict_</span><span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">read_py</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
                <span class="n">sdc_new</span><span class="o">=</span> <span class="n">SD</span><span class="o">.</span><span class="n">StructuredDataContainer</span><span class="p">(</span><span class="n">dict_</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">AssertionError</span>
        <span class="k">elif</span> <span class="n">structure</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;store&quot;</span><span class="p">,</span> <span class="s2">&quot;types&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">format_</span><span class="o">==</span><span class="s2">&quot;yaml&quot;</span><span class="p">:</span>
                <span class="n">dict_</span><span class="o">=</span> <span class="n">myyaml</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">format_</span><span class="o">==</span><span class="s1">&#39;py&#39;</span><span class="p">:</span>
                <span class="n">dict_</span><span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">read_py</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">AssertionError</span>
            <span class="k">if</span> <span class="n">structure</span><span class="o">==</span><span class="s2">&quot;store&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">extra</span><span class="o">==</span><span class="s2">&quot;nonflat&quot;</span><span class="p">:</span>
                    <span class="n">sds</span><span class="o">=</span> <span class="n">SD</span><span class="o">.</span><span class="n">StructuredDataStore</span><span class="p">(</span><span class="n">dict_</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">extra</span><span class="o">==</span><span class="s2">&quot;flat&quot;</span><span class="p">:</span>
                    <span class="n">sds</span><span class="o">=</span> <span class="n">SD</span><span class="o">.</span><span class="n">StructuredDataStore</span><span class="o">.</span><span class="n">from_flat_dict</span><span class="p">(</span><span class="n">dict_</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">AssertionError</span>
                <span class="n">sdc_new</span><span class="o">=</span> <span class="n">SD</span><span class="o">.</span><span class="n">StructuredDataContainer</span><span class="p">()</span>
                <span class="n">sdc_new</span><span class="o">.</span><span class="n">set_store</span><span class="p">(</span><span class="n">sds</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">structure</span><span class="o">==</span><span class="s2">&quot;types&quot;</span><span class="p">:</span>
                <span class="n">sdt</span><span class="o">=</span> <span class="n">SD</span><span class="o">.</span><span class="n">StructuredDataTypes</span><span class="p">(</span><span class="n">dict_</span><span class="p">)</span>
                <span class="n">sdc_new</span><span class="o">=</span> <span class="n">SD</span><span class="o">.</span><span class="n">StructuredDataContainer</span><span class="p">()</span>
                <span class="n">sdc_new</span><span class="o">.</span><span class="n">set_types</span><span class="p">(</span><span class="n">sdt</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">AssertionError</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AssertionError</span>
        <span class="n">sdc_obj</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">sdc_new</span><span class="o">.</span><span class="n">as_dict</span><span class="p">())</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">sdc</span><span class="p">,</span><span class="n">lst</span><span class="p">)</span></div>

<span class="n">_write_formatspec_obj</span><span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">MultiStringOption</span><span class="p">(</span> \
        <span class="p">{</span>
            <span class="s2">&quot;container&quot;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;store&quot;</span>     <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;types&quot;</span>     <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;yaml&quot;</span>      <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;py&quot;</span>        <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;csv&quot;</span>       <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;flat&quot;</span>      <span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s2">&quot;nonflat&quot;</span>   <span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="p">[</span><span class="s2">&quot;container&quot;</span><span class="p">,</span> <span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;nonflat&quot;</span><span class="p">]</span> \
        <span class="p">)</span>

<div class="viewcode-block" id="write"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.write">[docs]</a><span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">formatspec</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">pattern</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">sdc</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;generic write to a file.</span>

<span class="sd">    returns:</span>
<span class="sd">        name of the written file or, when not bool(filename), the data itself</span>
<span class="sd">        or (when error() raises no exception) std_return in case of an error.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># pylint: disable=too-many-statements</span>
    <span class="c1"># pylint: disable=too-many-return-statements</span>
    <span class="c1"># pylint: disable=too-many-branches</span>
    <span class="p">(</span><span class="n">structure</span><span class="p">,</span> <span class="n">format_</span><span class="p">,</span> <span class="n">extra</span><span class="p">)</span><span class="o">=</span> \
            <span class="n">_write_formatspec_obj</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">formatspec</span><span class="p">)</span>
    <span class="n">sdc_object</span><span class="o">=</span> <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span>
    <span class="n">sdc_local</span><span class="o">=</span> <span class="n">sdc_object</span>
    <span class="k">if</span> <span class="n">structure</span><span class="o">==</span><span class="s2">&quot;store&quot;</span> <span class="ow">and</span> <span class="n">sdc_local</span><span class="o">.</span><span class="n">store</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">error</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="s2">&quot;ERROR: StructuredDataContainer contains no store&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">std_return</span>
    <span class="k">if</span> <span class="n">structure</span><span class="o">==</span><span class="s2">&quot;types&quot;</span> <span class="ow">and</span> <span class="n">sdc_local</span><span class="o">.</span><span class="n">types</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">error</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="s2">&quot;ERROR: StructuredDataContainer contains no types&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">std_return</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">structure</span><span class="o">==</span><span class="s2">&quot;container&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">filename</span><span class="p">:</span>
        <span class="c1"># (filename!=None and filename!=&quot;&quot;)</span>
        <span class="n">msg</span><span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">is_readonly</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">msg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">error</span><span class="p">(</span><span class="ne">IOError</span><span class="p">,</span> <span class="s2">&quot;ERROR: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">msg</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">std_return</span>
    <span class="k">if</span> <span class="n">structure</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;container&quot;</span><span class="p">,</span> <span class="s2">&quot;store&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">pattern</span><span class="p">:</span>
            <span class="c1"># pattern!=None and pattern!=&quot;&quot;:</span>
            <span class="c1"># create a new container with the filtered data:</span>
            <span class="n">sdc_local</span><span class="o">=</span> <span class="n">SD</span><span class="o">.</span><span class="n">StructuredDataContainer</span><span class="p">()</span>
            <span class="n">sdc_local</span><span class="o">.</span><span class="n">set_types</span><span class="p">(</span><span class="n">sdc_object</span><span class="o">.</span><span class="n">types</span><span class="p">())</span>
            <span class="n">sdc_local</span><span class="o">.</span><span class="n">set_store</span><span class="p">(</span><span class="n">_my_filter</span><span class="p">(</span><span class="n">sdc_object</span><span class="o">.</span><span class="n">store</span><span class="p">(),</span> <span class="n">pattern</span><span class="p">))</span>
    <span class="c1"># pylint: disable= no-else-return</span>
    <span class="k">if</span> <span class="n">structure</span><span class="o">==</span><span class="s2">&quot;container&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">format_</span><span class="o">==</span><span class="s2">&quot;yaml&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">sdc_local</span><span class="o">.</span><span class="n">as_yaml_string</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">sdc_local</span><span class="o">.</span><span class="n">as_yaml_file</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">filename</span>
        <span class="k">elif</span> <span class="n">format_</span><span class="o">==</span><span class="s2">&quot;py&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">base</span><span class="o">.</span><span class="n">prettyprint</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">sdc_local</span><span class="o">.</span><span class="n">as_dict</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AssertionError</span>
    <span class="k">elif</span> <span class="n">structure</span><span class="o">==</span><span class="s2">&quot;store&quot;</span><span class="p">:</span>
        <span class="n">sds</span><span class="o">=</span> <span class="n">sdc_local</span><span class="o">.</span><span class="n">store</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">format_</span><span class="o">==</span><span class="s2">&quot;csv&quot;</span><span class="p">:</span>
            <span class="c1"># pylint: disable= no-else-return</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="p">:</span>
                <span class="c1"># filename==None or filename==&quot;&quot;:</span>
                <span class="k">return</span> <span class="n">sds</span><span class="o">.</span><span class="n">as_csv</span><span class="p">(</span><span class="n">align_values</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="n">base</span><span class="o">.</span><span class="n">csvdelim</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">stream</span><span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
                <span class="n">sds</span><span class="o">.</span><span class="n">as_csv</span><span class="p">(</span><span class="n">stream</span><span class="o">=</span><span class="n">stream</span><span class="p">,</span> <span class="n">align_values</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">delimiter</span><span class="o">=</span><span class="n">base</span><span class="o">.</span><span class="n">csvdelim</span><span class="p">)</span>
                <span class="n">stream</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                <span class="k">return</span> <span class="n">filename</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">extra</span><span class="o">==</span><span class="s2">&quot;nonflat&quot;</span><span class="p">:</span>
                <span class="n">dict_</span><span class="o">=</span> <span class="n">sds</span><span class="o">.</span><span class="n">as_dict</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">extra</span><span class="o">==</span><span class="s1">&#39;flat&#39;</span><span class="p">:</span>
                <span class="n">dict_</span><span class="o">=</span> <span class="n">sds</span><span class="o">.</span><span class="n">as_flat_dict</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">AssertionError</span>
            <span class="k">if</span> <span class="n">format_</span><span class="o">==</span><span class="s2">&quot;yaml&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">base</span><span class="o">.</span><span class="n">write_yml</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">dict_</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">format_</span><span class="o">==</span><span class="s2">&quot;py&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">base</span><span class="o">.</span><span class="n">prettyprint</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">dict_</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">AssertionError</span>
    <span class="k">elif</span> <span class="n">structure</span><span class="o">==</span><span class="s2">&quot;types&quot;</span><span class="p">:</span>
        <span class="n">sdt</span><span class="o">=</span> <span class="n">sdc_local</span><span class="o">.</span><span class="n">types</span><span class="p">()</span>
        <span class="c1"># pylint: disable= no-else-return</span>
        <span class="k">if</span> <span class="n">format_</span><span class="o">==</span><span class="s2">&quot;yaml&quot;</span><span class="p">:</span>
            <span class="n">dict_</span><span class="o">=</span> <span class="n">sdt</span><span class="o">.</span><span class="n">as_path_dict</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">base</span><span class="o">.</span><span class="n">write_yml</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">dict_</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">format_</span><span class="o">==</span><span class="s2">&quot;py&quot;</span><span class="p">:</span>
            <span class="n">dict_</span><span class="o">=</span> <span class="n">sdt</span><span class="o">.</span><span class="n">as_path_dict</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">base</span><span class="o">.</span><span class="n">prettyprint</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">dict_</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">error</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="s2">&quot;ERROR: unsupported format_ </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">format_</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">std_return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">AssertionError</span>
    <span class="k">return</span> <span class="n">std_return</span></div>

<div class="viewcode-block" id="copy"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.copy">[docs]</a><span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="n">sdc</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;returns a copy of a StructuredDataContainer.&quot;&quot;&quot;</span>
    <span class="n">sdc_new</span><span class="o">=</span> <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span><span class="o">.</span><span class="n">clone</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">sdc_register</span><span class="p">(</span><span class="n">sdc_new</span><span class="p">)</span></div>

<div class="viewcode-block" id="clear_store"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.clear_store">[docs]</a><span class="k">def</span> <span class="nf">clear_store</span><span class="p">(</span><span class="n">sdc</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;clear the store of a StructuredDataContainer.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span><span class="o">.</span><span class="n">clear_store</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">std_return</span></div>

<div class="viewcode-block" id="clear_types"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.clear_types">[docs]</a><span class="k">def</span> <span class="nf">clear_types</span><span class="p">(</span><span class="n">sdc</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;clear the types of a StructuredDataContainer.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span><span class="o">.</span><span class="n">clear_types</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">std_return</span></div>

<div class="viewcode-block" id="filter_out"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.filter_out">[docs]</a><span class="k">def</span> <span class="nf">filter_out</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">sdc</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;returns a filtered StructuredDataContainer.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sdc_obj</span><span class="o">=</span> <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span>
    <span class="n">sdc_obj</span><span class="o">.</span><span class="n">set_store</span><span class="p">(</span><span class="n">_my_filter</span><span class="p">(</span><span class="n">sdc_obj</span><span class="o">.</span><span class="n">store</span><span class="p">(),</span> <span class="n">pattern</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">sdc</span></div>

<div class="viewcode-block" id="paths"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.paths">[docs]</a><span class="k">def</span> <span class="nf">paths</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="n">paths</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">sdc</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;returns a list of all matching paths in a StructuredDataContainer.&quot;&quot;&quot;</span>
    <span class="c1"># pylint: disable=redefined-outer-name</span>
    <span class="n">sds</span><span class="o">=</span> <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span><span class="o">.</span><span class="n">store</span><span class="p">()</span>
    <span class="n">m</span><span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">sds</span><span class="o">.</span><span class="n">simple_search</span><span class="p">(</span><span class="n">path_patterns</span><span class="o">=</span> <span class="n">pattern</span><span class="p">,</span>
                                <span class="n">path_list</span><span class="o">=</span> <span class="n">paths</span><span class="p">,</span>
                                <span class="n">add_values</span><span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                                <span class="n">only_leaves</span><span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                                <span class="n">show_links</span><span class="o">=</span> <span class="kc">False</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">m</span></div>

<span class="n">FIND_SIMPLE</span><span class="o">=</span><span class="mi">1</span>
<span class="n">FIND_IPATTERN</span><span class="o">=</span><span class="mi">2</span>
<span class="n">FIND_REGEXP</span><span class="o">=</span><span class="mi">3</span>

<div class="viewcode-block" id="internal_find"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.internal_find">[docs]</a><span class="k">def</span> <span class="nf">internal_find</span><span class="p">(</span><span class="n">type_</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="n">show_links</span><span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                  <span class="n">path_list</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">sdc</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;internal find function.</span>

<span class="sd">    This is used to cover several flavours of find functions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">type_</span><span class="o">==</span><span class="n">FIND_SIMPLE</span><span class="p">:</span>
        <span class="n">m</span><span class="o">=</span> <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span><span class="o">.</span><span class="n">store</span><span class="p">()</span><span class="o">.</span><span class="n">simple_search</span><span class="p">(</span><span class="n">path_patterns</span><span class="o">=</span> <span class="n">pattern</span><span class="p">,</span>
                                              <span class="n">path_list</span><span class="o">=</span> <span class="n">path_list</span><span class="p">,</span>
                                              <span class="n">add_values</span><span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                                              <span class="n">only_leaves</span><span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                                              <span class="n">show_links</span><span class="o">=</span> <span class="n">show_links</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">type_</span><span class="o">==</span><span class="n">FIND_IPATTERN</span><span class="p">:</span>
        <span class="n">m</span><span class="o">=</span> <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span><span class="o">.</span><span class="n">store</span><span class="p">()</span><span class="o">.</span><span class="n">i_search</span><span class="p">(</span><span class="n">i_pattern</span><span class="o">=</span> <span class="n">pattern</span><span class="p">,</span>
                                         <span class="n">path_list</span><span class="o">=</span> <span class="n">path_list</span><span class="p">,</span>
                                         <span class="n">add_values</span><span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                                         <span class="n">only_leaves</span><span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                                         <span class="n">show_links</span><span class="o">=</span> <span class="n">show_links</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">type_</span><span class="o">==</span><span class="n">FIND_REGEXP</span><span class="p">:</span>
        <span class="n">m</span><span class="o">=</span> <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span><span class="o">.</span><span class="n">store</span><span class="p">()</span><span class="o">.</span><span class="n">regexp_search</span><span class="p">(</span><span class="n">regexp_pattern</span><span class="o">=</span> <span class="n">pattern</span><span class="p">,</span>
                                              <span class="n">path_list</span><span class="o">=</span> <span class="n">path_list</span><span class="p">,</span>
                                              <span class="n">add_values</span><span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                                              <span class="n">only_leaves</span><span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                                              <span class="n">show_links</span><span class="o">=</span> <span class="n">show_links</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="s2">&quot;Assertion&quot;</span>
    <span class="k">return</span> <span class="n">m</span></div>

<div class="viewcode-block" id="find"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.find">[docs]</a><span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">show_links</span><span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
         <span class="n">paths</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
         <span class="n">sdc</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;return paths and values for a given pattern.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># pylint: disable=redefined-outer-name</span>
    <span class="k">return</span> <span class="n">internal_find</span><span class="p">(</span><span class="n">FIND_SIMPLE</span><span class="p">,</span> <span class="n">pattern</span><span class="o">=</span><span class="n">pattern</span><span class="p">,</span>
                         <span class="n">show_links</span><span class="o">=</span> <span class="n">show_links</span><span class="p">,</span>
                         <span class="n">path_list</span><span class="o">=</span> <span class="n">paths</span><span class="p">,</span>
                         <span class="n">sdc</span><span class="o">=</span><span class="n">sdc</span><span class="p">)</span></div>

<div class="viewcode-block" id="ifind"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.ifind">[docs]</a><span class="k">def</span> <span class="nf">ifind</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">show_links</span><span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
          <span class="n">paths</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
          <span class="n">sdc</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;return paths and values for a given &quot;i&quot;-pattern.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># pylint: disable=redefined-outer-name</span>
    <span class="k">return</span> <span class="n">internal_find</span><span class="p">(</span><span class="n">FIND_IPATTERN</span><span class="p">,</span> <span class="n">pattern</span><span class="o">=</span><span class="n">pattern</span><span class="p">,</span>
                         <span class="n">show_links</span><span class="o">=</span> <span class="n">show_links</span><span class="p">,</span>
                         <span class="n">path_list</span><span class="o">=</span> <span class="n">paths</span><span class="p">,</span>
                         <span class="n">sdc</span><span class="o">=</span><span class="n">sdc</span><span class="p">)</span></div>

<div class="viewcode-block" id="rxfind"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.rxfind">[docs]</a><span class="k">def</span> <span class="nf">rxfind</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">show_links</span><span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
           <span class="n">paths</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
           <span class="n">sdc</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;return paths and values for a given regexp.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># pylint: disable=redefined-outer-name</span>
    <span class="k">return</span> <span class="n">internal_find</span><span class="p">(</span><span class="n">FIND_REGEXP</span><span class="p">,</span> <span class="n">pattern</span><span class="o">=</span><span class="n">pattern</span><span class="p">,</span>
                         <span class="n">show_links</span><span class="o">=</span> <span class="n">show_links</span><span class="p">,</span>
                         <span class="n">path_list</span><span class="o">=</span> <span class="n">paths</span><span class="p">,</span>
                         <span class="n">sdc</span><span class="o">=</span><span class="n">sdc</span><span class="p">)</span></div>

<span class="n">FINDVAL_SIMPLE</span><span class="o">=</span><span class="mi">1</span>
<span class="n">FINDVAL_IPATTERN</span><span class="o">=</span><span class="mi">2</span>
<span class="n">FINDVAL_REGEXP</span><span class="o">=</span><span class="mi">3</span>

<div class="viewcode-block" id="internal_findval"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.internal_findval">[docs]</a><span class="k">def</span> <span class="nf">internal_findval</span><span class="p">(</span><span class="n">type_</span><span class="p">,</span> <span class="n">val_pattern</span><span class="p">,</span> <span class="n">show_links</span><span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                     <span class="n">pattern</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                     <span class="n">path_list</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                     <span class="n">sdc</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;internal findval function.</span>

<span class="sd">    This is used to cover several flavours of findval functions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># pylint: disable=too-many-arguments</span>
    <span class="k">if</span> <span class="n">type_</span><span class="o">==</span><span class="n">FINDVAL_SIMPLE</span><span class="p">:</span>
        <span class="n">m</span><span class="o">=</span> <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span><span class="o">.</span><span class="n">store</span><span class="p">()</span><span class="o">.</span><span class="n">value_search</span><span class="p">(</span><span class="n">value</span><span class="o">=</span> <span class="n">val_pattern</span><span class="p">,</span>
                                             <span class="n">path_patterns</span><span class="o">=</span> <span class="n">pattern</span><span class="p">,</span>
                                             <span class="n">path_list</span><span class="o">=</span> <span class="n">path_list</span><span class="p">,</span>
                                             <span class="n">add_values</span><span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                                             <span class="n">show_links</span><span class="o">=</span> <span class="n">show_links</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">type_</span><span class="o">==</span><span class="n">FINDVAL_IPATTERN</span><span class="p">:</span>
        <span class="n">m</span><span class="o">=</span> <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span><span class="o">.</span><span class="n">store</span><span class="p">()</span><span class="o">.</span><span class="n">value_i_search</span><span class="p">(</span><span class="n">i_pattern</span><span class="o">=</span> <span class="n">val_pattern</span><span class="p">,</span>
                                               <span class="n">path_patterns</span><span class="o">=</span> <span class="n">pattern</span><span class="p">,</span>
                                               <span class="n">path_list</span><span class="o">=</span> <span class="n">path_list</span><span class="p">,</span>
                                               <span class="n">add_values</span><span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                                               <span class="n">show_links</span><span class="o">=</span> <span class="n">show_links</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">type_</span><span class="o">==</span><span class="n">FINDVAL_REGEXP</span><span class="p">:</span>
        <span class="n">m</span><span class="o">=</span> <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span><span class="o">.</span><span class="n">store</span><span class="p">()</span><span class="o">.</span><span class="n">value_regexp_search</span><span class="p">(</span><span class="n">regexp_pattern</span><span class="o">=</span> \
                                                        <span class="n">val_pattern</span><span class="p">,</span>
                                                    <span class="n">path_patterns</span><span class="o">=</span> <span class="n">pattern</span><span class="p">,</span>
                                                    <span class="n">path_list</span><span class="o">=</span> <span class="n">path_list</span><span class="p">,</span>
                                                    <span class="n">add_values</span><span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                                                    <span class="n">show_links</span><span class="o">=</span> <span class="n">show_links</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="s2">&quot;Assertion&quot;</span>
    <span class="k">return</span> <span class="n">m</span></div>

<div class="viewcode-block" id="findval"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.findval">[docs]</a><span class="k">def</span> <span class="nf">findval</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">show_links</span><span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
            <span class="n">pattern</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">paths</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">sdc</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;return paths and values for a given value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># pylint: disable=redefined-outer-name</span>
    <span class="k">return</span> <span class="n">internal_findval</span><span class="p">(</span><span class="n">FINDVAL_SIMPLE</span><span class="p">,</span>
                            <span class="n">val_pattern</span><span class="o">=</span> <span class="n">value</span><span class="p">,</span>
                            <span class="n">show_links</span><span class="o">=</span> <span class="n">show_links</span><span class="p">,</span>
                            <span class="n">pattern</span><span class="o">=</span> <span class="n">pattern</span><span class="p">,</span>
                            <span class="n">path_list</span><span class="o">=</span> <span class="n">paths</span><span class="p">,</span>
                            <span class="n">sdc</span><span class="o">=</span><span class="n">sdc</span><span class="p">)</span></div>

<div class="viewcode-block" id="ifindval"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.ifindval">[docs]</a><span class="k">def</span> <span class="nf">ifindval</span><span class="p">(</span><span class="n">val_pattern</span><span class="p">,</span> <span class="n">show_links</span><span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
             <span class="n">pattern</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
             <span class="n">paths</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
             <span class="n">sdc</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;return paths and values for a value matching an &quot;i&quot;-pattern.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># pylint: disable=redefined-outer-name</span>
    <span class="k">return</span> <span class="n">internal_findval</span><span class="p">(</span><span class="n">FINDVAL_IPATTERN</span><span class="p">,</span>
                            <span class="n">val_pattern</span><span class="o">=</span> <span class="n">val_pattern</span><span class="p">,</span>
                            <span class="n">show_links</span><span class="o">=</span> <span class="n">show_links</span><span class="p">,</span>
                            <span class="n">pattern</span><span class="o">=</span> <span class="n">pattern</span><span class="p">,</span>
                            <span class="n">path_list</span><span class="o">=</span> <span class="n">paths</span><span class="p">,</span>
                            <span class="n">sdc</span><span class="o">=</span><span class="n">sdc</span><span class="p">)</span></div>

<div class="viewcode-block" id="rxfindval"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.rxfindval">[docs]</a><span class="k">def</span> <span class="nf">rxfindval</span><span class="p">(</span><span class="n">val_pattern</span><span class="p">,</span> <span class="n">show_links</span><span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
              <span class="n">pattern</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
              <span class="n">paths</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
              <span class="n">sdc</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;return paths and values for a value matching a regexp.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># pylint: disable=redefined-outer-name</span>
    <span class="k">return</span> <span class="n">internal_findval</span><span class="p">(</span><span class="n">FINDVAL_REGEXP</span><span class="p">,</span>
                            <span class="n">val_pattern</span><span class="o">=</span> <span class="n">val_pattern</span><span class="p">,</span>
                            <span class="n">show_links</span><span class="o">=</span> <span class="n">show_links</span><span class="p">,</span>
                            <span class="n">pattern</span><span class="o">=</span> <span class="n">pattern</span><span class="p">,</span>
                            <span class="n">path_list</span><span class="o">=</span> <span class="n">paths</span><span class="p">,</span>
                            <span class="n">sdc</span><span class="o">=</span><span class="n">sdc</span><span class="p">)</span></div>

<div class="viewcode-block" id="get"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.get">[docs]</a><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">show_links</span><span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">paths</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">sdc</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;get a part of the structure for a given pattern.&quot;&quot;&quot;</span>
    <span class="c1"># pylint: disable=redefined-outer-name</span>
    <span class="n">sdc_obj</span><span class="o">=</span> <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span>
    <span class="n">res</span><span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span><span class="p">(</span><span class="n">_</span><span class="p">,</span><span class="n">_</span><span class="p">,</span><span class="n">val</span><span class="p">)</span> <span class="ow">in</span> <span class="n">sdc_obj</span><span class="o">.</span><span class="n">store</span><span class="p">()</span><span class="o">.</span><span class="n">universal_iter</span><span class="p">(</span><span class="n">patterns</span><span class="o">=</span> <span class="n">pattern</span><span class="p">,</span>
                                                   <span class="n">path_list</span><span class="o">=</span> <span class="n">paths</span><span class="p">,</span>
                                                   <span class="n">only_leaves</span><span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                                                   <span class="n">sorted_</span><span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                                                   <span class="n">show_links</span><span class="o">=</span> <span class="n">show_links</span><span class="p">):</span>
        <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">res</span></div>

<div class="viewcode-block" id="change"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.change">[docs]</a><span class="k">def</span> <span class="nf">change</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">sdc</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;changes a single value.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">_change</span><span class="p">(</span><span class="n">path_</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;utility function.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span><span class="o">.</span><span class="n">store</span><span class="p">()[</span><span class="n">path_</span><span class="p">]</span><span class="o">=</span> <span class="n">value</span>
        <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">_</span><span class="p">:</span>
            <span class="n">error</span><span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="s2">&quot;path </span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2"> doesn&#39;t exist&quot;</span> <span class="o">%</span> <span class="n">path_</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">std_return</span>
        <span class="k">return</span> <span class="n">std_return</span>
    <span class="n">_path_cmd</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">_change</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">std_return</span></div>

<div class="viewcode-block" id="put"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.put">[docs]</a><span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">sdc</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;add a single value.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">_put</span><span class="p">(</span><span class="n">path_</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;utility function.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span><span class="o">.</span><span class="n">store</span><span class="p">()</span><span class="o">.</span><span class="n">setitem</span><span class="p">(</span><span class="n">path_</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span>
                                         <span class="n">create_missing</span><span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                                         <span class="n">always_dicts</span><span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">error</span><span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">std_return</span>
        <span class="k">return</span> <span class="n">std_return</span>
    <span class="n">_path_cmd</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">_put</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">std_return</span></div>

<div class="viewcode-block" id="delete"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.delete">[docs]</a><span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">sdc</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;delete a single value.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">_delete</span><span class="p">(</span><span class="n">path_</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;utility function.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span><span class="o">.</span><span class="n">store</span><span class="p">()[</span><span class="n">path_</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">_</span><span class="p">:</span>
            <span class="n">error</span><span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="s2">&quot;path </span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2"> doesn&#39;t exist&quot;</span> <span class="o">%</span> <span class="n">path_</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">std_return</span>
        <span class="k">return</span> <span class="n">std_return</span>
    <span class="n">_path_cmd</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">_delete</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">std_return</span></div>

<div class="viewcode-block" id="link"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.link">[docs]</a><span class="k">def</span> <span class="nf">link</span><span class="p">(</span><span class="n">from_path</span><span class="p">,</span> <span class="n">to_path</span><span class="p">,</span> <span class="n">sdc</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;create a link to an existing value at another path.&quot;&quot;&quot;</span>
    <span class="n">sdstore</span><span class="o">=</span> <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span><span class="o">.</span><span class="n">store</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">sdstore</span><span class="p">[</span><span class="n">to_path</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">_</span><span class="p">:</span>
        <span class="n">error</span><span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="s2">&quot;to-path </span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2"> doesn&#39;t exist&quot;</span> <span class="o">%</span> <span class="n">to_path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">std_return</span>
    <span class="k">except</span> <span class="ne">IndexError</span> <span class="k">as</span> <span class="n">_</span><span class="p">:</span>
        <span class="n">error</span><span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="s2">&quot;to-path </span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2"> doesn&#39;t exist&quot;</span> <span class="o">%</span> <span class="n">to_path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">std_return</span>
    <span class="k">def</span> <span class="nf">_link</span><span class="p">(</span><span class="n">_from</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;utility function.&quot;&quot;&quot;</span>
        <span class="n">sdstore</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">_from</span><span class="p">,</span> <span class="n">to_path</span><span class="p">)</span>
    <span class="n">_path_cmd</span><span class="p">(</span><span class="n">from_path</span><span class="p">,</span> <span class="n">_link</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">std_return</span></div>

<div class="viewcode-block" id="refresh_links"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.refresh_links">[docs]</a><span class="k">def</span> <span class="nf">refresh_links</span><span class="p">(</span><span class="n">sdc</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;refresh the internal link cache.&quot;&quot;&quot;</span>
    <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span><span class="o">.</span><span class="n">store</span><span class="p">()</span><span class="o">.</span><span class="n">refresh_links</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">std_return</span></div>

<div class="viewcode-block" id="getlinks"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.getlinks">[docs]</a><span class="k">def</span> <span class="nf">getlinks</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">include</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sdc</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;return links for a path.&quot;&quot;&quot;</span>
    <span class="n">sds</span><span class="o">=</span> <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span><span class="o">.</span><span class="n">store</span><span class="p">()</span>
    <span class="n">links_set</span><span class="o">=</span> <span class="n">sds</span><span class="o">.</span><span class="n">get_links</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">include</span><span class="o">=</span><span class="n">include</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span> <span class="n">exclude</span><span class="p">)</span>
    <span class="n">links</span><span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">links_set</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">links</span></div>

<div class="viewcode-block" id="findlinks"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.findlinks">[docs]</a><span class="k">def</span> <span class="nf">findlinks</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">include</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">sdc</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;find links for a pattern.&quot;&quot;&quot;</span>
    <span class="n">sds</span><span class="o">=</span> <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span><span class="o">.</span><span class="n">store</span><span class="p">()</span>
    <span class="n">linksset_list</span><span class="o">=</span> <span class="n">sds</span><span class="o">.</span><span class="n">pattern_get_links</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span>
                                         <span class="n">include</span><span class="o">=</span> <span class="n">include</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span> <span class="n">exclude</span><span class="p">,</span>
                                         <span class="n">only_multi_links</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">links</span><span class="o">=</span> <span class="p">[</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">linksset_list</span> <span class="p">]</span>
    <span class="k">return</span> <span class="n">links</span></div>

<div class="viewcode-block" id="typepaths"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.typepaths">[docs]</a><span class="k">def</span> <span class="nf">typepaths</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="n">sdc</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;find typepaths for a pattern.&quot;&quot;&quot;</span>
    <span class="n">sdt</span><span class="o">=</span> <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span><span class="o">.</span><span class="n">types</span><span class="p">()</span>
    <span class="n">m</span><span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">sdt</span><span class="o">.</span><span class="n">simple_search</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">add_values</span><span class="o">=</span> <span class="kc">False</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">m</span></div>

<div class="viewcode-block" id="typefind"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.typefind">[docs]</a><span class="k">def</span> <span class="nf">typefind</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">sdc</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;find a type for a pattern.&quot;&quot;&quot;</span>
    <span class="n">m</span><span class="o">=</span> <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span><span class="o">.</span><span class="n">types</span><span class="p">()</span><span class="o">.</span><span class="n">simple_search</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">add_values</span><span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">m</span><span class="o">=</span> <span class="p">[(</span><span class="n">p</span><span class="p">,</span><span class="n">t</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span> <span class="k">for</span> <span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">t</span><span class="p">)</span> <span class="ow">in</span> <span class="n">m</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">m</span></div>

<div class="viewcode-block" id="typeget"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.typeget">[docs]</a><span class="k">def</span> <span class="nf">typeget</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">sdc</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;get a type for a path.&quot;&quot;&quot;</span>
    <span class="n">sdt</span><span class="o">=</span> <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span><span class="o">.</span><span class="n">types</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">val</span><span class="o">=</span> <span class="n">sdt</span><span class="p">[</span><span class="n">path</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">_</span><span class="p">:</span>
        <span class="n">error</span><span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="s2">&quot;path </span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2"> doesn&#39;t exist&quot;</span> <span class="o">%</span> <span class="n">path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">std_return</span>
    <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">error</span><span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="s2">&quot;path </span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2"> doesn&#39;t exist&quot;</span> <span class="o">%</span> <span class="n">path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">std_return</span>
    <span class="n">val</span><span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">val</span></div>

<div class="viewcode-block" id="typeput"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.typeput">[docs]</a><span class="k">def</span> <span class="nf">typeput</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">sdc</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;set a type.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span><span class="o">.</span><span class="n">types</span><span class="p">()</span><span class="o">.</span><span class="n">add</span><span class="p">({</span><span class="n">path</span><span class="p">:</span><span class="n">value</span><span class="p">})</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">error</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">std_return</span></div>

<span class="k">def</span> <span class="nf">_find_type_items</span><span class="p">(</span><span class="n">sdc</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;find a typespec item set.</span>

<span class="sd">    This function returns a set object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sdt</span><span class="o">=</span> <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span><span class="o">.</span><span class="n">types</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">val</span><span class="o">=</span> <span class="n">sdt</span><span class="p">[</span><span class="n">path</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="s2">&quot;path </span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2"> doesn&#39;t exist&quot;</span> <span class="o">%</span> <span class="n">path</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">items</span><span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="c1"># method of a SingleTypeSpec object</span>
    <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<div class="viewcode-block" id="typeadditem"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.typeadditem">[docs]</a><span class="k">def</span> <span class="nf">typeadditem</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="n">sdc</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;add an item to a type definition.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">error</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="s2">&quot;item must be a string&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">std_return</span>
    <span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span><span class="o">=</span> <span class="n">_find_type_items</span><span class="p">(</span><span class="n">sdc</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">items</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">error</span><span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">std_return</span>
    <span class="n">items</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">std_return</span></div>

<div class="viewcode-block" id="typedelete"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.typedelete">[docs]</a><span class="k">def</span> <span class="nf">typedelete</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">sdc</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;delete a type.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">del</span> <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span><span class="o">.</span><span class="n">types</span><span class="p">()[</span><span class="n">path</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">_</span><span class="p">:</span>
        <span class="n">error</span><span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="s2">&quot;path </span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2"> doesn&#39;t exist&quot;</span> <span class="o">%</span> <span class="n">path</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">std_return</span></div>

<div class="viewcode-block" id="typedeleteitem"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.typedeleteitem">[docs]</a><span class="k">def</span> <span class="nf">typedeleteitem</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="n">sdc</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;delete an item in a type definition.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">error</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="s2">&quot;item must be a string&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">std_return</span>
    <span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span><span class="o">=</span> <span class="n">_find_type_items</span><span class="p">(</span><span class="n">sdc</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">items</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">error</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">std_return</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">items</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">_</span><span class="p">:</span>
        <span class="n">error</span><span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="s2">&quot;cannot delete &#39;</span><span class="si">%s</span><span class="s2">&#39;: not found&quot;</span> <span class="o">%</span> <span class="n">item</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">std_return</span></div>

<div class="viewcode-block" id="typecheck"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.typecheck">[docs]</a><span class="k">def</span> <span class="nf">typecheck</span><span class="p">(</span><span class="n">sdc</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;perform a typecheck on the StructuredDataContainer.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span><span class="o">.</span><span class="n">typecheck</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">error</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="s2">&quot;TypeError: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="typematch"><a class="viewcode-back" href="../../python_modules.html#StructuredData.SDshelllibFun.typematch">[docs]</a><span class="k">def</span> <span class="nf">typematch</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">sdc</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;try to find a typecheck for the given path.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sdt</span><span class="o">=</span> <span class="n">sdc_get</span><span class="p">(</span><span class="n">sdc</span><span class="p">)</span><span class="o">.</span><span class="n">types</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">sdt</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="n">m</span><span class="o">=</span> <span class="n">sdt</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">return_matchpath</span><span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">m</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">m</span><span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">m</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">d</span><span class="o">=</span> <span class="p">{}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">d</span><span class="o">=</span> <span class="p">{</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span> <span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="p">}</span>
    <span class="k">return</span> <span class="n">d</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Helmholtz-Zentrum Berlin GmbH

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>