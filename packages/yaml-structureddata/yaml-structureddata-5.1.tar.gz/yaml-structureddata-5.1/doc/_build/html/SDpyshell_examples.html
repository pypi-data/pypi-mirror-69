


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>SDpyshell Examples &mdash; YAML-StructuredData 5.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/bootstrap.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="SDxmlrpc" href="SDxmlrpc.html" />
    <link rel="prev" title="SDpyshell" href="SDpyshell.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> YAML-StructuredData
          

          
          </a>

          
            
            
              <div class="version">
                5.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing StructuredData</a><ul>
<li class="toctree-l2"><a class="reference internal" href="install.html#parts-of-structureddata">Parts of StructuredData</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#install-from-pypi-with-pip">Install from pypi with pip</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#install-from-source-tar-gz-or-zip-file">Install from source (tar.gz or zip file)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="install.html#install-as-root-to-default-directories">Install as root to default directories</a></li>
<li class="toctree-l3"><a class="reference internal" href="install.html#install-to-a-separate-directory">Install to a separate directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="install.html#install-in-your-home">Install in your home</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#what-is-structureddata">What is StructuredData ?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="introduction.html#the-concept">The concept</a><ul>
<li class="toctree-l4"><a class="reference internal" href="introduction.html#what-kind-of-data-can-be-stored">What kind of data can be stored ?</a></li>
<li class="toctree-l4"><a class="reference internal" href="introduction.html#how-is-the-data-stored">How is the data stored ?</a></li>
<li class="toctree-l4"><a class="reference internal" href="introduction.html#how-do-i-address-parts-of-the-data">How do I address parts of the data ?</a></li>
<li class="toctree-l4"><a class="reference internal" href="introduction.html#how-can-i-test-the-validity-of-the-data">How can I test the validity of the data ?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="introduction.html#the-software-package">The software package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="introduction.html#what-does-it-do">What does it do ?</a></li>
<li class="toctree-l4"><a class="reference internal" href="introduction.html#do-i-always-have-to-use-the-software-package">Do I always have to use the software package ?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#applications-of-structureddata">Applications of StructuredData</a><ul>
<li class="toctree-l3"><a class="reference internal" href="introduction.html#where-can-structureddata-be-useful">Where can StructuredData be useful ?</a></li>
<li class="toctree-l3"><a class="reference internal" href="introduction.html#how-does-structureddata-support-collaboration">How does StructuredData support collaboration ?</a></li>
<li class="toctree-l3"><a class="reference internal" href="introduction.html#can-graphs-be-represented-in-structureddata">Can graphs be represented in StructuredData ?</a></li>
<li class="toctree-l3"><a class="reference internal" href="introduction.html#can-trees-be-represented-in-structureddata">Can trees be represented in StructuredData ?</a></li>
<li class="toctree-l3"><a class="reference internal" href="introduction.html#can-the-data-of-a-relational-database-represented-in-structureddata">Can the data of a relational database represented in StructuredData ?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html#comparisons-to-other-concepts">Comparisons to other concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#advantages-of-structureddata-compared-to-a-database">Advantages of StructuredData compared to a database</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#advantages-of-structureddata-compared-to-other-text-file-formats">Advantages of StructuredData compared to other text file formats</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="reference.html#structureddata-in-general">StructuredData in general</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference.html#structureddata-terminology">StructuredData terminology</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference.html#references-and-links">References and links</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference.html#relation-of-structured-data-to-python-data-structures">Relation of Structured Data to python data structures</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference.html#paths">Paths</a><ul>
<li class="toctree-l4"><a class="reference internal" href="reference.html#joining-a-keylist-to-a-path">Joining a keylist to a path</a></li>
<li class="toctree-l4"><a class="reference internal" href="reference.html#escape-rules">Escape rules</a></li>
<li class="toctree-l4"><a class="reference internal" href="reference.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="reference.html#patterns">Patterns</a><ul>
<li class="toctree-l4"><a class="reference internal" href="reference.html#id1">Example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference.html#structureddatastore">StructuredDataStore</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference.html#structureddatatypes">StructuredDataTypes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference.html#differences-to-programming-language-type-declarations">Differences to programming language type declarations</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference.html#typepatterns">Typepatterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference.html#typepattern-matching">Typepattern matching</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference.html#type-declarations">Type declarations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="reference.html#boolean">boolean</a></li>
<li class="toctree-l4"><a class="reference internal" href="reference.html#integer">integer</a></li>
<li class="toctree-l4"><a class="reference internal" href="reference.html#real">real</a></li>
<li class="toctree-l4"><a class="reference internal" href="reference.html#string">string</a></li>
<li class="toctree-l4"><a class="reference internal" href="reference.html#optional-struct">optional struct</a></li>
<li class="toctree-l4"><a class="reference internal" href="reference.html#open-struct">open struct</a></li>
<li class="toctree-l4"><a class="reference internal" href="reference.html#struct">struct</a></li>
<li class="toctree-l4"><a class="reference internal" href="reference.html#typed-map">typed map</a></li>
<li class="toctree-l4"><a class="reference internal" href="reference.html#map">map</a></li>
<li class="toctree-l4"><a class="reference internal" href="reference.html#optional-list">optional list</a></li>
<li class="toctree-l4"><a class="reference internal" href="reference.html#typed-list">typed list</a></li>
<li class="toctree-l4"><a class="reference internal" href="reference.html#list">list</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference.html#structureddatacontainer">StructuredDataContainer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="SDpyshell.html">SDpyshell</a><ul>
<li class="toctree-l2"><a class="reference internal" href="SDpyshell.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="SDpyshell.html#basic-syntax">Basic Syntax</a><ul>
<li class="toctree-l3"><a class="reference internal" href="SDpyshell.html#function-calls">function calls</a></li>
<li class="toctree-l3"><a class="reference internal" href="SDpyshell.html#procedure-calls">procedure calls</a></li>
<li class="toctree-l3"><a class="reference internal" href="SDpyshell.html#string-literals">string literals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="SDpyshell.html#basic-function">Basic function</a></li>
<li class="toctree-l2"><a class="reference internal" href="SDpyshell.html#command-layers">Command layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="SDpyshell.html#format-specifications">Format Specifications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="SDpyshell.html#structure-formats">Structure Formats</a></li>
<li class="toctree-l3"><a class="reference internal" href="SDpyshell.html#text-formats">Text formats</a></li>
<li class="toctree-l3"><a class="reference internal" href="SDpyshell.html#marking-links">Marking links</a></li>
<li class="toctree-l3"><a class="reference internal" href="SDpyshell.html#flat-format">Flat format</a></li>
<li class="toctree-l3"><a class="reference internal" href="SDpyshell.html#dry-run">Dry run</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="SDpyshell.html#commands-and-functions">Commands and Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="SDpyshell.html#generic-functions">Generic functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#help">help</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id1">help()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-help">txt.help()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-help">fun.help()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#sdtype">SDtype</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-sdtype">fun.SDtype()</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="SDpyshell.html#string-and-path-functions">String and path functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#format">format</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id2">format()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-format">txt.format()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#string2pathkey">string2pathkey</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id3">string2pathkey()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-string2pathkey">txt.string2pathkey()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-string2pathkey">fun.string2pathkey()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#pathkey2string">pathkey2string</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id4">pathkey2string()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-pathkey2string">txt.pathkey2string()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-pathkey2string">fun.pathkey2string()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#splitpath">splitpath</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id5">splitpath()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-splitpath">txt.splitpath()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-splitpath">fun.splitpath()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#joinpath">joinpath</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id6">joinpath()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-joinpath">txt.joinpath()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-joinpath">fun.joinpath()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#combinepaths">combinepaths</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id7">combinepaths()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-combinepaths">txt.combinepaths()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-combinepaths">fun.combinepaths()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#addpaths">addpaths</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id8">addpaths()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-addpaths">txt.addpaths()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-addpaths">fun.addpaths()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#poppath">poppath</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id9">poppath()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-poppath">txt.poppath()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-poppath">fun.poppath()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#substpath">substpath</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id10">substpath()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-substpath">txt.substpath()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-substpath">fun.substpath()</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="SDpyshell.html#functions-for-the-structureddatacontainer">Functions for the StructuredDataContainer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#newsdc">newsdc</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-newsdc">fun.newsdc()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#namedsdc">namedsdc</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-namedsdc">fun.namedsdc()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#locksdc">locksdc</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-locksdc">fun.locksdc()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#copy">copy</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id11">copy()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-copy">txt.copy()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-copy">fun.copy()</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="SDpyshell.html#file-i-o">File I/O</a><ul>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#lockfile">lockfile</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-lockfile">fun.lockfile()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#lockdir">lockdir</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-lockdir">fun.lockdir()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#read">read</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id12">read()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-read">txt.read()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-read">fun.read()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#write">write</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id13">write()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-write">txt.write()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-write">fun.write()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#rewrite">rewrite</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id14">rewrite()</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="SDpyshell.html#printing">Printing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#pr">pr</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id15">pr()</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="SDpyshell.html#generic-functions-for-the-structureddatastore">Generic functions for the StructuredDataStore</a><ul>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#clear-store">clear_store</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id16">clear_store()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-clear-store">txt.clear_store()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-clear-store">fun.clear_store()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#refresh-links">refresh_links</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id17">refresh_links()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-refresh-links">txt.refresh_links()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-refresh-links">fun.refresh_links()</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="SDpyshell.html#generic-functions-for-structureddatatypes">Generic functions for StructuredDataTypes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#clear-types">clear_types</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id18">clear_types()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-clear-types">txt.clear_types()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-clear-types">fun.clear_types()</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="SDpyshell.html#querying-the-data">Querying the data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#paths">paths</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id19">paths()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-paths">txt.paths()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-paths">fun.paths()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#find">find</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id20">find()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-find">txt.find()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-find">fun.find()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#ifind">ifind</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id21">ifind()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-ifind">txt.ifind()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-ifind">fun.ifind()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#rxfind">rxfind</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id22">rxfind()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-rxfind">txt.rxfind()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-rxfind">fun.rxfind()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#findval">findval</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id24">findval()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-findval">txt.findval()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-findval">fun.findval()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#ifindval">ifindval</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id25">ifindval()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-ifindval">txt.ifindval()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-ifindval">fun.ifindval()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#rxfindval">rxfindval</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id26">rxfindval()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-rxfindval">txt.rxfindval()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-rxfindval">fun.rxfindval()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#get">get</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id29">get()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-get">txt.get()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-get">fun.get()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#getlinks">getlinks</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id30">getlinks()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-getlinks">txt.getlinks()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-getlinks">fun.getlinks()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#findlinks">findlinks</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id31">findlinks()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-findlinks">txt.findlinks()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-findlinks">fun.findlinks()</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="SDpyshell.html#modifying-the-data">Modifying the data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#filter-out">filter_out</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id32">filter_out()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-filter-out">txt.filter_out()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-filter-out">fun.filter_out()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#change">change</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id33">change()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-change">txt.change()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-change">fun.change()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#put">put</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id34">put()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-put">txt.put()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-put">fun.put()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#delete">delete</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id35">delete()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-delete">txt.delete()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-delete">fun.delete()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#link">link</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id36">link()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-link">txt.link()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-link">fun.link()</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="SDpyshell.html#querying-types">Querying types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#typepaths">typepaths</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id37">typepaths()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-typepaths">txt.typepaths()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-typepaths">fun.typepaths()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#typefind">typefind</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id38">typefind()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-typefind">txt.typefind()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-typefind">fun.typefind()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#typeget">typeget</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id39">typeget()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-typeget">txt.typeget()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-typeget">fun.typeget()</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="SDpyshell.html#modifying-types">Modifying types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#typeput">typeput</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id40">typeput()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-typeput">txt.typeput()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-typeput">fun.typeput()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#typeadditem">typeadditem</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id41">typeadditem()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-typeadditem">txt.typeadditem()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-typeadditem">fun.typeadditem()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#typedelete">typedelete</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id42">typedelete()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-typedelete">txt.typedelete()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-typedelete">fun.typedelete()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#typedeleteitem">typedeleteitem</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id43">typedeleteitem()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-typedeleteitem">txt.typedeleteitem()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-typedeleteitem">fun.typedeleteitem()</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="SDpyshell.html#typechecking">Typechecking</a><ul>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#typecheck">typecheck</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id44">typecheck()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-typecheck">txt.typecheck()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-typecheck">fun.typecheck()</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="SDpyshell.html#typematch">typematch</a><ul>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#id45">typematch()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#txt-typematch">txt.typematch()</a></li>
<li class="toctree-l5"><a class="reference internal" href="SDpyshell.html#fun-typematch">fun.typematch()</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="SDpyshell.html#command-aliases">Command aliases</a></li>
<li class="toctree-l2"><a class="reference internal" href="SDpyshell.html#invoking-sdpyshell">Invoking SDpyshell</a><ul>
<li class="toctree-l3"><a class="reference internal" href="SDpyshell.html#precommands">Precommands</a></li>
<li class="toctree-l3"><a class="reference internal" href="SDpyshell.html#extensions">Extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="SDpyshell.html#server-mode">Server mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="SDpyshell.html#server-password">Server password</a></li>
<li class="toctree-l3"><a class="reference internal" href="SDpyshell.html#process-management">Process management</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">SDpyshell Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#start-the-sdpyshell-and-read-the-data-file">Start the SDpyshell and read the data file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reports-with-get">Reports with get</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reports-with-find">Reports with find</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reports-with-rxfind">Reports with rxfind</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reports-with-findval">Reports with findval</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reports-with-rxfindval">Reports with rxfindval</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reports-with-pr">Reports with pr</a></li>
<li class="toctree-l2"><a class="reference internal" href="#changing-a-single-value-with-change">Changing a single value with change</a></li>
<li class="toctree-l2"><a class="reference internal" href="#adding-a-value-with-put">Adding a value with put</a></li>
<li class="toctree-l2"><a class="reference internal" href="#working-with-links">Working with links</a></li>
<li class="toctree-l2"><a class="reference internal" href="#working-with-types">Working with types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#a-change-of-many-parameters-with-export-and-re-import">A change of many parameters with export and re-import</a></li>
<li class="toctree-l2"><a class="reference internal" href="#converting-a-python-structure-to-structureddata">Converting a python structure to StructuredData</a></li>
<li class="toctree-l2"><a class="reference internal" href="#converting-a-perl-structure-to-structureddata">Converting a perl structure to StructuredData</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="SDxmlrpc.html">SDxmlrpc</a><ul>
<li class="toctree-l2"><a class="reference internal" href="SDxmlrpc.html#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="SDxmlrpc.html#what-is-xml-rpc">What is XML-RPC ?</a></li>
<li class="toctree-l3"><a class="reference internal" href="SDxmlrpc.html#what-is-the-difference-between-sdxmlrpc-and-sdpyshell">What is the difference between SDxmlrpc and SDpyshell ?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="SDxmlrpc.html#basic-function">Basic function</a><ul>
<li class="toctree-l3"><a class="reference internal" href="SDxmlrpc.html#the-structureddatacontainer-key">The StructuredDataContainer key</a></li>
<li class="toctree-l3"><a class="reference internal" href="SDxmlrpc.html#return-values">Return values</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="SDxmlrpc.html#functions">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="SDxmlrpc.html#examples">Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="SDxmlrpc.html#python">Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="SDxmlrpc.html#perl">Perl</a></li>
<li class="toctree-l3"><a class="reference internal" href="SDxmlrpc.html#c">C</a></li>
<li class="toctree-l3"><a class="reference internal" href="SDxmlrpc.html#id1">C++</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="SDxmlrpc.html#invoking-sdxmlrpc">Invoking SDxmlrpc</a><ul>
<li class="toctree-l3"><a class="reference internal" href="SDxmlrpc.html#precommands">Precommands</a></li>
<li class="toctree-l3"><a class="reference internal" href="SDxmlrpc.html#extensions">Extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="SDxmlrpc.html#process-management">Process management</a></li>
<li class="toctree-l3"><a class="reference internal" href="SDxmlrpc.html#restarting-the-server">Restarting the server</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="SDview.html">SDview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="SDview.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="SDview.html#the-start-screen">The start screen</a></li>
<li class="toctree-l2"><a class="reference internal" href="SDview.html#the-tree-frame">The tree frame</a></li>
<li class="toctree-l2"><a class="reference internal" href="SDview.html#the-tree-display-frame">The tree display frame</a><ul>
<li class="toctree-l3"><a class="reference internal" href="SDview.html#collapse-all">collapse all</a></li>
<li class="toctree-l3"><a class="reference internal" href="SDview.html#expand-all">expand all</a></li>
<li class="toctree-l3"><a class="reference internal" href="SDview.html#collapse">collapse</a></li>
<li class="toctree-l3"><a class="reference internal" href="SDview.html#expand">expand</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="SDview.html#the-search-frame">The search frame</a><ul>
<li class="toctree-l3"><a class="reference internal" href="SDview.html#the-search-type">The search type</a><ul>
<li class="toctree-l4"><a class="reference internal" href="SDview.html#pattern">pattern</a></li>
<li class="toctree-l4"><a class="reference internal" href="SDview.html#ipattern">ipattern</a></li>
<li class="toctree-l4"><a class="reference internal" href="SDview.html#regexp">regexp</a></li>
<li class="toctree-l4"><a class="reference internal" href="SDview.html#find-value">find value</a></li>
<li class="toctree-l4"><a class="reference internal" href="SDview.html#ipattern-find-value">ipattern find value</a></li>
<li class="toctree-l4"><a class="reference internal" href="SDview.html#regexp-find-value">regexp find value</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="SDview.html#report-only-leaves">report only leaves</a></li>
<li class="toctree-l3"><a class="reference internal" href="SDview.html#result-window">result window</a><ul>
<li class="toctree-l4"><a class="reference internal" href="SDview.html#no">no</a></li>
<li class="toctree-l4"><a class="reference internal" href="SDview.html#show-paths">show paths</a></li>
<li class="toctree-l4"><a class="reference internal" href="SDview.html#show-paths-and-values">show paths and values</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Various ways of accessing the data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="examples.html#an-example-with-sdpyshell">An example with SDpyshell</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#an-example-using-the-sdshellib">An example using the SDshellib</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#an-example-using-structureddata-classes">An example using StructuredData.Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#an-example-with-python-and-pure-yaml">An example with python and pure yaml</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#an-example-with-perl-and-pure-yaml">An example with perl and pure yaml</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="python_modules.html">Python Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="python_modules.html#module-StructuredData.SDshelllib">SDshelllib</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_modules.html#module-StructuredData.SDshelllibTxt">SDshelllibTxt</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_modules.html#module-StructuredData.SDshelllibFun">SDshelllibFun</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_modules.html#module-StructuredData.SDshelllibBase">SDshelllibBase</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_modules.html#module-StructuredData.SDshellrpclib">SDshellrpclib</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_modules.html#module-StructuredData.Classes">Classes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="license.html">StructuredData License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">YAML-StructuredData</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>SDpyshell Examples</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/SDpyshell_examples.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sdpyshell-examples">
<h1>SDpyshell Examples<a class="headerlink" href="#sdpyshell-examples" title="Permalink to this headline">¶</a></h1>
<p>All these examples use the SDpyshell and the file “idcp_db.cache.SDCyml” of the
“samples” directory that is provided with the source of the python
StructuredDataStore module. They give you an overview of the capabilities of
StructuredData. For more details see also the chapter “Reference”.</p>
<p>Details of the SDpyshell syntax are described in the chapter “Working with the
SDpyshell”, it is the same syntax as of python version 2.7.</p>
<div class="section" id="start-the-sdpyshell-and-read-the-data-file">
<h2>Start the SDpyshell and read the data file<a class="headerlink" href="#start-the-sdpyshell-and-read-the-data-file" title="Permalink to this headline">¶</a></h2>
<p>Change to the “samples” directory of the source distribution:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">samples</span>
</pre></div>
</div>
<p>Now we start SDpyshell and read the file “idcp_db.cache.SDCyml”. Note that lines beginning with “&gt;” are commands entered at the SDpyshell prompt:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">SDpyshell</span>
<span class="n">SDpython</span> <span class="n">shell</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">r</span><span class="p">(</span><span class="s2">&quot;idcp_db.cache.SDCyml&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="reports-with-get">
<h2>Reports with get<a class="headerlink" href="#reports-with-get" title="Permalink to this headline">¶</a></h2>
<p>The “get” command returns the data structure referenced by a given path. Here
we want to see everything of the group “global” for the “UE112” device and
pretty-print this as a python structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id-data.UE112.global&quot;</span><span class="p">,</span> <span class="s2">&quot;py&quot;</span><span class="p">)</span>
<span class="go">{&#39;description&#39;: &#39;UE112  ,UE112ID7R,idcp13&#39;,</span>
<span class="go"> &#39;device_status&#39;: &#39;installed&#39;,</span>
<span class="go"> &#39;id-key&#39;: 13,</span>
<span class="go"> &#39;instance_no&#39;: 0,</span>
<span class="go"> &#39;primary_key&#39;: 39,</span>
<span class="go"> &#39;undulator&#39;: &#39;UE112&#39;}</span>
</pre></div>
</div>
<p>We can also specify YAML as format for the result:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id-data.UE112.global&quot;</span><span class="p">,</span> <span class="s2">&quot;yaml&quot;</span><span class="p">)</span>
<span class="go">description: UE112  ,UE112ID7R,idcp13</span>
<span class="go">device_status: installed</span>
<span class="go">id-key: 13</span>
<span class="go">instance_no: 0</span>
<span class="go">primary_key: 39</span>
<span class="go">undulator: UE112</span>
</pre></div>
</div>
<p>get can also print simple scalar values:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id-data.UE112.global.device_status&quot;</span><span class="p">,</span> <span class="s2">&quot;py&quot;</span><span class="p">)</span>
<span class="go">&#39;installed&#39;</span>
</pre></div>
</div>
<p>If we don’t want to have simple values printed as python literals, we can omit
the format specification “:py”. In this case get uses the “raw” format, which
prints the raw values:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id-data.UE112.global.device_status&quot;</span><span class="p">)</span>
<span class="go">installed</span>
</pre></div>
</div>
<p>If provided with a <a class="reference internal" href="reference.html#reference-structureddata-patterns"><span class="std std-ref">pattern</span></a>
get returns a list if more than one path matches:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id-data.*.global.id-key&quot;</span><span class="p">)</span>
<span class="go">[96, 3, 110, 98, 97, 95, 12, 80, 7, 15, 13, 10, 8, 9, 11, 5, 81, 99]</span>
</pre></div>
</div>
</div>
<div class="section" id="reports-with-find">
<h2>Reports with find<a class="headerlink" href="#reports-with-find" title="Permalink to this headline">¶</a></h2>
<p>Find accepts <em>wildcards</em> in the path argument. Currently wildcard is just the
string “*”. A path with optional wildcards is called a <em>pattern</em>. With this
feature we can print data for several paths with a single command.</p>
<p>Here we print the “id-key” property for all devices:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;id-data.*.global.id-key&quot;</span><span class="p">)</span>
<span class="go">id-data.U125/1.global.id-key : 96</span>
<span class="go">id-data.U125/2.global.id-key : 3</span>
<span class="go">id-data.U139.global.id-key   : 110</span>
<span class="go">id-data.U2.global.id-key     : 98</span>
<span class="go">id-data.U3.global.id-key     : 97</span>
<span class="go">id-data.U4.global.id-key     : 95</span>
<span class="go">id-data.U41.global.id-key    : 12</span>
<span class="go">id-data.U48.global.id-key    : 80</span>
<span class="go">id-data.U49/1.global.id-key  : 7</span>
<span class="go">id-data.U49/2.global.id-key  : 15</span>
<span class="go">id-data.UE112.global.id-key  : 13</span>
<span class="go">id-data.UE46.global.id-key   : 10</span>
<span class="go">id-data.UE49.global.id-key   : 8</span>
<span class="go">id-data.UE52.global.id-key   : 9</span>
<span class="go">id-data.UE56/1.global.id-key : 11</span>
<span class="go">id-data.UE56/2.global.id-key : 5</span>
<span class="go">id-data.UE56R.global.id-key  : 81</span>
<span class="go">id-data.Ubonsai.global.id-key: 99</span>
</pre></div>
</div>
<p>The find command uses the “aligned” format as a default. It can also return
it’s results in YAML or python. Note that find searches <em>all paths</em> in the
StructuredData to test if they match the given pattern.</p>
<p>If you enter a path without wildcards, find returns the same as get would do
with the “aligned” format. However, find is much slower than get in this case
since it tests all paths where get directly uses the path provided.</p>
</div>
<div class="section" id="reports-with-rxfind">
<h2>Reports with rxfind<a class="headerlink" href="#reports-with-rxfind" title="Permalink to this headline">¶</a></h2>
<p>rxfind tests all paths whether they match a regular expression. Regular
expressions are quite powerful for searching strings. Since a regular
expression may contain many special characters, we do not use <em>simplified
strings</em> here but use single quotes instead:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rxfind</span><span class="p">(</span><span class="s1">&#39;.*UE56/2.*v_max&#39;</span><span class="p">)</span>
<span class="go">id-data.UE56/2.config.v_max_diff    : 0.1</span>
<span class="go">id-data.UE56/2.config.v_max_pos     : 185</span>
<span class="go">id-data.UE56/2.config.v_max_velocity: 2500</span>
</pre></div>
</div>
<p>Like find, rxfind returns it’s results in “aligned” format as a default.</p>
</div>
<div class="section" id="reports-with-findval">
<h2>Reports with findval<a class="headerlink" href="#reports-with-findval" title="Permalink to this headline">¶</a></h2>
<p>This command looks for a given scalar in the StructuredData. Like the other
find commands it returns it’s results in “aligned” format as default:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">findval</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="go">id-data.U125/2.config.v_critical_pos       : 20.0</span>
<span class="go">id-data.U2.config.v_critical_pos           : 20.0</span>
<span class="go">id-data.U3.config.v_critical_pos           : 20.0</span>
<span class="go">id-data.U3.feedback.cc_tables              : 20</span>
<span class="go">id-data.U49/1.config.v_critical_pos        : 20.0</span>
<span class="go">id-data.UE112.config.coil_number           : 20</span>
<span class="go">id-data.UE56/2.feedback.cc_tables          : 20</span>
<span class="go">id-metadata.parameter-info.id-key.order_key: 20</span>
</pre></div>
</div>
<p>If provided with a <a class="reference internal" href="reference.html#reference-structureddata-patterns"><span class="std std-ref">pattern</span></a>
findval looks only at paths that match the given pattern:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">findval</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">pattern</span><span class="o">=</span><span class="s2">&quot;id-data.*.config.v_critical_pos&quot;</span><span class="p">)</span>
<span class="go">id-data.U125/2.config.v_critical_pos: 20.0</span>
<span class="go">id-data.U2.config.v_critical_pos    : 20.0</span>
<span class="go">id-data.U3.config.v_critical_pos    : 20.0</span>
<span class="go">id-data.U49/1.config.v_critical_pos : 20.0</span>
</pre></div>
</div>
<p>You can now combine the results of findval from the example above with other
commands. In the following example we use the results from the query above. We
call “fun.findval” instead of “findval” and store it’s results in variable “n”.
We then modify the returned paths with
“<a class="reference internal" href="SDpyshell.html#sdpyshell-fun-substpath"><span class="std std-ref">fun.substpath</span></a>” and use
“<a class="reference internal" href="SDpyshell.html#sdpyshell-get"><span class="std std-ref">get</span></a>” with it’s results.  In the end we get the values
of the property “devicename” for all the devices:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">n</span><span class="o">=</span><span class="n">fun</span><span class="o">.</span><span class="n">findval</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">pattern</span><span class="o">=</span><span class="s2">&quot;id-data.*.config.v_critical_pos&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get</span><span class="p">(</span><span class="n">fun</span><span class="o">.</span><span class="n">substpath</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="s2">&quot;id-data.*.names.devicename&quot;</span><span class="p">))</span>
<span class="go">[&#39;U49ID4R&#39;, &#39;U3IV&#39;, &#39;U2IV&#39;, &#39;U125ID2R&#39;]</span>
</pre></div>
</div>
</div>
<div class="section" id="reports-with-rxfindval">
<h2>Reports with rxfindval<a class="headerlink" href="#reports-with-rxfindval" title="Permalink to this headline">¶</a></h2>
<p>This command matches all scalar values with a given regular expression. Here is
an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rxfindval</span><span class="p">(</span><span class="s1">&#39;.*-ppc&#39;</span><span class="p">)</span>
<span class="go">id-data.U125/2.config.target_arch : vxWorks-ppc603</span>
<span class="go">id-data.U139.config.target_arch   : vxWorks-ppc603</span>
<span class="go">id-data.U3.config.target_arch     : vxWorks-ppc603</span>
<span class="go">id-data.U41.config.target_arch    : vxWorks-ppc603</span>
<span class="go">id-data.U49/1.config.target_arch  : vxWorks-ppc603</span>
<span class="go">id-data.U49/2.config.target_arch  : vxWorks-ppc603</span>
<span class="go">id-data.UE112.config.target_arch  : vxWorks-ppc603</span>
<span class="go">id-data.UE46.config.target_arch   : vxWorks-ppc603</span>
<span class="go">id-data.UE49.config.target_arch   : vxWorks-ppc603</span>
<span class="go">id-data.UE52.config.target_arch   : vxWorks-ppc603</span>
<span class="go">id-data.UE56/1.config.target_arch : vxWorks-ppc603</span>
<span class="go">id-data.Ubonsai.config.target_arch: vxWorks-ppc603</span>
</pre></div>
</div>
</div>
<div class="section" id="reports-with-pr">
<h2>Reports with pr<a class="headerlink" href="#reports-with-pr" title="Permalink to this headline">¶</a></h2>
<p>The pr command is used to print StructuredData or parts of it to the console.
Note that this is different from “print”, which is the generic print command to
print any value (numbers, strings, data structures) to the console.</p>
<p>pr filters it’s results when a <em>pattern</em> is provided. As a default it returns
it’s results in YAML format. pr usually would also print all the type
declarations. In this example we want only see the pure data, so we specify
only to print the “store” in the format specification:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pr</span><span class="p">(</span><span class="s2">&quot;store&quot;</span><span class="p">,</span> <span class="n">pattern</span><span class="o">=</span><span class="s2">&quot;id-data.UE112.global.**&quot;</span><span class="p">)</span>
<span class="go">id-data:</span>
<span class="go">    UE112:</span>
<span class="go">        global:</span>
<span class="go">            description: UE112  ,UE112ID7R,idcp13</span>
<span class="go">            device_status: installed</span>
<span class="go">            id-key: 13</span>
<span class="go">            instance_no: 0</span>
<span class="go">            primary_key: 39</span>
<span class="go">            undulator: UE112</span>
</pre></div>
</div>
<p>pr can also return it’s results in csv format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="p">(</span><span class="s2">&quot;store:csv&quot;</span><span class="p">,</span> <span class="n">pattern</span><span class="o">=</span><span class="s2">&quot;id-data.UE112.global.**&quot;</span><span class="p">)</span>
<span class="go">id-data;UE112;global;description;UE112  ,UE112ID7R,idcp13</span>
<span class="go">id-data;UE112;global;device_status;installed</span>
<span class="go">id-data;UE112;global;id-key;13</span>
<span class="go">id-data;UE112;global;instance_no;0</span>
<span class="go">id-data;UE112;global;primary_key;39</span>
<span class="go">id-data;UE112;global;undulator;UE112</span>
</pre></div>
</div>
</div>
<div class="section" id="changing-a-single-value-with-change">
<h2>Changing a single value with change<a class="headerlink" href="#changing-a-single-value-with-change" title="Permalink to this headline">¶</a></h2>
<p>This command is used to change an existing value. Here we read a value, change
it and then read it again:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id-data.Ubonsai.global.id-key&quot;</span><span class="p">)</span>
<span class="go">99</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">change</span><span class="p">(</span><span class="s2">&quot;id-data.Ubonsai.global.id-key&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id-data.Ubonsai.global.id-key&quot;</span><span class="p">)</span>
<span class="go">100</span>
</pre></div>
</div>
<p>Note that for the change command, a node for the specified path must already
exist. If it doesn’t, you get an error message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">change</span><span class="p">(</span><span class="s2">&quot;id-data.Ubonsai.global.id-keyx&quot;</span><span class="p">,</span> <span class="mi">101</span><span class="p">)</span>
<span class="go">path &quot;id-data.Ubonsai.global.id-keyx&quot; doesn&#39;t exist</span>
</pre></div>
</div>
</div>
<div class="section" id="adding-a-value-with-put">
<h2>Adding a value with put<a class="headerlink" href="#adding-a-value-with-put" title="Permalink to this headline">¶</a></h2>
<p>The put command can create all parts of a path on the fly. It is not necessary
that all nodes for the specified path already exist.</p>
<p>Here is the node for path “id-data.U48.global” before the change:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id-data.U48.global&quot;</span><span class="p">,</span> <span class="s2">&quot;py&quot;</span><span class="p">)</span>
<span class="go">{&#39;description&#39;: &#39;U48    ,U48IV    ,idcp80,located in lund&#39;,</span>
<span class="go"> &#39;device_status&#39;: &#39;test&#39;,</span>
<span class="go"> &#39;id-key&#39;: 80,</span>
<span class="go"> &#39;instance_no&#39;: 0,</span>
<span class="go"> &#39;primary_key&#39;: 40,</span>
<span class="go"> &#39;undulator&#39;: &#39;U48&#39;}</span>
</pre></div>
</div>
<p>Now we add a value and create a new map on the fly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;id-data.U48.global.newdict.param1&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>This is how the node now looks like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id-data.U48.global&quot;</span><span class="p">,</span> <span class="s2">&quot;py&quot;</span><span class="p">)</span>
<span class="go">{&#39;description&#39;: &#39;U48    ,U48IV    ,idcp80,located in lund&#39;,</span>
<span class="go"> &#39;device_status&#39;: &#39;test&#39;,</span>
<span class="go"> &#39;id-key&#39;: 80,</span>
<span class="go"> &#39;instance_no&#39;: 0,</span>
<span class="go"> &#39;newdict&#39;: {&#39;param1&#39;: 10},</span>
<span class="go"> &#39;primary_key&#39;: 40,</span>
<span class="go"> &#39;undulator&#39;: &#39;U48&#39;}</span>
</pre></div>
</div>
</div>
<div class="section" id="working-with-links">
<h2>Working with links<a class="headerlink" href="#working-with-links" title="Permalink to this headline">¶</a></h2>
<p>For these examples we need to load another StructuredData file. We finish the
shell from the previous examples with CTRL-D and start another one:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SDpython</span> <span class="n">shell</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">r</span><span class="p">(</span><span class="s2">&quot;NAMES.SDCyml&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>In this example we use <em>links</em> at many places. The data was actually imported
from a relational database where foreign keys were replaced with links.</p>
<p>An item is called a <em>link</em> when the referenced data is also referenced to at
one or more other places in StructuredData.</p>
<p>Here we print a single entry from the “names” list in python format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;names[9]&quot;</span><span class="p">,</span> <span class="s2">&quot;py&quot;</span><span class="p">)</span>
<span class="go">{&#39;description&#39;: &#39;Quadrupole GIS&#39;,</span>
<span class="go"> &#39;device_family&#39;: {&#39;description&#39;: &#39;Geodesy&#39;, &#39;part_family&#39;: &#39;G&#39;},</span>
<span class="go"> &#39;part_counter&#39;: &#39;2&#39;,</span>
<span class="go"> &#39;part_index&#39;: &#39;12&#39;,</span>
<span class="go"> &#39;part_name&#39;: &#39;Q&#39;,</span>
<span class="go"> &#39;part_subindex&#39;: &#39;&#39;,</span>
<span class="go"> &#39;subdomain&#39;: {&#39;description&#39;: &#39;Triplet Section 1&#39;,</span>
<span class="go">               &#39;domain&#39;: {&#39;description&#39;: &#39;Storage ring&#39;,</span>
<span class="go">                          &#39;facility&#39;: {&#39;description&#39;: &#39;BESSY II Ring&#39;,</span>
<span class="go">                                       &#39;name&#39;: &#39;BII&#39;,</span>
<span class="go">                                       &#39;part_facility&#39;: &#39; &#39;},</span>
<span class="go">                          &#39;part_domain&#39;: &#39;R&#39;},</span>
<span class="go">               &#39;part_postfix&#39;: &#39;1&#39;,</span>
<span class="go">               &#39;part_subdomain&#39;: &#39;T&#39;}}</span>
</pre></div>
</div>
<p>The map for the key “subdomain” is actually a link, but in the example above we
cannot see this (if we looked in the file “NAMES.SDCyml” we could).</p>
<p>If we use find with the format “marklinks”, links get a mark,
a star character at the end of a key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;names[9].**&quot;</span><span class="p">,</span><span class="s2">&quot;marklinks&quot;</span><span class="p">)</span>
<span class="go">names[9].description                               : Quadrupole GIS</span>
<span class="go">names[9].device_family*.description                : Geodesy</span>
<span class="go">names[9].device_family*.part_family                : G</span>
<span class="go">names[9].part_counter                              : 2</span>
<span class="go">names[9].part_index                                : 12</span>
<span class="go">names[9].part_name                                 : Q</span>
<span class="go">names[9].part_subindex                             :</span>
<span class="go">names[9].subdomain*.description                    : Triplet Section 1</span>
<span class="go">names[9].subdomain*.domain*.description            : Storage ring</span>
<span class="go">names[9].subdomain*.domain*.facility*.description  : BESSY II Ring</span>
<span class="go">names[9].subdomain*.domain*.facility*.name         : BII</span>
<span class="go">names[9].subdomain*.domain*.facility*.part_facility:</span>
<span class="go">names[9].subdomain*.domain*.part_domain            : R</span>
<span class="go">names[9].subdomain*.part_postfix                   : 1</span>
<span class="go">names[9].subdomain*.part_subdomain                 : T</span>
</pre></div>
</div>
<p>Each part of a path that has a star at the end is a link. Here we see that these paths are links:</p>
<ul class="simple">
<li><p>names[9].device_family</p></li>
<li><p>names[9].subdomain</p></li>
<li><p>names[9].subdomain.domain</p></li>
<li><p>names[9].subdomain.domain.facility</p></li>
</ul>
<p>We can also list all paths that refer to the same data for a given path with
the getlinks command.</p>
<p>First we show the links for the subdomain property:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">getlinks</span><span class="p">(</span><span class="s2">&quot;names[9].subdomain&quot;</span><span class="p">)</span>
<span class="go">- 03_subdomain[78]</span>
<span class="go">- names[9].subdomain</span>
</pre></div>
</div>
<p>Here we show the links for the facility property:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">getlinks</span><span class="p">(</span><span class="s2">&quot;names[9].subdomain.domain.facility&quot;</span><span class="p">)</span>
<span class="go">- 01_facility[0]</span>
<span class="go">- 03_subdomain[0].domain.facility</span>
<span class="go">- 03_subdomain[171].domain.facility</span>
<span class="go">- 03_subdomain[1].domain.facility</span>
<span class="go">- 03_subdomain[2].domain.facility</span>
<span class="go">- 03_subdomain[3].domain.facility</span>
<span class="go">- 03_subdomain[4].domain.facility</span>
<span class="go">- 03_subdomain[5].domain.facility</span>
<span class="go">- 03_subdomain[6].domain.facility</span>
<span class="go">- 03_subdomain[7].domain.facility</span>
<span class="go">- 03_subdomain[8].domain.facility</span>
</pre></div>
</div>
<p>We can filter the results of such a query in order to see only paths that do
not match a pattern like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">getlinks</span><span class="p">(</span><span class="s2">&quot;names[9].subdomain.domain.facility&quot;</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="s2">&quot;03_subdomain.*.domain.facility&quot;</span><span class="p">)</span>
<span class="go">- 01_facility[0]</span>
</pre></div>
</div>
<p>Now we show how a link can be changed. In names[9] we want to assign a
different subdomain. This is done with the link command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">link</span><span class="p">(</span><span class="s2">&quot;names[9].subdomain&quot;</span><span class="p">,</span> <span class="s2">&quot;03_subdomain[44]&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If we print names[9] again we see that the subdomain (see the first get on
names[9] further above) has changed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;names[9].**&quot;</span><span class="p">,</span> <span class="s2">&quot;marklinks&quot;</span><span class="p">)</span>
<span class="go">names[9].description                               : Quadrupole GIS</span>
<span class="go">names[9].device_family*.description                : Geodesy</span>
<span class="go">names[9].device_family*.part_family                : G</span>
<span class="go">names[9].part_counter                              : 2</span>
<span class="go">names[9].part_index                                : 12</span>
<span class="go">names[9].part_name                                 : Q</span>
<span class="go">names[9].part_subindex                             :</span>
<span class="go">names[9].subdomain*.description                    : Doublet Section 2</span>
<span class="go">names[9].subdomain*.domain*.description            : Gallery/Supply Area/Infrastructure</span>
<span class="go">names[9].subdomain*.domain*.facility*.description  : BESSY II Ring</span>
<span class="go">names[9].subdomain*.domain*.facility*.name         : BII</span>
<span class="go">names[9].subdomain*.domain*.facility*.part_facility:</span>
<span class="go">names[9].subdomain*.domain*.part_domain            : G</span>
<span class="go">names[9].subdomain*.part_postfix                   : 2</span>
<span class="go">names[9].subdomain*.part_subdomain                 : D</span>
</pre></div>
</div>
</div>
<div class="section" id="working-with-types">
<h2>Working with types<a class="headerlink" href="#working-with-types" title="Permalink to this headline">¶</a></h2>
<p>The simplies action with types is to perform a typecheck of a
StructuredDataContainer file from the command line. Here is an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">SDpyshell</span> <span class="o">-</span><span class="n">c</span> <span class="s1">&#39;r(&quot;idcp_db.cache.SDCyml&quot;);typecheck()&#39;</span>
<span class="nb">all</span> <span class="n">typechecks</span> <span class="n">succeeded</span>
</pre></div>
</div>
<p>We can, however, explore and change types in the interacticve shell. First we
start the shell and load the file “idcp_db.cache.SDCyml”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">SDpyshell</span>
<span class="n">SDpython</span> <span class="n">shell</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">r</span><span class="p">(</span><span class="s2">&quot;idcp_db.cache.SDCyml&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>We first print a certain value:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;id-data.UE46.names.**&quot;</span><span class="p">,</span> <span class="s2">&quot;aligned&quot;</span><span class="p">)</span>
<span class="go">id-data.UE46.names.devicename: UE46IT5R</span>
<span class="go">id-data.UE46.names.key       : 10</span>
<span class="go">id-data.UE46.names.name      : UE46</span>
<span class="go">id-data.UE46.names.prefix    : idcp10</span>
</pre></div>
</div>
<p>We now want to know if a type is defined for this path. The typematch command
prints the matching type declaration if it finds one:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">typematch</span><span class="p">(</span><span class="s2">&quot;id-data.UE46.names&quot;</span><span class="p">)</span>
<span class="go">id-data.*.names:</span>
<span class="go">    optional_struct:</span>
<span class="go">    - devicename</span>
<span class="go">    - key</span>
<span class="go">    - name</span>
<span class="go">    - prefix</span>
</pre></div>
</div>
<p>The first line of the result is the matching pattern in the StructuredDataTypes
object. The part that follows is the type declaration.  We see that this is an
“optional_struct” meaning that this is a map where all keys must be keys of the
given list of keys but not all keys of the list must be present.</p>
<p>Now we want to see if there are type declarations for the members of this
“optional_struct”. The typepaths command just prints the patterns without the
type declarations:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">typepaths</span><span class="p">(</span><span class="s2">&quot;id-data.*.names.*&quot;</span><span class="p">)</span>
<span class="go">- id-data.*.names.devicename</span>
<span class="go">- id-data.*.names.key</span>
<span class="go">- id-data.*.names.name</span>
<span class="go">- id-data.*.names.prefix</span>
</pre></div>
</div>
<p>We want to see what the type declaration for path “id-data.*.names.devicename”
is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">typeget</span><span class="p">(</span><span class="s2">&quot;id-data.*.names.devicename&quot;</span><span class="p">)</span>
<span class="go">string</span>
<span class="gp">...</span>
</pre></div>
</div>
<p>The “…” is created by converting a simple string to YAML.</p>
<p>The typefind command can be used to print all types that match a pattern:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">typefind</span><span class="p">(</span><span class="s2">&quot;id-data.*.names.*&quot;</span><span class="p">)</span>
<span class="go">id-data.*.names.devicename: string</span>
<span class="go">id-data.*.names.key       : integer</span>
<span class="go">id-data.*.names.name      : string</span>
<span class="go">id-data.*.names.prefix    : string</span>
</pre></div>
</div>
<p>Types can also be modified on the command line. We can for example remove an
item in the optional_struct:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">typedeleteitem</span><span class="p">(</span><span class="s2">&quot;id-data.*.names&quot;</span><span class="p">,</span> <span class="s2">&quot;key&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If we verify the result we see that the item is gone:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">typeget</span><span class="p">(</span><span class="s2">&quot;id-data.*.names&quot;</span><span class="p">)</span>
<span class="go">optional_struct:</span>
<span class="go">- devicename</span>
<span class="go">- name</span>
<span class="go">- prefix</span>
</pre></div>
</div>
<p>We can also add a new item:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">typeadditem</span><span class="p">(</span><span class="s2">&quot;id-data.*.names&quot;</span><span class="p">,</span> <span class="s2">&quot;newkey&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>We again verify the result:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">typeget</span><span class="p">(</span><span class="s2">&quot;id-data.*.names&quot;</span><span class="p">)</span>
<span class="go">optional_struct:</span>
<span class="go">- devicename</span>
<span class="go">- name</span>
<span class="go">- newkey</span>
<span class="go">- prefix</span>
</pre></div>
</div>
<p>We can remove a complete type declaration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">typedelete</span><span class="p">(</span><span class="s2">&quot;id-data.*.names.devicename&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>We can add a type, even a complex one. For a <em>struct</em> for example we have to
provide a dictionary, we use <em>simplified strings</em> in this case. Note that the
space after “:” after “struct” is important. Without it SDpyshell would interpret
“:[” as a string literal:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">typeput</span><span class="p">(</span><span class="s2">&quot;id-data.*.newnames&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;struct&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;elm1&quot;</span><span class="p">,</span> <span class="s2">&quot;elm2&quot;</span><span class="p">,</span> <span class="s2">&quot;elm3&quot;</span> <span class="p">]})</span>
</pre></div>
</div>
<p>We verify the result:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">typeget</span><span class="p">(</span><span class="s2">&quot;id-data.*.newnames&quot;</span><span class="p">)</span>
<span class="go">struct:</span>
<span class="go">- elm1</span>
<span class="go">- elm2</span>
<span class="go">- elm3</span>
</pre></div>
</div>
</div>
<div class="section" id="a-change-of-many-parameters-with-export-and-re-import">
<h2>A change of many parameters with export and re-import<a class="headerlink" href="#a-change-of-many-parameters-with-export-and-re-import" title="Permalink to this headline">¶</a></h2>
<p>First we extract all parameters named “device_status” for all insertion
devices, we use the “flat” format in order to make the file more easily
editable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SDpyshell</span> <span class="o">-</span><span class="n">c</span> <span class="s1">&#39;r(&quot;idcp_db.cache.SDCyml&quot;);w(&quot;PARAMS.TXT&quot;, &quot;store:flat&quot;, pattern=&quot;id-data.*.global.device_status&quot;)&#39;</span>
</pre></div>
</div>
<p>The file “PARAMS.TXT” now looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">id</span><span class="o">-</span><span class="n">data</span><span class="o">.</span><span class="n">U125</span><span class="o">/</span><span class="mf">1.</span><span class="k">global</span><span class="o">.</span><span class="n">device_status</span><span class="p">:</span> <span class="n">test</span>
<span class="nb">id</span><span class="o">-</span><span class="n">data</span><span class="o">.</span><span class="n">U125</span><span class="o">/</span><span class="mf">2.</span><span class="k">global</span><span class="o">.</span><span class="n">device_status</span><span class="p">:</span> <span class="n">installed</span>
<span class="nb">id</span><span class="o">-</span><span class="n">data</span><span class="o">.</span><span class="n">U139</span><span class="o">.</span><span class="k">global</span><span class="o">.</span><span class="n">device_status</span><span class="p">:</span> <span class="n">installed</span>
<span class="nb">id</span><span class="o">-</span><span class="n">data</span><span class="o">.</span><span class="n">U2</span><span class="o">.</span><span class="k">global</span><span class="o">.</span><span class="n">device_status</span><span class="p">:</span> <span class="n">simulated</span>
<span class="nb">id</span><span class="o">-</span><span class="n">data</span><span class="o">.</span><span class="n">U3</span><span class="o">.</span><span class="k">global</span><span class="o">.</span><span class="n">device_status</span><span class="p">:</span> <span class="n">test</span>
<span class="nb">id</span><span class="o">-</span><span class="n">data</span><span class="o">.</span><span class="n">U4</span><span class="o">.</span><span class="k">global</span><span class="o">.</span><span class="n">device_status</span><span class="p">:</span> <span class="n">test</span>
<span class="nb">id</span><span class="o">-</span><span class="n">data</span><span class="o">.</span><span class="n">U41</span><span class="o">.</span><span class="k">global</span><span class="o">.</span><span class="n">device_status</span><span class="p">:</span> <span class="n">installed</span>
<span class="nb">id</span><span class="o">-</span><span class="n">data</span><span class="o">.</span><span class="n">U48</span><span class="o">.</span><span class="k">global</span><span class="o">.</span><span class="n">device_status</span><span class="p">:</span> <span class="n">test</span>
<span class="nb">id</span><span class="o">-</span><span class="n">data</span><span class="o">.</span><span class="n">U49</span><span class="o">/</span><span class="mf">1.</span><span class="k">global</span><span class="o">.</span><span class="n">device_status</span><span class="p">:</span> <span class="n">installed</span>
<span class="nb">id</span><span class="o">-</span><span class="n">data</span><span class="o">.</span><span class="n">U49</span><span class="o">/</span><span class="mf">2.</span><span class="k">global</span><span class="o">.</span><span class="n">device_status</span><span class="p">:</span> <span class="n">installed</span>
<span class="nb">id</span><span class="o">-</span><span class="n">data</span><span class="o">.</span><span class="n">UE112</span><span class="o">.</span><span class="k">global</span><span class="o">.</span><span class="n">device_status</span><span class="p">:</span> <span class="n">installed</span>
<span class="nb">id</span><span class="o">-</span><span class="n">data</span><span class="o">.</span><span class="n">UE46</span><span class="o">.</span><span class="k">global</span><span class="o">.</span><span class="n">device_status</span><span class="p">:</span> <span class="n">installed</span>
<span class="nb">id</span><span class="o">-</span><span class="n">data</span><span class="o">.</span><span class="n">UE49</span><span class="o">.</span><span class="k">global</span><span class="o">.</span><span class="n">device_status</span><span class="p">:</span> <span class="n">installed</span>
<span class="nb">id</span><span class="o">-</span><span class="n">data</span><span class="o">.</span><span class="n">UE52</span><span class="o">.</span><span class="k">global</span><span class="o">.</span><span class="n">device_status</span><span class="p">:</span> <span class="n">installed</span>
<span class="nb">id</span><span class="o">-</span><span class="n">data</span><span class="o">.</span><span class="n">UE56</span><span class="o">/</span><span class="mf">1.</span><span class="k">global</span><span class="o">.</span><span class="n">device_status</span><span class="p">:</span> <span class="n">installed</span>
<span class="nb">id</span><span class="o">-</span><span class="n">data</span><span class="o">.</span><span class="n">UE56</span><span class="o">/</span><span class="mf">2.</span><span class="k">global</span><span class="o">.</span><span class="n">device_status</span><span class="p">:</span> <span class="n">installed</span>
<span class="nb">id</span><span class="o">-</span><span class="n">data</span><span class="o">.</span><span class="n">UE56R</span><span class="o">.</span><span class="k">global</span><span class="o">.</span><span class="n">device_status</span><span class="p">:</span> <span class="n">test</span>
<span class="nb">id</span><span class="o">-</span><span class="n">data</span><span class="o">.</span><span class="n">Ubonsai</span><span class="o">.</span><span class="k">global</span><span class="o">.</span><span class="n">device_status</span><span class="p">:</span> <span class="n">simulated</span>
</pre></div>
</div>
<p>Now we can edit this file with a text editor or any program. In this example we
want to change all parameters that have the value “test” to the value
“installed”. We do this with this perl one-liner:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">perl</span> <span class="o">-</span><span class="n">pi</span> <span class="o">-</span><span class="n">e</span> <span class="s1">&#39;s/: test/: installed/&#39;</span> <span class="n">PARAMS</span><span class="o">.</span><span class="n">TXT</span>
</pre></div>
</div>
<p>Now we want to merge these changes with the existing StructuredData file. We do
this with a single command line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SDpyshell</span> <span class="o">-</span><span class="n">c</span> <span class="s1">&#39;r(&quot;idcp_db.cache.SDCyml&quot;); r(&quot;PARAMS.TXT&quot;, &quot;store:flat&quot;); w(&quot;new.SDCyml&quot;)&#39;</span>
</pre></div>
</div>
<p>The “r” reads alls files “*.SDCyml” in the current directory. The “sread”
command reads the file “PARAMS.TXT”. It assumes a StructuredDataStore in YAML
and “flat” format. The data is merged with the StructuredData that was read
before. Already existing values are replaced with the new ones. The final
statement “w” writes the modified StructuredData to the file “new.SDCyml”.</p>
<p>We control the changes with “diff”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">diff</span> <span class="n">idcp_db</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">SDCyml</span> <span class="n">new</span><span class="o">.</span><span class="n">SDCyml</span>
<span class="mi">97</span><span class="n">c97</span>
<span class="o">&lt;</span>                 <span class="n">device_status</span><span class="p">:</span> <span class="n">test</span>
<span class="o">---</span>
<span class="o">&gt;</span>                 <span class="n">device_status</span><span class="p">:</span> <span class="n">installed</span>
<span class="mi">770</span><span class="n">c770</span>
<span class="o">&lt;</span>                 <span class="n">device_status</span><span class="p">:</span> <span class="n">test</span>
<span class="o">---</span>
<span class="o">&gt;</span>                 <span class="n">device_status</span><span class="p">:</span> <span class="n">installed</span>
<span class="mi">944</span><span class="n">c944</span>
<span class="o">&lt;</span>                 <span class="n">device_status</span><span class="p">:</span> <span class="n">test</span>
<span class="o">---</span>
<span class="o">&gt;</span>                 <span class="n">device_status</span><span class="p">:</span> <span class="n">installed</span>
<span class="mi">1260</span><span class="n">c1260</span>
<span class="o">&lt;</span>                 <span class="n">device_status</span><span class="p">:</span> <span class="n">test</span>
<span class="o">---</span>
<span class="o">&gt;</span>                 <span class="n">device_status</span><span class="p">:</span> <span class="n">installed</span>
<span class="mi">3131</span><span class="n">c3131</span>
<span class="o">&lt;</span>                 <span class="n">device_status</span><span class="p">:</span> <span class="n">test</span>
<span class="o">---</span>
<span class="o">&gt;</span>                 <span class="n">device_status</span><span class="p">:</span> <span class="n">installed</span>
<span class="mi">5702</span><span class="n">d5701</span>
<span class="o">&lt;</span>
</pre></div>
</div>
</div>
<div class="section" id="converting-a-python-structure-to-structureddata">
<h2>Converting a python structure to StructuredData<a class="headerlink" href="#converting-a-python-structure-to-structureddata" title="Permalink to this headline">¶</a></h2>
<p>Let’s assume that we have a file, pythonstruc.py with this content:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="s2">&quot;key1&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s2">&quot;key2&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span>
            <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="s2">&quot;y&quot;</span>
          <span class="p">},</span>
  <span class="s2">&quot;key3&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="p">{</span> <span class="s2">&quot;float&quot;</span><span class="p">:</span> <span class="mf">1.23</span> <span class="p">}]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>We convert this directly with a single SDpyshell command line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SDpyshell</span> <span class="o">-</span><span class="n">c</span> <span class="s1">&#39;r(&quot;pythonstruc.py&quot;, &quot;store:py&quot;); w(&quot;pythonstruc.SDCyml&quot;)&#39;</span>
</pre></div>
</div>
<p>The file pythonstruc.SDCyml now looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;**SDC-Metadata**&#39;</span><span class="p">:</span>
    <span class="n">version</span><span class="p">:</span> <span class="s1">&#39;1.0&#39;</span>
<span class="s1">&#39;**SDC-Store**&#39;</span><span class="p">:</span>
    <span class="n">key1</span><span class="p">:</span> <span class="mi">1</span>
    <span class="n">key2</span><span class="p">:</span>
        <span class="n">A</span><span class="p">:</span> <span class="n">x</span>
        <span class="n">B</span><span class="p">:</span> <span class="n">y</span>
    <span class="n">key3</span><span class="p">:</span>
    <span class="o">-</span> <span class="mi">1</span>
    <span class="o">-</span> <span class="mi">2</span>
    <span class="o">-</span> <span class="mi">3</span>
    <span class="o">-</span>   <span class="nb">float</span><span class="p">:</span> <span class="mf">1.23</span>
<span class="s1">&#39;**SDC-Types**&#39;</span><span class="p">:</span> <span class="p">{}</span>
</pre></div>
</div>
</div>
<div class="section" id="converting-a-perl-structure-to-structureddata">
<h2>Converting a perl structure to StructuredData<a class="headerlink" href="#converting-a-perl-structure-to-structureddata" title="Permalink to this headline">¶</a></h2>
<p>Let’s assume that we have a file, perlstruc.pl with this content:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">struc</span><span class="o">=</span> <span class="p">(</span> <span class="s2">&quot;key1&quot;</span><span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
          <span class="s2">&quot;key2&quot;</span><span class="o">=&gt;</span> <span class="p">{</span> <span class="s2">&quot;A&quot;</span><span class="o">=&gt;</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;B&quot;</span><span class="o">=&gt;</span> <span class="s2">&quot;y&quot;</span>
                   <span class="p">},</span>
          <span class="s2">&quot;key3&quot;</span><span class="o">=&gt;</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="p">{</span> <span class="s2">&quot;float&quot;</span><span class="o">=&gt;</span> <span class="mf">1.23</span> <span class="p">}]</span>
        <span class="p">);</span>
</pre></div>
</div>
<p>In order to convert this we first convert the perl structure to pure YAML
with this command line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">perl</span> <span class="o">-</span><span class="n">MYAML</span><span class="p">::</span><span class="n">XS</span> <span class="o">-</span><span class="n">e</span> <span class="s1">&#39;require &quot;perlstruc.pl&quot;;print Dump(\</span><span class="si">%s</span><span class="s1">truc);&#39;</span> <span class="o">&gt;</span> <span class="n">perlstruc</span><span class="o">.</span><span class="n">yml</span>
</pre></div>
</div>
<p>Now we create a StructuredData file like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SDpyshell</span> <span class="o">-</span><span class="n">c</span> <span class="s1">&#39;r(&quot;perlstruc.yml&quot;, &quot;store&quot;); w(&quot;perlstruc.SDCyml&quot;)&#39;</span>
</pre></div>
</div>
<p>The file perlstruc.SDCyml now looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;**SDC-Metadata**&#39;</span><span class="p">:</span>
    <span class="n">version</span><span class="p">:</span> <span class="s1">&#39;1.0&#39;</span>
<span class="s1">&#39;**SDC-Store**&#39;</span><span class="p">:</span>
    <span class="n">key1</span><span class="p">:</span> <span class="mi">1</span>
    <span class="n">key2</span><span class="p">:</span>
        <span class="n">A</span><span class="p">:</span> <span class="n">x</span>
        <span class="n">B</span><span class="p">:</span> <span class="n">y</span>
    <span class="n">key3</span><span class="p">:</span>
    <span class="o">-</span> <span class="mi">1</span>
    <span class="o">-</span> <span class="mi">2</span>
    <span class="o">-</span> <span class="mi">3</span>
    <span class="o">-</span>   <span class="nb">float</span><span class="p">:</span> <span class="mf">1.23</span>
<span class="s1">&#39;**SDC-Types**&#39;</span><span class="p">:</span> <span class="p">{}</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="SDxmlrpc.html" class="btn btn-neutral float-right" title="SDxmlrpc" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="SDpyshell.html" class="btn btn-neutral float-left" title="SDpyshell" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Helmholtz-Zentrum Berlin GmbH

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>