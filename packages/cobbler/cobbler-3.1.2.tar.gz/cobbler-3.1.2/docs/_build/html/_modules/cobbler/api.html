

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>cobbler.api &mdash; Cobbler 3.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Cobbler
          

          
          </a>

          
            
            
              <div class="version">
                3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart-guide.html">1. Quickstart Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation-guide.html">2. Install Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cobbler.html">3. Cobbler CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cobblerd.html">4. Cobbler Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cobbler-conf.html">5. Cobbler Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user-guide.html">6. User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer-guide.html">7. Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../code-autodoc/cobbler.html">8. Cobbler-Code Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release-notes.html">9. Release Notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Cobbler</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
      <li>cobbler.api</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for cobbler.api</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">past.builtins</span> <span class="k">import</span> <span class="nb">cmp</span>
<span class="kn">from</span> <span class="nn">future</span> <span class="k">import</span> <span class="n">standard_library</span>
<span class="n">standard_library</span><span class="o">.</span><span class="n">install_aliases</span><span class="p">()</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="k">import</span> <span class="nb">str</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="k">import</span> <span class="nb">object</span>
<span class="kn">from</span> <span class="nn">configparser</span> <span class="k">import</span> <span class="n">ConfigParser</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">tempfile</span>

<span class="kn">from</span> <span class="nn">cobbler.actions</span> <span class="k">import</span> <span class="n">status</span><span class="p">,</span> <span class="n">dlcontent</span><span class="p">,</span> <span class="n">hardlink</span><span class="p">,</span> <span class="n">sync</span><span class="p">,</span> <span class="n">buildiso</span><span class="p">,</span> <span class="n">replicate</span><span class="p">,</span> <span class="n">report</span><span class="p">,</span> <span class="n">log</span><span class="p">,</span> <span class="n">acl</span><span class="p">,</span> <span class="n">check</span><span class="p">,</span> <span class="n">reposync</span>
<span class="kn">from</span> <span class="nn">cobbler</span> <span class="k">import</span> <span class="n">autoinstall_manager</span>
<span class="kn">from</span> <span class="nn">cobbler</span> <span class="k">import</span> <span class="n">clogger</span>
<span class="kn">from</span> <span class="nn">cobbler.cobbler_collections</span> <span class="k">import</span> <span class="n">manager</span>
<span class="kn">from</span> <span class="nn">cobbler.items</span> <span class="k">import</span> <span class="n">package</span><span class="p">,</span> <span class="n">system</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">profile</span><span class="p">,</span> <span class="n">repo</span><span class="p">,</span> <span class="n">mgmtclass</span><span class="p">,</span> <span class="n">distro</span><span class="p">,</span> <span class="n">file</span>
<span class="kn">from</span> <span class="nn">cobbler</span> <span class="k">import</span> <span class="n">module_loader</span>
<span class="kn">from</span> <span class="nn">cobbler</span> <span class="k">import</span> <span class="n">power_manager</span>
<span class="kn">from</span> <span class="nn">cobbler</span> <span class="k">import</span> <span class="n">tftpgen</span>
<span class="kn">from</span> <span class="nn">cobbler</span> <span class="k">import</span> <span class="n">utils</span>
<span class="kn">from</span> <span class="nn">cobbler</span> <span class="k">import</span> <span class="n">yumgen</span>
<span class="kn">from</span> <span class="nn">cobbler</span> <span class="k">import</span> <span class="n">autoinstallgen</span>
<span class="kn">from</span> <span class="nn">cobbler</span> <span class="k">import</span> <span class="n">download_manager</span>
<span class="kn">from</span> <span class="nn">cobbler.cexceptions</span> <span class="k">import</span> <span class="n">CX</span>
<span class="kn">from</span> <span class="nn">cobbler.utils</span> <span class="k">import</span> <span class="n">_</span>


<span class="n">ERROR</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">INFO</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">DEBUG</span> <span class="o">=</span> <span class="mi">5</span>

<span class="c1"># FIXME: add --quiet depending on if not --verbose?</span>
<span class="n">RSYNC_CMD</span> <span class="o">=</span> <span class="s2">&quot;rsync -a </span><span class="si">%s</span><span class="s2"> &#39;</span><span class="si">%s</span><span class="s2">&#39; </span><span class="si">%s</span><span class="s2"> --progress&quot;</span>

<span class="c1"># notes on locking:</span>
<span class="c1"># CobblerAPI is a singleton object</span>
<span class="c1"># the XMLRPC variants allow 1 simultaneous request</span>
<span class="c1"># therefore we flock on /etc/cobbler/settings for now</span>
<span class="c1"># on a request by request basis.</span>


<div class="viewcode-block" id="CobblerAPI"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI">[docs]</a><span class="k">class</span> <span class="nc">CobblerAPI</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Python API module for Cobbler.</span>
<span class="sd">    See source for cobbler.py, or pydoc, for example usage.</span>
<span class="sd">    Cli apps and daemons should import api.py, and no other cobbler code.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">__shared_state</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">__has_loaded</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_cobblerd</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># FIXME: this should be switchable through some simple system</span>

        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span> <span class="o">=</span> <span class="n">CobblerAPI</span><span class="o">.</span><span class="n">__shared_state</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">perms_ok</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">CobblerAPI</span><span class="o">.</span><span class="n">__has_loaded</span><span class="p">:</span>

            <span class="c1"># NOTE: we do not log all API actions, because</span>
            <span class="c1"># a simple CLI invocation may call adds and such</span>
            <span class="c1"># to load the config, which would just fill up</span>
            <span class="c1"># the logs, so we&#39;ll do that logging at CLI</span>
            <span class="c1"># level (and remote.py web service level) instead.</span>

            <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">is_cobblerd</span> <span class="o">=</span> <span class="n">is_cobblerd</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">clogger</span><span class="o">.</span><span class="n">Logger</span><span class="p">()</span>
            <span class="k">except</span> <span class="n">CX</span><span class="p">:</span>
                <span class="c1"># return to CLI/other but perms are not valid</span>
                <span class="c1"># perms_ok is False</span>
                <span class="k">return</span>

            <span class="c1"># FIXME: conslidate into 1 server instance</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">selinux_enabled</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_selinux_enabled</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dist</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">os_version</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">os_release</span><span class="p">()</span>

            <span class="n">CobblerAPI</span><span class="o">.</span><span class="n">__has_loaded</span> <span class="o">=</span> <span class="kc">True</span>

            <span class="c1"># load the modules first, or nothing else works...</span>
            <span class="n">module_loader</span><span class="o">.</span><span class="n">load_modules</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">CollectionManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">()</span>

            <span class="c1"># import signatures</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">load_signatures</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">()</span><span class="o">.</span><span class="n">signature_path</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;Failed to load signatures from </span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">()</span><span class="o">.</span><span class="n">signature_path</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
                <span class="k">return</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2"> breeds and </span><span class="si">%d</span><span class="s2"> OS versions read from the signature file&quot;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">get_valid_breeds</span><span class="p">()),</span> <span class="nb">len</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">get_valid_os_versions</span><span class="p">()))</span>
            <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">authn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_module_from_file</span><span class="p">(</span>
                <span class="s2">&quot;authentication&quot;</span><span class="p">,</span>
                <span class="s2">&quot;module&quot;</span><span class="p">,</span>
                <span class="s2">&quot;authn_configfile&quot;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">authz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_module_from_file</span><span class="p">(</span>
                <span class="s2">&quot;authorization&quot;</span><span class="p">,</span>
                <span class="s2">&quot;module&quot;</span><span class="p">,</span>
                <span class="s2">&quot;authz_allowall&quot;</span>
            <span class="p">)</span>

            <span class="c1"># FIXME: pass more loggers around, and also see that those</span>
            <span class="c1"># using things via tasks construct their own yumgen/tftpgen</span>
            <span class="c1"># versus reusing this one, which has the wrong logger</span>
            <span class="c1"># (most likely) for background tasks.</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">autoinstallgen</span> <span class="o">=</span> <span class="n">autoinstallgen</span><span class="o">.</span><span class="n">AutoInstallationGen</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yumgen</span> <span class="o">=</span> <span class="n">yumgen</span><span class="o">.</span><span class="n">YumGen</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tftpgen</span> <span class="o">=</span> <span class="n">tftpgen</span><span class="o">.</span><span class="n">TFTPGen</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">power_mgr</span> <span class="o">=</span> <span class="n">power_manager</span><span class="o">.</span><span class="n">PowerManager</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;API handle initialized&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">perms_ok</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="c1"># ==========================================================</span>

<div class="viewcode-block" id="CobblerAPI.is_selinux_enabled"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.is_selinux_enabled">[docs]</a>    <span class="k">def</span> <span class="nf">is_selinux_enabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns whether selinux is enabled on the cobbler server.</span>
<span class="sd">        We check this just once at cobbler API init time, because</span>
<span class="sd">        a restart is required to change this; this does /not/ check</span>
<span class="sd">        enforce/permissive, nor does it need to.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">selinux_enabled</span></div>

<div class="viewcode-block" id="CobblerAPI.is_selinux_supported"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.is_selinux_supported">[docs]</a>    <span class="k">def</span> <span class="nf">is_selinux_supported</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns whether or not the OS is sufficient enough</span>
<span class="sd">        to run with SELinux enabled (currently EL 5 or later).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># FIXME: This detection is flawed. There is more than just Rhel with selinux and the original implemenation was</span>
        <span class="c1">#        too broad.</span>
        <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;red hat&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist</span> <span class="ow">or</span> <span class="s2">&quot;redhat&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">os_version</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="c1"># doesn&#39;t support public_content_t</span>
        <span class="k">return</span> <span class="kc">False</span></div>

    <span class="c1"># ==========================================================</span>

<div class="viewcode-block" id="CobblerAPI.last_modified_time"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.last_modified_time">[docs]</a>    <span class="k">def</span> <span class="nf">last_modified_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the time of the last modification to cobbler, made by any</span>
<span class="sd">        API instance, regardless of the serializer type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;/var/lib/cobbler/.mtime&quot;</span><span class="p">):</span>
            <span class="n">fd</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;/var/lib/cobbler/.mtime&quot;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
            <span class="n">fd</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
            <span class="n">fd</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">fd</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;/var/lib/cobbler/.mtime&quot;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">fd</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></div>

    <span class="c1"># ==========================================================</span>

<div class="viewcode-block" id="CobblerAPI.log"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.log">[docs]</a>    <span class="k">def</span> <span class="nf">log</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
            <span class="n">logger</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span>
        <span class="k">if</span> <span class="n">args</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">logger</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">msg</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">; </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">args</span><span class="p">)))</span></div>

    <span class="c1"># ==========================================================</span>

<div class="viewcode-block" id="CobblerAPI.version"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.version">[docs]</a>    <span class="k">def</span> <span class="nf">version</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extended</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        What version is cobbler?</span>

<span class="sd">        If extended == False, returns a float for backwards compatibility</span>

<span class="sd">        If extended == True, returns a dict:</span>

<span class="sd">            gitstamp      -- the last git commit hash</span>
<span class="sd">            gitdate       -- the last git commit date on the builder machine</span>
<span class="sd">            builddate     -- the time of the build</span>
<span class="sd">            version       -- something like &quot;1.3.2&quot;</span>
<span class="sd">            version_tuple -- something like [ 1, 3, 2 ]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">ConfigParser</span><span class="p">()</span>
        <span class="n">config</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;/etc/cobbler/version&quot;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;gitdate&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;cobbler&quot;</span><span class="p">,</span> <span class="s2">&quot;gitdate&quot;</span><span class="p">)</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;gitstamp&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;cobbler&quot;</span><span class="p">,</span> <span class="s2">&quot;gitstamp&quot;</span><span class="p">)</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;builddate&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;cobbler&quot;</span><span class="p">,</span> <span class="s2">&quot;builddate&quot;</span><span class="p">)</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;version&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;cobbler&quot;</span><span class="p">,</span> <span class="s2">&quot;version&quot;</span><span class="p">)</span>
        <span class="c1"># dont actually read the version_tuple from the version file</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;version_tuple&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;version&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">):</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;version_tuple&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">num</span><span class="p">))</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">extended</span><span class="p">:</span>
            <span class="c1"># for backwards compatibility and use with koan&#39;s comparisons</span>
            <span class="n">elems</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;version_tuple&quot;</span><span class="p">]</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">elems</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="nb">int</span><span class="p">(</span><span class="n">elems</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="mf">0.001</span> <span class="o">*</span> <span class="nb">int</span><span class="p">(</span><span class="n">elems</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">data</span></div>

    <span class="c1"># ==========================================================</span>

    <span class="k">def</span> <span class="nf">__cmp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">cmp</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<div class="viewcode-block" id="CobblerAPI.get_item"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.get_item">[docs]</a>    <span class="k">def</span> <span class="nf">get_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">what</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;get_item&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">what</span><span class="p">,</span> <span class="n">name</span><span class="p">],</span> <span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="o">.</span><span class="n">get_items</span><span class="p">(</span><span class="n">what</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;done with get_item&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">what</span><span class="p">,</span> <span class="n">name</span><span class="p">],</span> <span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">item</span>             <span class="c1"># self._collection_mgr.get_items(what).get(name)</span></div>

<div class="viewcode-block" id="CobblerAPI.get_items"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.get_items">[docs]</a>    <span class="k">def</span> <span class="nf">get_items</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">what</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;get_items&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">what</span><span class="p">],</span> <span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="o">.</span><span class="n">get_items</span><span class="p">(</span><span class="n">what</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;done with get_items&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">what</span><span class="p">],</span> <span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">items</span>            <span class="c1"># self._collection_mgr.get_items(what)</span></div>

<div class="viewcode-block" id="CobblerAPI.distros"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.distros">[docs]</a>    <span class="k">def</span> <span class="nf">distros</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the current list of distributions</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_items</span><span class="p">(</span><span class="s2">&quot;distro&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.profiles"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.profiles">[docs]</a>    <span class="k">def</span> <span class="nf">profiles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the current list of profiles</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_items</span><span class="p">(</span><span class="s2">&quot;profile&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.systems"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.systems">[docs]</a>    <span class="k">def</span> <span class="nf">systems</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the current list of systems</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_items</span><span class="p">(</span><span class="s2">&quot;system&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.repos"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.repos">[docs]</a>    <span class="k">def</span> <span class="nf">repos</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the current list of repos</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_items</span><span class="p">(</span><span class="s2">&quot;repo&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.images"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.images">[docs]</a>    <span class="k">def</span> <span class="nf">images</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the current list of images</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_items</span><span class="p">(</span><span class="s2">&quot;image&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.settings"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.settings">[docs]</a>    <span class="k">def</span> <span class="nf">settings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the application configuration</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="o">.</span><span class="n">settings</span><span class="p">()</span></div>

<div class="viewcode-block" id="CobblerAPI.mgmtclasses"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.mgmtclasses">[docs]</a>    <span class="k">def</span> <span class="nf">mgmtclasses</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the current list of mgmtclasses</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_items</span><span class="p">(</span><span class="s2">&quot;mgmtclass&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.packages"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.packages">[docs]</a>    <span class="k">def</span> <span class="nf">packages</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the current list of packages</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_items</span><span class="p">(</span><span class="s2">&quot;package&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.files"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.files">[docs]</a>    <span class="k">def</span> <span class="nf">files</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the current list of files</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_items</span><span class="p">(</span><span class="s2">&quot;file&quot;</span><span class="p">)</span></div>

    <span class="c1"># =======================================================================</span>

<div class="viewcode-block" id="CobblerAPI.copy_item"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.copy_item">[docs]</a>    <span class="k">def</span> <span class="nf">copy_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">what</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;copy_item(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="n">what</span><span class="p">,</span> <span class="p">[</span><span class="n">ref</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">newname</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_items</span><span class="p">(</span><span class="n">what</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.copy_distro"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.copy_distro">[docs]</a>    <span class="k">def</span> <span class="nf">copy_distro</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">copy_item</span><span class="p">(</span><span class="s2">&quot;distro&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.copy_profile"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.copy_profile">[docs]</a>    <span class="k">def</span> <span class="nf">copy_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">copy_item</span><span class="p">(</span><span class="s2">&quot;profile&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.copy_system"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.copy_system">[docs]</a>    <span class="k">def</span> <span class="nf">copy_system</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">copy_item</span><span class="p">(</span><span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.copy_repo"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.copy_repo">[docs]</a>    <span class="k">def</span> <span class="nf">copy_repo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">copy_item</span><span class="p">(</span><span class="s2">&quot;repo&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.copy_image"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.copy_image">[docs]</a>    <span class="k">def</span> <span class="nf">copy_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">copy_item</span><span class="p">(</span><span class="s2">&quot;image&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.copy_mgmtclass"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.copy_mgmtclass">[docs]</a>    <span class="k">def</span> <span class="nf">copy_mgmtclass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">copy_item</span><span class="p">(</span><span class="s2">&quot;mgmtclass&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.copy_package"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.copy_package">[docs]</a>    <span class="k">def</span> <span class="nf">copy_package</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">copy_item</span><span class="p">(</span><span class="s2">&quot;package&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.copy_file"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.copy_file">[docs]</a>    <span class="k">def</span> <span class="nf">copy_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">copy_item</span><span class="p">(</span><span class="s2">&quot;file&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></div>

    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.remove_item"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.remove_item">[docs]</a>    <span class="k">def</span> <span class="nf">remove_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">what</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">with_triggers</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">what</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">ref</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">what</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">return</span>      <span class="c1"># nothing to remove</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;remove_item(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="n">what</span><span class="p">,</span> <span class="p">[</span><span class="n">ref</span><span class="o">.</span><span class="n">name</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_items</span><span class="p">(</span><span class="n">what</span><span class="p">)</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">ref</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="n">recursive</span><span class="p">,</span> <span class="n">with_delete</span><span class="o">=</span><span class="n">delete</span><span class="p">,</span> <span class="n">with_triggers</span><span class="o">=</span><span class="n">with_triggers</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.remove_distro"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.remove_distro">[docs]</a>    <span class="k">def</span> <span class="nf">remove_distro</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">with_triggers</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_item</span><span class="p">(</span><span class="s2">&quot;distro&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="n">recursive</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="n">delete</span><span class="p">,</span> <span class="n">with_triggers</span><span class="o">=</span><span class="n">with_triggers</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.remove_profile"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.remove_profile">[docs]</a>    <span class="k">def</span> <span class="nf">remove_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">with_triggers</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_item</span><span class="p">(</span><span class="s2">&quot;profile&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="n">recursive</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="n">delete</span><span class="p">,</span> <span class="n">with_triggers</span><span class="o">=</span><span class="n">with_triggers</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.remove_system"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.remove_system">[docs]</a>    <span class="k">def</span> <span class="nf">remove_system</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">with_triggers</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_item</span><span class="p">(</span><span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="n">recursive</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="n">delete</span><span class="p">,</span> <span class="n">with_triggers</span><span class="o">=</span><span class="n">with_triggers</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.remove_repo"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.remove_repo">[docs]</a>    <span class="k">def</span> <span class="nf">remove_repo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">with_triggers</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_item</span><span class="p">(</span><span class="s2">&quot;repo&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="n">recursive</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="n">delete</span><span class="p">,</span> <span class="n">with_triggers</span><span class="o">=</span><span class="n">with_triggers</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.remove_image"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.remove_image">[docs]</a>    <span class="k">def</span> <span class="nf">remove_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">with_triggers</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_item</span><span class="p">(</span><span class="s2">&quot;image&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="n">recursive</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="n">delete</span><span class="p">,</span> <span class="n">with_triggers</span><span class="o">=</span><span class="n">with_triggers</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.remove_mgmtclass"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.remove_mgmtclass">[docs]</a>    <span class="k">def</span> <span class="nf">remove_mgmtclass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">with_triggers</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_item</span><span class="p">(</span><span class="s2">&quot;mgmtclass&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="n">recursive</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="n">delete</span><span class="p">,</span> <span class="n">with_triggers</span><span class="o">=</span><span class="n">with_triggers</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.remove_package"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.remove_package">[docs]</a>    <span class="k">def</span> <span class="nf">remove_package</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">with_triggers</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_item</span><span class="p">(</span><span class="s2">&quot;package&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="n">recursive</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="n">delete</span><span class="p">,</span> <span class="n">with_triggers</span><span class="o">=</span><span class="n">with_triggers</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.remove_file"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.remove_file">[docs]</a>    <span class="k">def</span> <span class="nf">remove_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">with_triggers</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_item</span><span class="p">(</span><span class="s2">&quot;file&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="n">recursive</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="n">delete</span><span class="p">,</span> <span class="n">with_triggers</span><span class="o">=</span><span class="n">with_triggers</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span></div>

    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.rename_item"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.rename_item">[docs]</a>    <span class="k">def</span> <span class="nf">rename_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">what</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;rename_item(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="n">what</span><span class="p">,</span> <span class="p">[</span><span class="n">ref</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">newname</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_items</span><span class="p">(</span><span class="n">what</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.rename_distro"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.rename_distro">[docs]</a>    <span class="k">def</span> <span class="nf">rename_distro</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rename_item</span><span class="p">(</span><span class="s2">&quot;distro&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.rename_profile"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.rename_profile">[docs]</a>    <span class="k">def</span> <span class="nf">rename_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rename_item</span><span class="p">(</span><span class="s2">&quot;profile&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.rename_system"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.rename_system">[docs]</a>    <span class="k">def</span> <span class="nf">rename_system</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rename_item</span><span class="p">(</span><span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.rename_repo"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.rename_repo">[docs]</a>    <span class="k">def</span> <span class="nf">rename_repo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rename_item</span><span class="p">(</span><span class="s2">&quot;repo&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.rename_image"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.rename_image">[docs]</a>    <span class="k">def</span> <span class="nf">rename_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rename_item</span><span class="p">(</span><span class="s2">&quot;image&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.rename_mgmtclass"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.rename_mgmtclass">[docs]</a>    <span class="k">def</span> <span class="nf">rename_mgmtclass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rename_item</span><span class="p">(</span><span class="s2">&quot;mgmtclass&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.rename_package"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.rename_package">[docs]</a>    <span class="k">def</span> <span class="nf">rename_package</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rename_item</span><span class="p">(</span><span class="s2">&quot;package&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.rename_file"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.rename_file">[docs]</a>    <span class="k">def</span> <span class="nf">rename_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rename_item</span><span class="p">(</span><span class="s2">&quot;file&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">newname</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span></div>

    <span class="c1"># ==========================================================================</span>

    <span class="c1"># FIXME: add a new_item method</span>

<div class="viewcode-block" id="CobblerAPI.new_distro"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.new_distro">[docs]</a>    <span class="k">def</span> <span class="nf">new_distro</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_subobject</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;new_distro&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">is_subobject</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">distro</span><span class="o">.</span><span class="n">Distro</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="p">,</span> <span class="n">is_subobject</span><span class="o">=</span><span class="n">is_subobject</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.new_profile"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.new_profile">[docs]</a>    <span class="k">def</span> <span class="nf">new_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_subobject</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;new_profile&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">is_subobject</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">profile</span><span class="o">.</span><span class="n">Profile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="p">,</span> <span class="n">is_subobject</span><span class="o">=</span><span class="n">is_subobject</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.new_system"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.new_system">[docs]</a>    <span class="k">def</span> <span class="nf">new_system</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_subobject</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;new_system&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">is_subobject</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">system</span><span class="o">.</span><span class="n">System</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="p">,</span> <span class="n">is_subobject</span><span class="o">=</span><span class="n">is_subobject</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.new_repo"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.new_repo">[docs]</a>    <span class="k">def</span> <span class="nf">new_repo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_subobject</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;new_repo&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">is_subobject</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">repo</span><span class="o">.</span><span class="n">Repo</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="p">,</span> <span class="n">is_subobject</span><span class="o">=</span><span class="n">is_subobject</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.new_image"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.new_image">[docs]</a>    <span class="k">def</span> <span class="nf">new_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_subobject</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;new_image&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">is_subobject</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="p">,</span> <span class="n">is_subobject</span><span class="o">=</span><span class="n">is_subobject</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.new_mgmtclass"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.new_mgmtclass">[docs]</a>    <span class="k">def</span> <span class="nf">new_mgmtclass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_subobject</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;new_mgmtclass&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">is_subobject</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">mgmtclass</span><span class="o">.</span><span class="n">Mgmtclass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="p">,</span> <span class="n">is_subobject</span><span class="o">=</span><span class="n">is_subobject</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.new_package"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.new_package">[docs]</a>    <span class="k">def</span> <span class="nf">new_package</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_subobject</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;new_package&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">is_subobject</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">package</span><span class="o">.</span><span class="n">Package</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="p">,</span> <span class="n">is_subobject</span><span class="o">=</span><span class="n">is_subobject</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.new_file"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.new_file">[docs]</a>    <span class="k">def</span> <span class="nf">new_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_subobject</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;new_file&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">is_subobject</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">file</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="p">,</span> <span class="n">is_subobject</span><span class="o">=</span><span class="n">is_subobject</span><span class="p">)</span></div>

    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.add_item"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.add_item">[docs]</a>    <span class="k">def</span> <span class="nf">add_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">what</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">check_for_duplicate_names</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;add_item(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="n">what</span><span class="p">,</span> <span class="p">[</span><span class="n">ref</span><span class="o">.</span><span class="n">name</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_items</span><span class="p">(</span><span class="n">what</span><span class="p">)</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">check_for_duplicate_names</span><span class="o">=</span><span class="n">check_for_duplicate_names</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="n">save</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.add_distro"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.add_distro">[docs]</a>    <span class="k">def</span> <span class="nf">add_distro</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">check_for_duplicate_names</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_item</span><span class="p">(</span><span class="s2">&quot;distro&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">check_for_duplicate_names</span><span class="o">=</span><span class="n">check_for_duplicate_names</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="n">save</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.add_profile"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.add_profile">[docs]</a>    <span class="k">def</span> <span class="nf">add_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">check_for_duplicate_names</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_item</span><span class="p">(</span><span class="s2">&quot;profile&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">check_for_duplicate_names</span><span class="o">=</span><span class="n">check_for_duplicate_names</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="n">save</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.add_system"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.add_system">[docs]</a>    <span class="k">def</span> <span class="nf">add_system</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">check_for_duplicate_names</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">check_for_duplicate_netinfo</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_item</span><span class="p">(</span><span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">check_for_duplicate_names</span><span class="o">=</span><span class="n">check_for_duplicate_names</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="n">save</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.add_repo"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.add_repo">[docs]</a>    <span class="k">def</span> <span class="nf">add_repo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">check_for_duplicate_names</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_item</span><span class="p">(</span><span class="s2">&quot;repo&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">check_for_duplicate_names</span><span class="o">=</span><span class="n">check_for_duplicate_names</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="n">save</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.add_image"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.add_image">[docs]</a>    <span class="k">def</span> <span class="nf">add_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">check_for_duplicate_names</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_item</span><span class="p">(</span><span class="s2">&quot;image&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">check_for_duplicate_names</span><span class="o">=</span><span class="n">check_for_duplicate_names</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="n">save</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.add_mgmtclass"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.add_mgmtclass">[docs]</a>    <span class="k">def</span> <span class="nf">add_mgmtclass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">check_for_duplicate_names</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_item</span><span class="p">(</span><span class="s2">&quot;mgmtclass&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">check_for_duplicate_names</span><span class="o">=</span><span class="n">check_for_duplicate_names</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="n">save</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.add_package"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.add_package">[docs]</a>    <span class="k">def</span> <span class="nf">add_package</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">check_for_duplicate_names</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_item</span><span class="p">(</span><span class="s2">&quot;package&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">check_for_duplicate_names</span><span class="o">=</span><span class="n">check_for_duplicate_names</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="n">save</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.add_file"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.add_file">[docs]</a>    <span class="k">def</span> <span class="nf">add_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">check_for_duplicate_names</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_item</span><span class="p">(</span><span class="s2">&quot;file&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">check_for_duplicate_names</span><span class="o">=</span><span class="n">check_for_duplicate_names</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="n">save</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span></div>

    <span class="c1"># ==========================================================================</span>

    <span class="c1"># FIXME: find_items should take all the arguments the other find</span>
    <span class="c1"># methods do.</span>

<div class="viewcode-block" id="CobblerAPI.find_items"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.find_items">[docs]</a>    <span class="k">def</span> <span class="nf">find_items</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">what</span><span class="p">,</span> <span class="n">criteria</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;find_items&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">what</span><span class="p">])</span>
        <span class="c1"># defaults</span>
        <span class="k">if</span> <span class="n">criteria</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">criteria</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="o">.</span><span class="n">get_items</span><span class="p">(</span><span class="n">what</span><span class="p">)</span>
        <span class="c1"># empty criteria returns everything</span>
        <span class="k">if</span> <span class="n">criteria</span> <span class="o">==</span> <span class="p">{}:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">items</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">items</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">return_list</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">no_errors</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">criteria</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span></div>

<div class="viewcode-block" id="CobblerAPI.find_distro"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.find_distro">[docs]</a>    <span class="k">def</span> <span class="nf">find_distro</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_list</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">no_errors</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="o">.</span><span class="n">distros</span><span class="p">()</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">return_list</span><span class="o">=</span><span class="n">return_list</span><span class="p">,</span> <span class="n">no_errors</span><span class="o">=</span><span class="n">no_errors</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.find_profile"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.find_profile">[docs]</a>    <span class="k">def</span> <span class="nf">find_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_list</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">no_errors</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="o">.</span><span class="n">profiles</span><span class="p">()</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">return_list</span><span class="o">=</span><span class="n">return_list</span><span class="p">,</span> <span class="n">no_errors</span><span class="o">=</span><span class="n">no_errors</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.find_system"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.find_system">[docs]</a>    <span class="k">def</span> <span class="nf">find_system</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_list</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">no_errors</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="o">.</span><span class="n">systems</span><span class="p">()</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">return_list</span><span class="o">=</span><span class="n">return_list</span><span class="p">,</span> <span class="n">no_errors</span><span class="o">=</span><span class="n">no_errors</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.find_repo"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.find_repo">[docs]</a>    <span class="k">def</span> <span class="nf">find_repo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_list</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">no_errors</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="o">.</span><span class="n">repos</span><span class="p">()</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">return_list</span><span class="o">=</span><span class="n">return_list</span><span class="p">,</span> <span class="n">no_errors</span><span class="o">=</span><span class="n">no_errors</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.find_image"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.find_image">[docs]</a>    <span class="k">def</span> <span class="nf">find_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_list</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">no_errors</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="o">.</span><span class="n">images</span><span class="p">()</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">return_list</span><span class="o">=</span><span class="n">return_list</span><span class="p">,</span> <span class="n">no_errors</span><span class="o">=</span><span class="n">no_errors</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.find_mgmtclass"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.find_mgmtclass">[docs]</a>    <span class="k">def</span> <span class="nf">find_mgmtclass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_list</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">no_errors</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="o">.</span><span class="n">mgmtclasses</span><span class="p">()</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">return_list</span><span class="o">=</span><span class="n">return_list</span><span class="p">,</span> <span class="n">no_errors</span><span class="o">=</span><span class="n">no_errors</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.find_package"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.find_package">[docs]</a>    <span class="k">def</span> <span class="nf">find_package</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_list</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">no_errors</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="o">.</span><span class="n">packages</span><span class="p">()</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">return_list</span><span class="o">=</span><span class="n">return_list</span><span class="p">,</span> <span class="n">no_errors</span><span class="o">=</span><span class="n">no_errors</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.find_file"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.find_file">[docs]</a>    <span class="k">def</span> <span class="nf">find_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_list</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">no_errors</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="o">.</span><span class="n">files</span><span class="p">()</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">return_list</span><span class="o">=</span><span class="n">return_list</span><span class="p">,</span> <span class="n">no_errors</span><span class="o">=</span><span class="n">no_errors</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">)</span></div>

    <span class="c1"># ==========================================================================</span>

    <span class="k">def</span> <span class="nf">__since</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mtime</span><span class="p">,</span> <span class="n">collector</span><span class="p">,</span> <span class="n">collapse</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Called by get_*_since functions.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">results1</span> <span class="o">=</span> <span class="n">collector</span><span class="p">()</span>
        <span class="n">results2</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">results1</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">mtime</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">x</span><span class="o">.</span><span class="n">mtime</span> <span class="o">&gt;=</span> <span class="n">mtime</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">collapse</span><span class="p">:</span>
                    <span class="n">results2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">results2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">results2</span>

<div class="viewcode-block" id="CobblerAPI.get_distros_since"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.get_distros_since">[docs]</a>    <span class="k">def</span> <span class="nf">get_distros_since</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mtime</span><span class="p">,</span> <span class="n">collapse</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns distros modified since a certain time (in seconds since Epoch)</span>
<span class="sd">        collapse=True specifies returning a dict instead of objects.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__since</span><span class="p">(</span><span class="n">mtime</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">distros</span><span class="p">,</span> <span class="n">collapse</span><span class="o">=</span><span class="n">collapse</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.get_profiles_since"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.get_profiles_since">[docs]</a>    <span class="k">def</span> <span class="nf">get_profiles_since</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mtime</span><span class="p">,</span> <span class="n">collapse</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__since</span><span class="p">(</span><span class="n">mtime</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">profiles</span><span class="p">,</span> <span class="n">collapse</span><span class="o">=</span><span class="n">collapse</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.get_systems_since"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.get_systems_since">[docs]</a>    <span class="k">def</span> <span class="nf">get_systems_since</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mtime</span><span class="p">,</span> <span class="n">collapse</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__since</span><span class="p">(</span><span class="n">mtime</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">systems</span><span class="p">,</span> <span class="n">collapse</span><span class="o">=</span><span class="n">collapse</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.get_repos_since"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.get_repos_since">[docs]</a>    <span class="k">def</span> <span class="nf">get_repos_since</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mtime</span><span class="p">,</span> <span class="n">collapse</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__since</span><span class="p">(</span><span class="n">mtime</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">repos</span><span class="p">,</span> <span class="n">collapse</span><span class="o">=</span><span class="n">collapse</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.get_images_since"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.get_images_since">[docs]</a>    <span class="k">def</span> <span class="nf">get_images_since</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mtime</span><span class="p">,</span> <span class="n">collapse</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__since</span><span class="p">(</span><span class="n">mtime</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">,</span> <span class="n">collapse</span><span class="o">=</span><span class="n">collapse</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.get_mgmtclasses_since"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.get_mgmtclasses_since">[docs]</a>    <span class="k">def</span> <span class="nf">get_mgmtclasses_since</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mtime</span><span class="p">,</span> <span class="n">collapse</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__since</span><span class="p">(</span><span class="n">mtime</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mgmtclasses</span><span class="p">,</span> <span class="n">collapse</span><span class="o">=</span><span class="n">collapse</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.get_packages_since"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.get_packages_since">[docs]</a>    <span class="k">def</span> <span class="nf">get_packages_since</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mtime</span><span class="p">,</span> <span class="n">collapse</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__since</span><span class="p">(</span><span class="n">mtime</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">packages</span><span class="p">,</span> <span class="n">collapse</span><span class="o">=</span><span class="n">collapse</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.get_files_since"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.get_files_since">[docs]</a>    <span class="k">def</span> <span class="nf">get_files_since</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mtime</span><span class="p">,</span> <span class="n">collapse</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__since</span><span class="p">(</span><span class="n">mtime</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">,</span> <span class="n">collapse</span><span class="o">=</span><span class="n">collapse</span><span class="p">)</span></div>

    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.get_signatures"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.get_signatures">[docs]</a>    <span class="k">def</span> <span class="nf">get_signatures</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">utils</span><span class="o">.</span><span class="n">SIGNATURE_CACHE</span></div>

<div class="viewcode-block" id="CobblerAPI.signature_update"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.signature_update">[docs]</a>    <span class="k">def</span> <span class="nf">signature_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">logger</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">()</span><span class="o">.</span><span class="n">signature_url</span>
            <span class="n">dlmgr</span> <span class="o">=</span> <span class="n">download_manager</span><span class="o">.</span><span class="n">DownloadManager</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="p">)</span>
            <span class="c1"># write temp json file</span>
            <span class="n">tmpfile</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">NamedTemporaryFile</span><span class="p">()</span>
            <span class="n">sigjson</span> <span class="o">=</span> <span class="n">dlmgr</span><span class="o">.</span><span class="n">urlread</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="n">tmpfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">sigjson</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
            <span class="n">tmpfile</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Successfully got file from </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">()</span><span class="o">.</span><span class="n">signature_url</span><span class="p">)</span>
            <span class="c1"># test the import without caching it</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">load_signatures</span><span class="p">(</span><span class="n">tmpfile</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">cache</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Downloaded signatures failed test load (tempfile = </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="n">tmpfile</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

            <span class="c1"># rewrite the real signature file and import it for real</span>
            <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">()</span><span class="o">.</span><span class="n">signature_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">sigjson</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

            <span class="n">utils</span><span class="o">.</span><span class="n">load_signatures</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">()</span><span class="o">.</span><span class="n">signature_path</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">log_exc</span><span class="p">(</span><span class="n">logger</span><span class="p">)</span></div>

    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.dump_vars"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.dump_vars">[docs]</a>    <span class="k">def</span> <span class="nf">dump_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">dump_vars</span><span class="p">(</span><span class="nb">format</span><span class="p">)</span></div>

    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.auto_add_repos"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.auto_add_repos">[docs]</a>    <span class="k">def</span> <span class="nf">auto_add_repos</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Import any repos this server knows about and mirror them.</span>
<span class="sd">        Credit: Seth Vidal.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;auto_add_repos&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">yum</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CX</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;yum is not installed&quot;</span><span class="p">))</span>

        <span class="n">version</span> <span class="o">=</span> <span class="n">yum</span><span class="o">.</span><span class="n">__version__</span>
        <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="o">=</span> <span class="n">version</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
        <span class="n">version</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="mi">1000</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">+</span> <span class="n">c</span>
        <span class="k">if</span> <span class="n">version</span> <span class="o">&lt;</span> <span class="mi">324</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CX</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;need yum &gt; 3.2.4 to proceed&quot;</span><span class="p">))</span>

        <span class="n">base</span> <span class="o">=</span> <span class="n">yum</span><span class="o">.</span><span class="n">YumBase</span><span class="p">()</span>
        <span class="n">base</span><span class="o">.</span><span class="n">doRepoSetup</span><span class="p">()</span>
        <span class="n">repositorys</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">repos</span><span class="o">.</span><span class="n">listEnabled</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">repositorys</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CX</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;no repos enabled/available -- giving up.&quot;</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">repository</span> <span class="ow">in</span> <span class="n">repositorys</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">repository</span><span class="o">.</span><span class="n">urls</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">cobbler_repo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new_repo</span><span class="p">()</span>
            <span class="n">auto_name</span> <span class="o">=</span> <span class="n">repository</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="c1"># FIXME: probably doesn&#39;t work for yum-rhn-plugin ATM</span>
            <span class="n">cobbler_repo</span><span class="o">.</span><span class="n">set_mirror</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="n">cobbler_repo</span><span class="o">.</span><span class="n">set_name</span><span class="p">(</span><span class="n">auto_name</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;auto adding: </span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">auto_name</span><span class="p">,</span> <span class="n">url</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="o">.</span><span class="n">repos</span><span class="p">()</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">cobbler_repo</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

        <span class="c1"># run cobbler reposync to apply changes</span>

    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.get_repo_config_for_profile"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.get_repo_config_for_profile">[docs]</a>    <span class="k">def</span> <span class="nf">get_repo_config_for_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">yumgen</span><span class="o">.</span><span class="n">get_yum_config</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.get_repo_config_for_system"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.get_repo_config_for_system">[docs]</a>    <span class="k">def</span> <span class="nf">get_repo_config_for_system</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">yumgen</span><span class="o">.</span><span class="n">get_yum_config</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span></div>

    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.get_template_file_for_profile"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.get_template_file_for_profile">[docs]</a>    <span class="k">def</span> <span class="nf">get_template_file_for_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="n">template_results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tftpgen</span><span class="o">.</span><span class="n">write_templates</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">template_results</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">template_results</span><span class="p">[</span><span class="n">path</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;# template path not found for specified profile&quot;</span></div>

<div class="viewcode-block" id="CobblerAPI.get_template_file_for_system"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.get_template_file_for_system">[docs]</a>    <span class="k">def</span> <span class="nf">get_template_file_for_system</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="n">template_results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tftpgen</span><span class="o">.</span><span class="n">write_templates</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">template_results</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">template_results</span><span class="p">[</span><span class="n">path</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;# template path not found for specified system&quot;</span></div>

    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.generate_gpxe"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.generate_gpxe">[docs]</a>    <span class="k">def</span> <span class="nf">generate_gpxe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">profile</span><span class="p">,</span> <span class="n">system</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;generate_gpxe&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">system</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tftpgen</span><span class="o">.</span><span class="n">generate_gpxe</span><span class="p">(</span><span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="n">system</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tftpgen</span><span class="o">.</span><span class="n">generate_gpxe</span><span class="p">(</span><span class="s2">&quot;profile&quot;</span><span class="p">,</span> <span class="n">profile</span><span class="p">)</span></div>

    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.generate_bootcfg"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.generate_bootcfg">[docs]</a>    <span class="k">def</span> <span class="nf">generate_bootcfg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">profile</span><span class="p">,</span> <span class="n">system</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;generate_bootcfg&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">system</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tftpgen</span><span class="o">.</span><span class="n">generate_bootcfg</span><span class="p">(</span><span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="n">system</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tftpgen</span><span class="o">.</span><span class="n">generate_bootcfg</span><span class="p">(</span><span class="s2">&quot;profile&quot;</span><span class="p">,</span> <span class="n">profile</span><span class="p">)</span></div>

    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.generate_script"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.generate_script">[docs]</a>    <span class="k">def</span> <span class="nf">generate_script</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">profile</span><span class="p">,</span> <span class="n">system</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;generate_script&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">system</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tftpgen</span><span class="o">.</span><span class="n">generate_script</span><span class="p">(</span><span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="n">system</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tftpgen</span><span class="o">.</span><span class="n">generate_script</span><span class="p">(</span><span class="s2">&quot;profile&quot;</span><span class="p">,</span> <span class="n">profile</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>

    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.check"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See if all preqs for network booting are valid.  This returns</span>
<span class="sd">        a list of strings containing instructions on things to correct.</span>
<span class="sd">        An empty list means there is nothing to correct, but that still</span>
<span class="sd">        doesn&#39;t mean there are configuration errors.  This is mainly useful</span>
<span class="sd">        for human admins, who may, for instance, forget to properly set up</span>
<span class="sd">        their TFTP servers for PXE, etc.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;check&quot;</span><span class="p">)</span>
        <span class="n">action_check</span> <span class="o">=</span> <span class="n">check</span><span class="o">.</span><span class="n">CobblerCheck</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">action_check</span><span class="o">.</span><span class="n">run</span><span class="p">()</span></div>

    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.dlcontent"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.dlcontent">[docs]</a>    <span class="k">def</span> <span class="nf">dlcontent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Downloads bootloader content that may not be avialable in packages</span>
<span class="sd">        for the given arch, ex: if installing on PPC, get syslinux. If installing</span>
<span class="sd">        on x86_64, get elilo, etc.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># FIXME: teach code that copies it to grab from the right place</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;dlcontent&quot;</span><span class="p">)</span>
        <span class="n">grabber</span> <span class="o">=</span> <span class="n">dlcontent</span><span class="o">.</span><span class="n">ContentDownloader</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">grabber</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">force</span><span class="p">)</span></div>

    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.validate_autoinstall_files"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.validate_autoinstall_files">[docs]</a>    <span class="k">def</span> <span class="nf">validate_autoinstall_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;validate_autoinstall_files&quot;</span><span class="p">)</span>
        <span class="n">autoinstall_mgr</span> <span class="o">=</span> <span class="n">autoinstall_manager</span><span class="o">.</span><span class="n">AutoInstallationManager</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="p">)</span>
        <span class="n">autoinstall_mgr</span><span class="o">.</span><span class="n">validate_autoinstall_files</span><span class="p">(</span><span class="n">logger</span><span class="p">)</span></div>

    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.sync"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.sync">[docs]</a>    <span class="k">def</span> <span class="nf">sync</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Take the values currently written to the configuration files in</span>
<span class="sd">        /etc, and /var, and build out the information tree found in</span>
<span class="sd">        /tftpboot.  Any operations done in the API that have not been</span>
<span class="sd">        saved with serialize() will NOT be synchronized with this command.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;sync&quot;</span><span class="p">)</span>
        <span class="n">sync</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_sync</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>
        <span class="n">sync</span><span class="o">.</span><span class="n">run</span><span class="p">()</span></div>

    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.sync_dhcp"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.sync_dhcp">[docs]</a>    <span class="k">def</span> <span class="nf">sync_dhcp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Only build out the DHCP configuration</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;sync_dhcp&quot;</span><span class="p">)</span>
        <span class="n">sync</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_sync</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>
        <span class="n">sync</span><span class="o">.</span><span class="n">sync_dhcp</span><span class="p">()</span></div>
    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.get_sync"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.get_sync">[docs]</a>    <span class="k">def</span> <span class="nf">get_sync</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dhcp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_module_from_file</span><span class="p">(</span>
            <span class="s2">&quot;dhcp&quot;</span><span class="p">,</span>
            <span class="s2">&quot;module&quot;</span><span class="p">,</span>
            <span class="s2">&quot;managers.isc&quot;</span>
        <span class="p">)</span><span class="o">.</span><span class="n">get_manager</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="p">,</span> <span class="n">logger</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_module_from_file</span><span class="p">(</span>
            <span class="s2">&quot;dns&quot;</span><span class="p">,</span>
            <span class="s2">&quot;module&quot;</span><span class="p">,</span>
            <span class="s2">&quot;managers.bind&quot;</span>
        <span class="p">)</span><span class="o">.</span><span class="n">get_manager</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="p">,</span> <span class="n">logger</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tftpd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_module_from_file</span><span class="p">(</span>
            <span class="s2">&quot;tftpd&quot;</span><span class="p">,</span>
            <span class="s2">&quot;module&quot;</span><span class="p">,</span>
            <span class="s2">&quot;managers.in_tftpd&quot;</span><span class="p">,</span>
        <span class="p">)</span><span class="o">.</span><span class="n">get_manager</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="p">,</span> <span class="n">logger</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">sync</span><span class="o">.</span><span class="n">CobblerSync</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="p">,</span> <span class="n">dhcp</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dhcp</span><span class="p">,</span> <span class="n">dns</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dns</span><span class="p">,</span> <span class="n">tftpd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tftpd</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span></div>

    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.reposync"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.reposync">[docs]</a>    <span class="k">def</span> <span class="nf">reposync</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tries</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">nofail</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Take the contents of /var/lib/cobbler/repos and update them --</span>
<span class="sd">        or create the initial copy if no contents exist yet.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;reposync&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">name</span><span class="p">])</span>
        <span class="n">action_reposync</span> <span class="o">=</span> <span class="n">reposync</span><span class="o">.</span><span class="n">RepoSync</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="p">,</span> <span class="n">tries</span><span class="o">=</span><span class="n">tries</span><span class="p">,</span> <span class="n">nofail</span><span class="o">=</span><span class="n">nofail</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>
        <span class="n">action_reposync</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></div>

    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.status"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.status">[docs]</a>    <span class="k">def</span> <span class="nf">status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">statusifier</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">CobblerStatusReport</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">statusifier</span><span class="o">.</span><span class="n">run</span><span class="p">()</span></div>

    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.import_tree"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.import_tree">[docs]</a>    <span class="k">def</span> <span class="nf">import_tree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mirror_url</span><span class="p">,</span> <span class="n">mirror_name</span><span class="p">,</span> <span class="n">network_root</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">autoinstall_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">rsync_flags</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">arch</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">breed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">os_version</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Automatically import a directory tree full of distribution files.</span>
<span class="sd">        mirror_url can be a string that represents a path, a user@host</span>
<span class="sd">        syntax for SSH, or an rsync:// address.  If mirror_url is a</span>
<span class="sd">        filesystem path and mirroring is not desired, set network_root</span>
<span class="sd">        to something like &quot;nfs://path/to/mirror_url/root&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;import_tree&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">mirror_url</span><span class="p">,</span> <span class="n">mirror_name</span><span class="p">,</span> <span class="n">network_root</span><span class="p">,</span> <span class="n">autoinstall_file</span><span class="p">,</span> <span class="n">rsync_flags</span><span class="p">])</span>

        <span class="c1"># both --path and --name are required arguments</span>
        <span class="k">if</span> <span class="n">mirror_url</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">mirror_url</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;import failed.  no --path specified&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">mirror_name</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">mirror_name</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;import failed.  no --name specified&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/distro_mirror/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">()</span><span class="o">.</span><span class="n">webdir</span><span class="p">,</span> <span class="n">mirror_name</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">arch</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">arch</span> <span class="o">=</span> <span class="n">arch</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">arch</span> <span class="o">==</span> <span class="s2">&quot;x86&quot;</span><span class="p">:</span>
                <span class="c1"># be consistent</span>
                <span class="n">arch</span> <span class="o">=</span> <span class="s2">&quot;i386&quot;</span>
            <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="n">arch</span><span class="p">:</span>
                <span class="n">path</span> <span class="o">+=</span> <span class="p">(</span><span class="s2">&quot;-</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">arch</span><span class="p">)</span>

        <span class="c1"># we need to mirror (copy) the files</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;importing from a network location, running rsync to fetch the files first&quot;</span><span class="p">)</span>

        <span class="n">utils</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

        <span class="c1"># prevent rsync from creating the directory name twice</span>
        <span class="c1"># if we are copying via rsync</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">mirror_url</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">):</span>
            <span class="n">mirror_url</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/&quot;</span> <span class="o">%</span> <span class="n">mirror_url</span>

        <span class="k">if</span> <span class="n">mirror_url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http://&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">mirror_url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;https://&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">mirror_url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;ftp://&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">mirror_url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;nfs://&quot;</span><span class="p">):</span>
            <span class="c1"># http mirrors are kind of primative.  rsync is better.</span>
            <span class="c1"># that&#39;s why this isn&#39;t documented in the manpage and we don&#39;t support them.</span>
            <span class="c1"># TODO: how about adding recursive FTP as an option?</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;unsupported protocol&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># good, we&#39;re going to use rsync..</span>
            <span class="c1"># we don&#39;t use SSH for public mirrors and local files.</span>
            <span class="c1"># presence of user@host syntax means use SSH</span>
            <span class="n">spacer</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">mirror_url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;rsync://&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">mirror_url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">):</span>
                <span class="n">spacer</span> <span class="o">=</span> <span class="s1">&#39; -e &quot;ssh&quot; &#39;</span>
            <span class="n">rsync_cmd</span> <span class="o">=</span> <span class="n">RSYNC_CMD</span>
            <span class="k">if</span> <span class="n">rsync_flags</span><span class="p">:</span>
                <span class="n">rsync_cmd</span> <span class="o">+=</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">rsync_flags</span>

            <span class="c1"># if --available-as was specified, limit the files we</span>
            <span class="c1"># pull down via rsync to just those that are critical</span>
            <span class="c1"># to detecting what the distro is</span>
            <span class="k">if</span> <span class="n">network_root</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">rsync_cmd</span> <span class="o">+=</span> <span class="s2">&quot; --include-from=/etc/cobbler/import_rsync_whitelist&quot;</span>

            <span class="c1"># kick off the rsync now</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">run_this</span><span class="p">(</span><span class="n">rsync_cmd</span><span class="p">,</span> <span class="p">(</span><span class="n">spacer</span><span class="p">,</span> <span class="n">mirror_url</span><span class="p">,</span> <span class="n">path</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">network_root</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># in addition to mirroring, we&#39;re going to assume the path is available</span>
            <span class="c1"># over http, ftp, and nfs, perhaps on an external filer.  scanning still requires</span>
            <span class="c1"># --mirror is a filesystem path, but --available-as marks the network path.</span>
            <span class="c1"># this allows users to point the path at a directory containing just the network</span>
            <span class="c1"># boot files while the rest of the distro files are available somewhere else.</span>

            <span class="c1"># find the filesystem part of the path, after the server bits, as each distro</span>
            <span class="c1"># URL needs to be calculated relative to this.</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">network_root</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">):</span>
                <span class="n">network_root</span> <span class="o">+=</span> <span class="s2">&quot;/&quot;</span>
            <span class="n">valid_roots</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;nfs://&quot;</span><span class="p">,</span> <span class="s2">&quot;ftp://&quot;</span><span class="p">,</span> <span class="s2">&quot;http://&quot;</span><span class="p">,</span> <span class="s2">&quot;https://&quot;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">valid_root</span> <span class="ow">in</span> <span class="n">valid_roots</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">network_root</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">valid_root</span><span class="p">):</span>
                    <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;Network root given to --available-as must be nfs://, ftp://, http://, or https://&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>

            <span class="k">if</span> <span class="n">network_root</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;nfs://&quot;</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">rest</span><span class="p">)</span> <span class="o">=</span> <span class="n">network_root</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;Network root given to --available-as is missing a colon, please see the manpage example.&quot;</span><span class="p">)</span>
                    <span class="k">return</span> <span class="kc">False</span>

        <span class="n">import_module</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_module_by_name</span><span class="p">(</span><span class="s2">&quot;managers.import_signatures&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_import_manager</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="p">,</span> <span class="n">logger</span><span class="p">)</span>
        <span class="n">import_module</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">mirror_name</span><span class="p">,</span> <span class="n">network_root</span><span class="p">,</span> <span class="n">autoinstall_file</span><span class="p">,</span> <span class="n">arch</span><span class="p">,</span> <span class="n">breed</span><span class="p">,</span> <span class="n">os_version</span><span class="p">)</span></div>

    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.acl_config"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.acl_config">[docs]</a>    <span class="k">def</span> <span class="nf">acl_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">adduser</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">addgroup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">removeuser</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">removegroup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Configures users/groups to run the cobbler CLI as non-root.</span>
<span class="sd">        Pass in only one option at a time.  Powers &quot;cobbler aclconfig&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">action_acl</span> <span class="o">=</span> <span class="n">acl</span><span class="o">.</span><span class="n">AclConfig</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="p">,</span> <span class="n">logger</span><span class="p">)</span>
        <span class="n">action_acl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
            <span class="n">adduser</span><span class="o">=</span><span class="n">adduser</span><span class="p">,</span>
            <span class="n">addgroup</span><span class="o">=</span><span class="n">addgroup</span><span class="p">,</span>
            <span class="n">removeuser</span><span class="o">=</span><span class="n">removeuser</span><span class="p">,</span>
            <span class="n">removegroup</span><span class="o">=</span><span class="n">removegroup</span>
        <span class="p">)</span></div>

    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.serialize"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.serialize">[docs]</a>    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Save the cobbler_collections to disk.</span>
<span class="sd">        Cobbler internal use only.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="o">.</span><span class="n">serialize</span><span class="p">()</span></div>

<div class="viewcode-block" id="CobblerAPI.deserialize"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.deserialize">[docs]</a>    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Load cobbler_collections from disk.</span>
<span class="sd">        Cobbler internal use only.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="o">.</span><span class="n">deserialize</span><span class="p">()</span></div>

    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.get_module_by_name"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.get_module_by_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_module_by_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">module_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a loaded cobbler module named &#39;name&#39;, if one exists, else None.</span>
<span class="sd">        Cobbler internal use only.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">module_loader</span><span class="o">.</span><span class="n">get_module_by_name</span><span class="p">(</span><span class="n">module_name</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.get_module_from_file"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.get_module_from_file">[docs]</a>    <span class="k">def</span> <span class="nf">get_module_from_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Looks in /etc/cobbler/modules.conf for a section called &#39;section&#39;</span>
<span class="sd">        and a key called &#39;name&#39;, and then returns the module that corresponds</span>
<span class="sd">        to the value of that key.</span>
<span class="sd">        Cobbler internal use only.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">module_loader</span><span class="o">.</span><span class="n">get_module_from_file</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">fallback</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.get_module_name_from_file"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.get_module_name_from_file">[docs]</a>    <span class="k">def</span> <span class="nf">get_module_name_from_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Looks up a module the same as get_module_from_file but returns</span>
<span class="sd">        the module name rather than the module itself</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">module_loader</span><span class="o">.</span><span class="n">get_module_name</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">fallback</span><span class="p">)</span></div>

<div class="viewcode-block" id="CobblerAPI.get_modules_in_category"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.get_modules_in_category">[docs]</a>    <span class="k">def</span> <span class="nf">get_modules_in_category</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">category</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all modules in a given category, for instance &quot;serializer&quot;, or &quot;cli&quot;.</span>
<span class="sd">        Cobbler internal use only.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">module_loader</span><span class="o">.</span><span class="n">get_modules_in_category</span><span class="p">(</span><span class="n">category</span><span class="p">)</span></div>

    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.authenticate"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.authenticate">[docs]</a>    <span class="k">def</span> <span class="nf">authenticate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        (Remote) access control.</span>
<span class="sd">        Cobbler internal use only.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authn</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;authenticate&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">user</span><span class="p">,</span> <span class="n">rc</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">rc</span></div>

<div class="viewcode-block" id="CobblerAPI.authorize"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.authorize">[docs]</a>    <span class="k">def</span> <span class="nf">authorize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">resource</span><span class="p">,</span> <span class="n">arg1</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">arg2</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        (Remote) access control.</span>
<span class="sd">        Cobbler internal use only.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authz</span><span class="o">.</span><span class="n">authorize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">resource</span><span class="p">,</span> <span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;authorize&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">user</span><span class="p">,</span> <span class="n">resource</span><span class="p">,</span> <span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">,</span> <span class="n">rc</span><span class="p">],</span> <span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rc</span></div>

    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.build_iso"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.build_iso">[docs]</a>    <span class="k">def</span> <span class="nf">build_iso</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iso</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                  <span class="n">profiles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">systems</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">buildisodir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">distro</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                  <span class="n">standalone</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">airgapped</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                  <span class="n">exclude_dns</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mkisofs_opts</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">builder</span> <span class="o">=</span> <span class="n">buildiso</span><span class="o">.</span><span class="n">BuildIso</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>
        <span class="n">builder</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
            <span class="n">iso</span><span class="o">=</span><span class="n">iso</span><span class="p">,</span>
            <span class="n">profiles</span><span class="o">=</span><span class="n">profiles</span><span class="p">,</span> <span class="n">systems</span><span class="o">=</span><span class="n">systems</span><span class="p">,</span>
            <span class="n">buildisodir</span><span class="o">=</span><span class="n">buildisodir</span><span class="p">,</span> <span class="n">distro</span><span class="o">=</span><span class="n">distro</span><span class="p">,</span>
            <span class="n">standalone</span><span class="o">=</span><span class="n">standalone</span><span class="p">,</span> <span class="n">airgapped</span><span class="o">=</span><span class="n">airgapped</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span>
            <span class="n">exclude_dns</span><span class="o">=</span><span class="n">exclude_dns</span><span class="p">,</span> <span class="n">mkisofs_opts</span><span class="o">=</span><span class="n">mkisofs_opts</span>
        <span class="p">)</span></div>

    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.hardlink"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.hardlink">[docs]</a>    <span class="k">def</span> <span class="nf">hardlink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">linker</span> <span class="o">=</span> <span class="n">hardlink</span><span class="o">.</span><span class="n">HardLinker</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">linker</span><span class="o">.</span><span class="n">run</span><span class="p">()</span></div>

    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.replicate"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.replicate">[docs]</a>    <span class="k">def</span> <span class="nf">replicate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cobbler_master</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="s2">&quot;80&quot;</span><span class="p">,</span> <span class="n">distro_patterns</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">profile_patterns</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">system_patterns</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">repo_patterns</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">image_patterns</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                  <span class="n">mgmtclass_patterns</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">package_patterns</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">file_patterns</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">prune</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">omit_data</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sync_all</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">use_ssl</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Pull down data/configs from a remote cobbler server that is a master to this server.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">replicator</span> <span class="o">=</span> <span class="n">replicate</span><span class="o">.</span><span class="n">Replicate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">replicator</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
            <span class="n">cobbler_master</span><span class="o">=</span><span class="n">cobbler_master</span><span class="p">,</span>
            <span class="n">port</span><span class="o">=</span><span class="n">port</span><span class="p">,</span>
            <span class="n">distro_patterns</span><span class="o">=</span><span class="n">distro_patterns</span><span class="p">,</span>
            <span class="n">profile_patterns</span><span class="o">=</span><span class="n">profile_patterns</span><span class="p">,</span>
            <span class="n">system_patterns</span><span class="o">=</span><span class="n">system_patterns</span><span class="p">,</span>
            <span class="n">repo_patterns</span><span class="o">=</span><span class="n">repo_patterns</span><span class="p">,</span>
            <span class="n">image_patterns</span><span class="o">=</span><span class="n">image_patterns</span><span class="p">,</span>
            <span class="n">mgmtclass_patterns</span><span class="o">=</span><span class="n">mgmtclass_patterns</span><span class="p">,</span>
            <span class="n">package_patterns</span><span class="o">=</span><span class="n">package_patterns</span><span class="p">,</span>
            <span class="n">file_patterns</span><span class="o">=</span><span class="n">file_patterns</span><span class="p">,</span>
            <span class="n">prune</span><span class="o">=</span><span class="n">prune</span><span class="p">,</span>
            <span class="n">omit_data</span><span class="o">=</span><span class="n">omit_data</span><span class="p">,</span>
            <span class="n">sync_all</span><span class="o">=</span><span class="n">sync_all</span><span class="p">,</span>
            <span class="n">use_ssl</span><span class="o">=</span><span class="n">use_ssl</span>
        <span class="p">)</span></div>

    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.report"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.report">[docs]</a>    <span class="k">def</span> <span class="nf">report</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">report_what</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">report_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">report_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">report_fields</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">report_noheaders</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Report functionality for cobbler</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">reporter</span> <span class="o">=</span> <span class="n">report</span><span class="o">.</span><span class="n">Report</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">reporter</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">report_what</span><span class="o">=</span><span class="n">report_what</span><span class="p">,</span> <span class="n">report_name</span><span class="o">=</span><span class="n">report_name</span><span class="p">,</span>
                            <span class="n">report_type</span><span class="o">=</span><span class="n">report_type</span><span class="p">,</span> <span class="n">report_fields</span><span class="o">=</span><span class="n">report_fields</span><span class="p">,</span>
                            <span class="n">report_noheaders</span><span class="o">=</span><span class="n">report_noheaders</span><span class="p">)</span></div>

    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.power_system"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.power_system">[docs]</a>    <span class="k">def</span> <span class="nf">power_system</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">system</span><span class="p">,</span> <span class="n">power_operation</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Power on / power off / get power status /reboot a system.</span>

<span class="sd">        @param str system Cobbler system</span>
<span class="sd">        @param str power_operation power operation. Valid values: on, off, reboot, status</span>
<span class="sd">        @param str token Cobbler authentication token</span>
<span class="sd">        @param str user power management user</span>
<span class="sd">        @param str password power management password</span>
<span class="sd">        @param Logger logger logger</span>
<span class="sd">        @return bool if operation was successful</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">power_operation</span> <span class="o">==</span> <span class="s2">&quot;on&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">power_mgr</span><span class="o">.</span><span class="n">power_on</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">power_operation</span> <span class="o">==</span> <span class="s2">&quot;off&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">power_mgr</span><span class="o">.</span><span class="n">power_off</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">power_operation</span> <span class="o">==</span> <span class="s2">&quot;status&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_mgr</span><span class="o">.</span><span class="n">get_power_status</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">power_operation</span> <span class="o">==</span> <span class="s2">&quot;reboot&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">power_mgr</span><span class="o">.</span><span class="n">reboot</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">die</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="p">,</span> <span class="s2">&quot;invalid power operation &#39;</span><span class="si">%s</span><span class="s2">&#39;, expected on/off/status/reboot&quot;</span> <span class="o">%</span> <span class="n">power_operation</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span></div>

    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="CobblerAPI.clear_logs"><a class="viewcode-back" href="../../code-autodoc/cobbler.html#cobbler.api.CobblerAPI.clear_logs">[docs]</a>    <span class="k">def</span> <span class="nf">clear_logs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">system</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clears console and anamon logs for system</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">LogTool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_collection_mgr</span><span class="p">,</span> <span class="n">system</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span></div></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Enno Gotthold

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>