from cvuts.image_loader import ImageLoader
from cvuts.vis_utils import vis_one_image_opencv
import cv2

def test_vis():
    import json
    imloader = ImageLoader('opencv', 'bgr')
    image = imloader.load('test.jpg')
    boxes = [[461,555,413,340]]
    segms = [[[753, 554, 732, 555, 724, 556, 718, 557, 713, 559, 709, 562, 706, 563, 703, 564, 699, 565, 693, 566, 684, 566, 674, 567, 672, 568, 667, 574, 666, 575, 665, 575, 663, 577, 658, 579, 656, 581, 655, 581, 654, 582, 654, 583, 650, 589, 648, 591, 644, 593, 640, 597, 639, 600, 638, 607, 637, 609, 632, 614, 629, 615, 627, 617, 626, 617, 625, 618, 625, 619, 623, 621, 622, 625, 621, 627, 612, 636, 610, 639, 607, 646, 603, 650, 598, 652, 594, 656, 592, 660, 589, 663, 584, 665, 581, 667, 574, 674, 572, 675, 566, 676, 549, 676, 541, 677, 537, 679, 535, 681, 532, 685, 529, 687, 527, 688, 523, 689, 519, 691, 513, 697, 511, 698, 505, 700, 497, 702, 495, 703, 487, 711, 485, 712, 481, 713, 478, 715, 475, 718, 470, 724, 467, 725, 465, 727, 464, 727, 463, 728, 462, 730, 461, 733, 461, 770, 462, 778, 463, 780, 464, 782, 472, 790, 473, 792, 474, 795, 475, 799, 475, 804, 478, 813, 479, 815, 489, 825, 490, 827, 491, 832, 494, 838, 503, 847, 506, 854, 509, 857, 512, 858, 515, 860, 519, 864, 525, 871, 528, 872, 531, 874, 533, 876, 538, 882, 545, 885, 549, 890, 551, 892, 553, 893, 555, 894, 559, 895, 587, 895, 592, 894, 596, 893, 600, 892, 608, 883, 612, 879, 613, 879, 625, 868, 631, 863, 635, 860, 639, 857, 643, 855, 647, 852, 652, 847, 655, 845, 660, 843, 664, 839, 666, 834, 667, 829, 668, 827, 673, 822, 676, 821, 680, 817, 685, 811, 688, 809, 690, 809, 692, 808, 696, 805, 700, 800, 702, 799, 704, 798, 709, 797, 714, 797, 719, 796, 721, 795, 729, 787, 731, 786, 733, 785, 745, 785, 750, 784, 752, 783, 759, 776, 762, 774, 768, 773, 777, 773, 779, 772, 781, 771, 790, 762, 795, 760, 801, 753, 803, 751, 806, 749, 811, 747, 813, 745, 816, 738, 819, 734, 820, 733, 825, 729, 826, 727, 827, 725, 828, 722, 829, 719, 830, 710, 831, 707, 832, 705, 835, 702, 842, 696, 843, 694, 844, 688, 844, 682, 845, 679, 847, 676, 855, 668, 856, 666, 858, 660, 860, 652, 863, 646, 866, 643, 867, 643, 869, 641, 871, 638, 872, 636, 873, 633, 873, 582, 872, 578, 871, 575, 870, 573, 866, 569, 856, 559, 853, 557, 851, 556, 846, 555, 838, 554]]]
    tags = ['781']
    image_show = vis_one_image_opencv(image,boxes,segms,tags,auto_color=True,segm_type='poly')
    cv2.imshow('image.jpg', image_show)
    cv2.waitKey()

if __name__=='__main__':
    test_vis()
