"use strict";define([],(function(){function onCachePutFail(e){console.error("cannot put to a cache: "+e)}function updateCache(instance){instance.cache&&instance.cache.put("data",new Response(JSON.stringify(instance.localData))).catch(onCachePutFail)}function onCacheOpened(result){this.cache=result,this.localData={}}return new function MyStore(){this.setItem=function(name,value){localStorage.setItem(name,value),this.localData&&this.localData[name]!==value&&(this.localData[name]=value,updateCache(this))},this.getItem=function(name){return localStorage.getItem(name)},this.removeItem=function(name){localStorage.removeItem(name),this.localData&&(delete this.localData[name],updateCache(this))};try{self.caches&&self.caches.open("embydata").then(onCacheOpened.bind(this))}catch(err){console.error("error opening cache: "+err)}}}));
//# sourceMappingURL=appStorage.js.map
