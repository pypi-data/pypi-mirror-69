{"version":3,"sources":["scripts/browser.js"],"names":["define","_supportsCssAnimation","_supportsCssAnimationWithPrefix","userAgent","navigator","matched","uaMatch","ua","toLowerCase","version","match","exec","indexOf","versionMatch","platform_match","browser","length","versionMajor","parseInt","split","isNaN","platform","chrome","msie","edge","opera","safari","ps4","tv","isMobile","terms","lower","i","mobile","xboxOne","animate","document","documentElement","tizen","self","web0s","edgeUwp","v","appVersion","tizenVersion","orsay","isTv","operaTv","isStyleSupported","prop","value","window","arguments","CSS","supports","supportsCSS","camel","replace","all","letter","toUpperCase","support","el","style","createElement","cssText","err","noFlex","slow","DocumentTouch","touch","keyboard","hasKeyboard","supportsCssAnimation","allowPrefix","animation","domPrefixes","pfx","elm","undefined","animationName","osx","iOS","ipad","iphone","ipod","iOSVersion","iOSversion","test","chromecast"],"mappings":"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","file":"browser.js","sourcesContent":["define([], function () {\n    'use strict';\n\n    function isTv() {\n\n        // This is going to be really difficult to get right\n        var userAgent = navigator.userAgent.toLowerCase();\n\n        if (userAgent.indexOf('tv') !== -1) {\n            return true;\n        }\n\n        if (userAgent.indexOf('samsungbrowser') !== -1) {\n            return true;\n        }\n\n        if (userAgent.indexOf('nintendo') !== -1) {\n            return true;\n        }\n\n        if (userAgent.indexOf('viera') !== -1) {\n            return true;\n        }\n\n        if (userAgent.indexOf('webos') !== -1) {\n            return true;\n        }\n\n        return false;\n    }\n\n    function isMobile(userAgent) {\n        var terms = [\n            'mobi',\n            'ipad',\n            'iphone',\n            'ipod',\n            'silk',\n            'gt-p1000',\n            'nexus 7',\n            'kindle fire',\n            'opera mini'\n        ];\n\n        var lower = userAgent.toLowerCase();\n\n        for (var i = 0, length = terms.length; i < length; i++) {\n            if (lower.indexOf(terms[i]) !== -1) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    function isStyleSupported(prop, value) {\n\n        if (typeof window === 'undefined') {\n            return false;\n        }\n\n        // If no value is supplied, use \"inherit\"\n        value = arguments.length === 2 ? value : 'inherit';\n        // Try the native standard method first\n        if ('CSS' in window && 'supports' in window.CSS) {\n            return window.CSS.supports(prop, value);\n        }\n        // Check Opera's native method\n        if ('supportsCSS' in window) {\n            return window.supportsCSS(prop, value);\n        }\n\n        // need try/catch because it's failing on tizen\n\n        try {\n            // Convert to camel-case for DOM interactions\n            var camel = prop.replace(/-([a-z]|[0-9])/ig, function (all, letter) {\n                return (letter + '').toUpperCase();\n            });\n            // Check if the property is supported\n            var support = (camel in el.style);\n            // Create test element\n            var el = document.createElement('div');\n            // Assign the property and value to invoke\n            // the CSS interpreter\n            el.style.cssText = prop + ':' + value;\n            // Ensure both the property and value are\n            // supported and return\n            return support && (el.style[camel] !== '');\n        } catch (err) {\n            return false;\n        }\n    }\n\n    function hasKeyboard(browser) {\n\n        if (browser.touch) {\n            return true;\n        }\n\n        if (browser.xboxOne) {\n            return true;\n        }\n\n        if (browser.ps4) {\n            return true;\n        }\n\n        if (browser.edgeUwp) {\n            // This is OK for now, but this won't always be true\n            // Should we use this?\n            // https://gist.github.com/wagonli/40d8a31bd0d6f0dd7a5d\n            return true;\n        }\n\n        if (browser.tv) {\n            return true;\n        }\n\n        return false;\n    }\n\n    function iOSversion() {\n        // MacIntel: Apple iPad Pro 11 iOS 13.1\n        if (/iP(hone|od|ad)|MacIntel/.test(navigator.platform)) {\n            // supports iOS 2.0 and later: <http://bit.ly/TJjs1V>\n            var v = (navigator.appVersion).match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n            return [parseInt(v[1], 10), parseInt(v[2], 10), parseInt(v[3] || 0, 10)];\n        }\n    }\n\n    var _supportsCssAnimation;\n    var _supportsCssAnimationWithPrefix;\n    function supportsCssAnimation(allowPrefix) {\n\n        if (allowPrefix) {\n            if (_supportsCssAnimationWithPrefix === true || _supportsCssAnimationWithPrefix === false) {\n                return _supportsCssAnimationWithPrefix;\n            }\n        } else {\n            if (_supportsCssAnimation === true || _supportsCssAnimation === false) {\n                return _supportsCssAnimation;\n            }\n        }\n\n        var animation = false;\n        var animationstring = 'animation';\n        var keyframeprefix = '';\n        var domPrefixes = ['Webkit', 'O', 'Moz'];\n        var pfx = '';\n        var elm = document.createElement('div');\n\n        if (elm.style.animationName !== undefined) {\n            animation = true;\n        }\n\n        if (animation === false && allowPrefix) {\n            for (var i = 0; i < domPrefixes.length; i++) {\n                if (elm.style[domPrefixes[i] + 'AnimationName'] !== undefined) {\n                    pfx = domPrefixes[i];\n                    animationstring = pfx + 'Animation';\n                    keyframeprefix = '-' + pfx.toLowerCase() + '-';\n                    animation = true;\n                    break;\n                }\n            }\n        }\n\n        if (allowPrefix) {\n            _supportsCssAnimationWithPrefix = animation;\n            return _supportsCssAnimationWithPrefix;\n        } else {\n            _supportsCssAnimation = animation;\n            return _supportsCssAnimation;\n        }\n    }\n\n    var uaMatch = function (ua) {\n        ua = ua.toLowerCase();\n\n        var match = /(edge)[ \\/]([\\w.]+)/.exec(ua) ||\n            /(opera)[ \\/]([\\w.]+)/.exec(ua) ||\n            /(opr)[ \\/]([\\w.]+)/.exec(ua) ||\n            /(chrome)[ \\/]([\\w.]+)/.exec(ua) ||\n            /(safari)[ \\/]([\\w.]+)/.exec(ua) ||\n            /(firefox)[ \\/]([\\w.]+)/.exec(ua) ||\n            /(msie) ([\\w.]+)/.exec(ua) ||\n            ua.indexOf(\"compatible\") < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(ua) ||\n            [];\n\n        var versionMatch = /(version)[ \\/]([\\w.]+)/.exec(ua);\n\n        var platform_match = /(ipad)/.exec(ua) ||\n            /(iphone)/.exec(ua) ||\n            /(windows)/.exec(ua) ||\n            /(android)/.exec(ua) ||\n            [];\n\n        var browser = match[1] || \"\";\n\n        if (browser === \"edge\") {\n            platform_match = [\"\"];\n        } else {\n            if (ua.indexOf(\"windows phone\") !== -1 || ua.indexOf(\"iemobile\") !== -1) {\n\n                // http://www.neowin.net/news/ie11-fakes-user-agent-to-fool-gmail-in-windows-phone-81-gdr1-update\n                browser = \"msie\";\n            } else if (ua.indexOf(\"like gecko\") !== -1 && ua.indexOf('webkit') === -1 && ua.indexOf('opera') === -1 && ua.indexOf('chrome') === -1 && ua.indexOf('safari') === -1) {\n                browser = \"msie\";\n            }\n        }\n\n        if (browser === 'opr') {\n            browser = 'opera';\n        }\n\n        var version;\n        if (versionMatch && versionMatch.length > 2) {\n            version = versionMatch[2];\n        }\n\n        version = version || match[2] || \"0\";\n\n        var versionMajor = parseInt(version.split('.')[0]);\n\n        if (isNaN(versionMajor)) {\n            versionMajor = 0;\n        }\n\n        return {\n            browser: browser,\n            version: version,\n            platform: platform_match[0] || \"\",\n            versionMajor: versionMajor\n        };\n    };\n\n    var userAgent = navigator.userAgent;\n\n    var matched = uaMatch(userAgent);\n    var browser = {};\n\n    if (matched.browser) {\n        browser[matched.browser] = true;\n        browser.version = matched.version;\n        browser.versionMajor = matched.versionMajor;\n    }\n\n    if (matched.platform) {\n        browser[matched.platform] = true;\n    }\n\n    if (!browser.chrome && !browser.msie && !browser.edge && !browser.opera && userAgent.toLowerCase().indexOf(\"webkit\") !== -1) {\n        browser.safari = true;\n    }\n\n    if (userAgent.toLowerCase().indexOf(\"playstation 4\") !== -1) {\n        browser.ps4 = true;\n        browser.tv = true;\n    }\n\n    if (isMobile(userAgent)) {\n        browser.mobile = true;\n    }\n\n    browser.xboxOne = userAgent.toLowerCase().indexOf('xbox') !== -1;\n    browser.animate = typeof document !== 'undefined' && document.documentElement.animate != null;\n    browser.tizen = userAgent.toLowerCase().indexOf('tizen') !== -1 || self.tizen != null;\n    browser.web0s = userAgent.toLowerCase().indexOf('Web0S'.toLowerCase()) !== -1;\n    browser.edgeUwp = browser.edge && (userAgent.toLowerCase().indexOf('msapphost') !== -1 || userAgent.toLowerCase().indexOf('webview') !== -1);\n\n    if (!browser.tizen) {\n        browser.orsay = userAgent.toLowerCase().indexOf('smarthub') !== -1;\n    } else {\n        var v = (navigator.appVersion).match(/Tizen (\\d+).(\\d+)/);\n        browser.tizenVersion = parseInt(v[1]);\n    }\n\n    if (browser.edgeUwp) {\n        browser.edge = true;\n    }\n\n    browser.tv = isTv();\n    browser.operaTv = browser.tv && userAgent.toLowerCase().indexOf('opr/') !== -1;\n\n    if (!isStyleSupported('display', 'flex')) {\n        browser.noFlex = true;\n    }\n\n    if (browser.mobile || browser.tv) {\n        browser.slow = true;\n    }\n\n    if (typeof document !== 'undefined') {\n        if (('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch) {\n            browser.touch = true;\n        }\n    }\n\n    browser.keyboard = hasKeyboard(browser);\n    browser.supportsCssAnimation = supportsCssAnimation;\n\n    browser.osx = userAgent.toLowerCase().indexOf('os x') !== -1;\n    browser.iOS = browser.ipad || browser.iphone || browser.ipod;\n\n    if (browser.iOS) {\n        browser.iOSVersion = iOSversion();\n\n        if (browser.iOSVersion && browser.iOSVersion.length >= 2) {\n            browser.iOSVersion = browser.iOSVersion[0] + (browser.iOSVersion[1] / 10);\n        }\n    }\n\n    browser.chromecast = browser.chrome && userAgent.toLowerCase().indexOf('crkey') !== -1;\n\n    return browser;\n});\n"]}