{"version":3,"sources":["components/playmenu.js"],"names":["define","actionsheet","datetime","playbackManager","globalize","appSettings","show","options","item","itemType","Type","isFolder","IsFolder","itemId","Id","channelId","ChannelId","serverId","ServerId","resumePositionTicks","UserData","PlaybackPositionTicks","playableItemId","menuItems","push","name","translate","getDisplayRunningTime","id","items","positionTo","then","play","ids","startPositionTicks","queue","shuffle"],"mappings":"AAAA,aAAAA,OAAO,CAAC,cAAe,WAAY,kBAAmB,YAAa,gBAAgB,SAAUC,YAAaC,SAAUC,gBAAiBC,UAAWC,aAuE5I,MAAO,CACHC,KArEJ,SAASA,KAAKC,SAEV,IAAIC,KAAOD,QAAQC,KAEfC,SAAWD,KAAKE,KAChBC,SAAWH,KAAKI,SAChBC,OAASL,KAAKM,GACdC,UAAYP,KAAKQ,UACjBC,SAAWT,KAAKU,SAChBC,oBAAsBX,KAAKY,SAAWZ,KAAKY,SAASC,sBAAwB,KAE5EC,eAA8B,YAAbb,SAAyBM,UAAYF,OAE1D,GAAKM,sBAAuBR,SAA5B,CAQA,IAAIY,UAAY,GAEhBA,UAAUC,KAAK,CACXC,KAAMrB,UAAUsB,UAAU,WAAYxB,SAASyB,sBAAsBR,sBACrES,GAAI,WAGRL,UAAUC,KAAK,CACXC,KAAMrB,UAAUsB,UAAU,qBAC1BE,GAAI,SAGR3B,YAAYK,KAAK,CAEbuB,MAAON,UACPO,WAAYvB,QAAQuB,aAErBC,MAAK,SAAUH,IACd,OAAQA,IAEJ,IAAK,OACDzB,gBAAgB6B,KAAK,CACjBC,IAAK,CAACX,gBACNL,SAAUA,WAEd,MACJ,IAAK,SACDd,gBAAgB6B,KAAK,CACjBC,IAAK,CAACX,gBACNY,mBAAoBf,oBACpBF,SAAUA,WAEd,MACJ,IAAK,QACDd,gBAAgBgC,MAAM,CAClBN,MAAO,CAACrB,QAEZ,MACJ,IAAK,UACDL,gBAAgBiC,QAAQ5B,eA9ChCL,gBAAgB6B,KAAK,CACjBC,IAAK,CAACX,gBACNL,SAAUA","file":"playmenu.js","sourcesContent":["define(['actionsheet', 'datetime', 'playbackManager', 'globalize', 'appSettings'], function (actionsheet, datetime, playbackManager, globalize, appSettings) {\n    'use strict';\n\n    function show(options) {\n\n        var item = options.item;\n\n        var itemType = item.Type;\n        var isFolder = item.IsFolder;\n        var itemId = item.Id;\n        var channelId = item.ChannelId;\n        var serverId = item.ServerId;\n        var resumePositionTicks = item.UserData ? item.UserData.PlaybackPositionTicks : null;\n\n        var playableItemId = itemType === 'Program' ? channelId : itemId;\n\n        if (!resumePositionTicks || isFolder) {\n            playbackManager.play({\n                ids: [playableItemId],\n                serverId: serverId\n            });\n            return;\n        }\n\n        var menuItems = [];\n\n        menuItems.push({\n            name: globalize.translate('ResumeAt', datetime.getDisplayRunningTime(resumePositionTicks)),\n            id: 'resume'\n        });\n\n        menuItems.push({\n            name: globalize.translate('PlayFromBeginning'),\n            id: 'play'\n        });\n\n        actionsheet.show({\n\n            items: menuItems,\n            positionTo: options.positionTo\n\n        }).then(function (id) {\n            switch (id) {\n\n                case 'play':\n                    playbackManager.play({\n                        ids: [playableItemId],\n                        serverId: serverId\n                    });\n                    break;\n                case 'resume':\n                    playbackManager.play({\n                        ids: [playableItemId],\n                        startPositionTicks: resumePositionTicks,\n                        serverId: serverId\n                    });\n                    break;\n                case 'queue':\n                    playbackManager.queue({\n                        items: [item]\n                    });\n                    break;\n                case 'shuffle':\n                    playbackManager.shuffle(item);\n                    break;\n                default:\n                    break;\n            }\n        });\n    }\n\n    return {\n        show: show\n    };\n});\n"]}