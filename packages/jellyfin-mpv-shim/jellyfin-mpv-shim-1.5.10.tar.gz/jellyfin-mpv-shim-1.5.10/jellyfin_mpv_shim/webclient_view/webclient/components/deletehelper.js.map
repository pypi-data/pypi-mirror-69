{"version":3,"sources":["components/deletehelper.js"],"names":["define","connectionManager","confirm","appRouter","globalize","deleteItem","options","item","itemId","Id","parentId","SeasonId","SeriesId","ParentId","serverId","ServerId","msg","translate","title","apiClient","getApiClient","text","confirmText","primary","then","navigate","showItem","goHome","err","result","Promise","reject","alertText","resolve","require","alert"],"mappings":"AAAA,aAAAA,OAAO,CAAC,oBAAqB,UAAW,YAAa,cAAc,SAAUC,kBAAmBC,QAASC,UAAWC,WAqDhH,MAAO,CACHC,WAzCJ,SAASA,WAAWC,SAEhB,IAAIC,KAAOD,QAAQC,KACfC,OAASD,KAAKE,GACdC,SAAWH,KAAKI,UAAYJ,KAAKK,UAAYL,KAAKM,SAClDC,SAAWP,KAAKQ,SAEhBC,IAAMZ,UAAUa,UAAU,qBAC1BC,MAAQd,UAAUa,UAAU,oBAC5BE,UAAYlB,kBAAkBmB,aAAab,KAAKQ,UAEpD,OAAOb,QAAQ,CAEXgB,MAAOA,MACPG,KAAML,IACNM,YAAalB,UAAUa,UAAU,UACjCM,QAAS,WAEVC,MAAK,WAEJ,OAAOL,UAAUd,WAAWG,QAAQgB,MAAK,WAEjClB,QAAQmB,WACJf,SACAP,UAAUuB,SAAShB,SAAUI,UAE7BX,UAAUwB,aAGnB,SAAUC,KAET,IAAIC,OAAS,SAATA,SACA,OAAOC,QAAQC,OAAOH,MAG1B,OA7CZ,SAASI,UAAU1B,SAEf,OAAO,IAAIwB,SAAQ,SAAUG,QAASF,QAElCG,QAAQ,CAAC,UAAU,SAAUC,OACzBA,MAAM7B,SAASkB,KAAKS,QAASA,eAwCtBD,CAAU5B,UAAUa,UAAU,sBAAsBO,KAAKK,OAAQA","file":"deletehelper.js","sourcesContent":["define(['connectionManager', 'confirm', 'appRouter', 'globalize'], function (connectionManager, confirm, appRouter, globalize) {\n    'use strict';\n\n    function alertText(options) {\n\n        return new Promise(function (resolve, reject) {\n\n            require(['alert'], function (alert) {\n                alert(options).then(resolve, resolve);\n            });\n        });\n    }\n\n    function deleteItem(options) {\n\n        var item = options.item;\n        var itemId = item.Id;\n        var parentId = item.SeasonId || item.SeriesId || item.ParentId;\n        var serverId = item.ServerId;\n\n        var msg = globalize.translate('ConfirmDeleteItem');\n        var title = globalize.translate('HeaderDeleteItem');\n        var apiClient = connectionManager.getApiClient(item.ServerId);\n\n        return confirm({\n\n            title: title,\n            text: msg,\n            confirmText: globalize.translate('Delete'),\n            primary: 'delete'\n\n        }).then(function () {\n\n            return apiClient.deleteItem(itemId).then(function () {\n\n                if (options.navigate) {\n                    if (parentId) {\n                        appRouter.showItem(parentId, serverId);\n                    } else {\n                        appRouter.goHome();\n                    }\n                }\n            }, function (err) {\n\n                var result = function () {\n                    return Promise.reject(err);\n                };\n\n                return alertText(globalize.translate('ErrorDeletingItem')).then(result, result);\n            });\n        });\n    }\n\n    return {\n        deleteItem: deleteItem\n    };\n});\n"]}