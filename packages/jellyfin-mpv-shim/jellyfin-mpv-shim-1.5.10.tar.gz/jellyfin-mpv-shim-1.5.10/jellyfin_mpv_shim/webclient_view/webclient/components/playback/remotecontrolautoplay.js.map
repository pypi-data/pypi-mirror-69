{"version":3,"sources":["components/playback/remotecontrolautoplay.js"],"names":["define","events","playbackManager","on","e","newPlayer","newTarget","oldPlayer","isLocalPlayer","console","debug","transferPlayback","state","getPlayerState","item","NowPlayingItem","resumePositionTicks","PlayState","PositionTicks","stop","then","play","ids","Id","serverId","ServerId","startPositionTicks"],"mappings":"AAAA,aAAAA,OAAO,CAAC,SAAU,oBAAoB,SAAUC,OAAQC,iBA2BpDD,OAAOE,GAAGD,gBAAiB,gBAAgB,SAAUE,EAAGC,UAAWC,UAAWC,WAErEA,WAAcF,YAIdE,UAAUC,cAKXH,UAAUG,cACVC,QAAQC,MAAM,wEApCtB,SAASC,iBAAiBJ,UAAWF,WAEjC,IAAIO,MAAQV,gBAAgBW,eAAeN,WAEvCO,KAAOF,MAAMG,eAEjB,GAAKD,KAAL,CAIA,IACIE,qBADYJ,MAAMK,WAAa,IACCC,eAAiB,EAErDhB,gBAAgBiB,KAAKZ,WAAWa,MAAK,WAEjClB,gBAAgBmB,KAAK,CACjBC,IAAK,CAACR,KAAKS,IACXC,SAAUV,KAAKW,SACfC,mBAAoBV,qBAErBX,eAoBPM,CAAiBJ,UAAWF,WATxBI,QAAQC,MAAM","file":"remotecontrolautoplay.js","sourcesContent":["define(['events', 'playbackManager'], function (events, playbackManager) {\n    'use strict';\n\n    function transferPlayback(oldPlayer, newPlayer) {\n\n        var state = playbackManager.getPlayerState(oldPlayer);\n\n        var item = state.NowPlayingItem;\n\n        if (!item) {\n            return;\n        }\n\n        var playState = state.PlayState || {};\n        var resumePositionTicks = playState.PositionTicks || 0;\n\n        playbackManager.stop(oldPlayer).then(function () {\n\n            playbackManager.play({\n                ids: [item.Id],\n                serverId: item.ServerId,\n                startPositionTicks: resumePositionTicks\n\n            }, newPlayer);\n        });\n    }\n\n    events.on(playbackManager, 'playerchange', function (e, newPlayer, newTarget, oldPlayer) {\n\n        if (!oldPlayer || !newPlayer) {\n            return;\n        }\n\n        if (!oldPlayer.isLocalPlayer) {\n            console.debug('Skipping remote control autoplay because oldPlayer is not a local player');\n            return;\n        }\n\n        if (newPlayer.isLocalPlayer) {\n            console.debug('Skipping remote control autoplay because newPlayer is a local player');\n            return;\n        }\n\n        transferPlayback(oldPlayer, newPlayer);\n    });\n\n});\n"]}