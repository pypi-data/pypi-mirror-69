{"version":3,"sources":["components/libraryoptionseditor/libraryoptionseditor.js"],"names":["define","globalize","dom","populateLanguages","parent","ApiClient","getCultures","then","languages","populateLanguagesIntoSelect","select","html","i","length","culture","TwoLetterISOLanguageName","DisplayName","innerHTML","querySelector","populateLanguagesIntoList","element","ThreeLetterISOLanguageName","toLowerCase","renderMetadataReaders","page","plugins","elem","classList","add","translate","plugin","Name","remove","getMetadataFetchersForTypeHtml","availableTypeOptions","libraryOptionsForType","MetadataFetchers","getOrderedPlugins","MetadataFetcherOrder","Type","checkedHtml","indexOf","DefaultEnabled","getTypeOptions","allOptions","type","allTypeOptions","TypeOptions","typeOptions","renderMetadataFetchers","availableOptions","libraryOptions","renderSubtitleFetchers","SubtitleFetchers","SubtitleFetcherOrder","DisabledSubtitleFetchers","getImageFetchersForTypeHtml","ImageFetchers","ImageFetcherOrder","supportedImageTypes","SupportedImageTypes","renderImageFetchers","populateMetadataSettings","contentType","isNewLibrary","contains","getJSON","getUrl","LibraryContentType","IsNewLibrary","currentAvailableOptions","renderMetadataSavers","metadataSavers","MetadataSavers","MetadataReaders","catch","Promise","resolve","adjustSortableListElement","btnSortable","inner","previousSibling","title","onImageFetchersContainerClick","e","btnImageOptionsForType","parentWithClass","target","showImageOptionsForType","require","ImageOptionsEditor","currentLibraryOptions","push","show","getAttribute","onSortableContainerClick","call","this","li","list","next","nextSibling","parentNode","removeChild","insertBefore","prev","Array","prototype","forEach","querySelectorAll","setContentType","setAttribute","removeAttribute","configuredOrder","slice","sort","a","b","setLibraryOptions","options","value","PreferredMetadataLanguage","MetadataCountryCode","AutomaticRefreshIntervalDays","SeasonZeroDisplayName","checked","EnablePhotos","EnableRealtimeMonitor","ExtractChapterImagesDuringLibraryScan","EnableChapterImageExtraction","DownloadImagesInAdvance","SaveLocalMetadata","ImportMissingEpisodes","EnableAutomaticSeriesGrouping","EnableEmbeddedTitles","EnableEmbeddedEpisodeInfos","SkipSubtitlesIfEmbeddedSubtitlesPresent","SaveSubtitlesWithMedia","SkipSubtitlesIfAudioTrackMatches","RequirePerfectSubtitleMatch","SubtitleDownloadLanguages","LocalMetadataReaderOrder","embed","reject","xhr","XMLHttpRequest","open","onload","template","response","translateDocument","populateRefreshInterval","map","val","join","promises","getCountries","allCountries","TwoLetterISORegionName","all","bindEvents","addEventListener","send","getLibraryOptions","EnableArchiveMediaFiles","EnableInternetProviders","parseInt","filter","setSubtitleFetchersIntoOptions","setMetadataFetchersIntoOptions","sections","section","setImageFetchersIntoOptions","setImageOptionsIntoOptions","originalTypeOptions","originalTypeOption","ImageOptions","setAdvancedVisible","visible","elems"],"mappings":"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","file":"libraryoptionseditor.js","sourcesContent":["define([\"globalize\", \"dom\", \"emby-checkbox\", \"emby-select\", \"emby-input\"], function(globalize, dom) {\n    \"use strict\";\n\n    function populateLanguages(parent) {\n        return ApiClient.getCultures().then(function(languages) {\n            populateLanguagesIntoSelect(parent.querySelector(\"#selectLanguage\"), languages);\n            populateLanguagesIntoList(parent.querySelector(\".subtitleDownloadLanguages\"), languages);\n        });\n    }\n\n    function populateLanguagesIntoSelect(select, languages) {\n        var html = \"\";\n        html += \"<option value=''></option>\";\n        for (var i = 0; i < languages.length; i++) {\n            var culture = languages[i];\n            html += \"<option value='\" + culture.TwoLetterISOLanguageName + \"'>\" + culture.DisplayName + \"</option>\";\n        }\n        select.innerHTML = html;\n    }\n\n    function populateLanguagesIntoList(element, languages) {\n        var html = \"\";\n        for (var i = 0; i < languages.length; i++) {\n            var culture = languages[i];\n            html += '<label><input type=\"checkbox\" is=\"emby-checkbox\" class=\"chkSubtitleLanguage\" data-lang=\"' + culture.ThreeLetterISOLanguageName.toLowerCase() + '\" /><span>' + culture.DisplayName + \"</span></label>\";\n        }\n        element.innerHTML = html;\n    }\n\n    function populateCountries(select) {\n        return ApiClient.getCountries().then(function(allCountries) {\n            var html = \"\";\n            html += \"<option value=''></option>\";\n            for (var i = 0; i < allCountries.length; i++) {\n                var culture = allCountries[i];\n                html += \"<option value='\" + culture.TwoLetterISORegionName + \"'>\" + culture.DisplayName + \"</option>\";\n            }\n            select.innerHTML = html;\n        })\n    }\n\n    function populateRefreshInterval(select) {\n        var html = \"\";\n        html += \"<option value='0'>\" + globalize.translate(\"Never\") + \"</option>\";\n        html += [30, 60, 90].map(function(val) {\n            return \"<option value='\" + val + \"'>\" + globalize.translate(\"EveryNDays\", val) + \"</option>\";\n        }).join(\"\");\n        select.innerHTML = html;\n    }\n\n    function renderMetadataReaders(page, plugins) {\n        var html = \"\";\n        var elem = page.querySelector(\".metadataReaders\");\n\n        if (plugins.length < 1) return elem.innerHTML = \"\", elem.classList.add(\"hide\"), !1;\n        html += '<h3 class=\"checkboxListLabel\">' + globalize.translate(\"LabelMetadataReaders\") + \"</h3>\";\n        html += '<div class=\"checkboxList paperList checkboxList-paperList\">';\n        for (var i = 0; i < plugins.length; i++) {\n            var plugin = plugins[i];\n            html += '<div class=\"listItem localReaderOption sortableOption\" data-pluginname=\"' + plugin.Name + '\">';\n            html += '<i class=\"listItemIcon material-icons live_tv\"></i>';\n            html += '<div class=\"listItemBody\">';\n            html += '<h3 class=\"listItemBodyText\">';\n            html += plugin.Name;\n            html += \"</h3>\";\n            html += \"</div>\";\n            if (i > 0) {\n                html += '<button type=\"button\" is=\"paper-icon-button-light\" title=\"' + globalize.translate(\"ButtonUp\") + '\" class=\"btnSortableMoveUp btnSortable\" data-pluginindex=\"' + i + '\"><i class=\"material-icons keyboard_arrow_up\"></i></button>';\n            } else if (plugins.length > 1) {\n                html += '<button type=\"button\" is=\"paper-icon-button-light\" title=\"' + globalize.translate(\"ButtonDown\") + '\" class=\"btnSortableMoveDown btnSortable\" data-pluginindex=\"' + i + '\"><i class=\"material-icons keyboard_arrow_down\"></i></button>';\n            }\n            html += \"</div>\";\n        }\n        html += \"</div>\";\n        html += '<div class=\"fieldDescription\">' + globalize.translate(\"LabelMetadataReadersHelp\") + \"</div>\";\n        if (plugins.length < 2) {\n            elem.classList.add(\"hide\");\n        } else {\n            elem.classList.remove(\"hide\");\n        }\n        elem.innerHTML = html;\n        return true;\n    }\n\n    function renderMetadataSavers(page, metadataSavers) {\n        var html = \"\";\n        var elem = page.querySelector(\".metadataSavers\");\n        if (!metadataSavers.length) return elem.innerHTML = \"\", elem.classList.add(\"hide\"), false;\n        html += '<h3 class=\"checkboxListLabel\">' + globalize.translate(\"LabelMetadataSavers\") + \"</h3>\";\n        html += '<div class=\"checkboxList paperList checkboxList-paperList\">';\n        for (var i = 0; i < metadataSavers.length; i++) {\n            var plugin = metadataSavers[i];\n            html += '<label><input type=\"checkbox\" data-defaultenabled=\"' + plugin.DefaultEnabled + '\" is=\"emby-checkbox\" class=\"chkMetadataSaver\" data-pluginname=\"' + plugin.Name + '\" ' + false + \"><span>\" + plugin.Name + \"</span></label>\";\n        }\n        html += \"</div>\";\n        html += '<div class=\"fieldDescription\" style=\"margin-top:.25em;\">' + globalize.translate(\"LabelMetadataSaversHelp\") + \"</div>\";\n        elem.innerHTML = html;\n        elem.classList.remove(\"hide\");\n        return true;\n    }\n\n    function getMetadataFetchersForTypeHtml(availableTypeOptions, libraryOptionsForType) {\n        var html = \"\";\n        var plugins = availableTypeOptions.MetadataFetchers;\n\n        plugins = getOrderedPlugins(plugins, libraryOptionsForType.MetadataFetcherOrder || []);\n        if (!plugins.length) return html;\n\n        html += '<div class=\"metadataFetcher\" data-type=\"' + availableTypeOptions.Type + '\">';\n        html += '<h3 class=\"checkboxListLabel\">' + globalize.translate(\"LabelTypeMetadataDownloaders\", globalize.translate(availableTypeOptions.Type)) + \"</h3>\";\n        html += '<div class=\"checkboxList paperList checkboxList-paperList\">';\n        for (var i = 0; i < plugins.length; i++) {\n            var plugin = plugins[i];\n            html += '<div class=\"listItem metadataFetcherItem sortableOption\" data-pluginname=\"' + plugin.Name + '\">';\n            var isChecked = libraryOptionsForType.MetadataFetchers ? -1 !== libraryOptionsForType.MetadataFetchers.indexOf(plugin.Name) : plugin.DefaultEnabled;\n            var checkedHtml = isChecked ? ' checked=\"checked\"' : \"\";\n            html += '<label class=\"listItemCheckboxContainer\"><input type=\"checkbox\" is=\"emby-checkbox\" class=\"chkMetadataFetcher\" data-pluginname=\"' + plugin.Name + '\" ' + checkedHtml + \"><span></span></label>\";\n            html += '<div class=\"listItemBody\">';\n            html += '<h3 class=\"listItemBodyText\">';\n            html += plugin.Name;\n            html += \"</h3>\";\n            html += \"</div>\";\n            i > 0 ? html += '<button type=\"button\" is=\"paper-icon-button-light\" title=\"' + globalize.translate(\"ButtonUp\") + '\" class=\"btnSortableMoveUp btnSortable\" data-pluginindex=\"' + i + '\"><i class=\"material-icons keyboard_arrow_up\"></i></button>' : plugins.length > 1 && (html += '<button type=\"button\" is=\"paper-icon-button-light\" title=\"' + globalize.translate(\"ButtonDown\") + '\" class=\"btnSortableMoveDown btnSortable\" data-pluginindex=\"' + i + '\"><i class=\"material-icons keyboard_arrow_down\"></i></button>'), html += \"</div>\"\n        }\n        html += \"</div>\";\n        html += '<div class=\"fieldDescription\">' + globalize.translate(\"LabelMetadataDownloadersHelp\") + \"</div>\";\n        html += \"</div>\";\n        return html;\n    }\n\n    function getTypeOptions(allOptions, type) {\n        var allTypeOptions = allOptions.TypeOptions || [];\n        for (var i = 0; i < allTypeOptions.length; i++) {\n            var typeOptions = allTypeOptions[i];\n            if (typeOptions.Type === type) return typeOptions;\n        }\n        return null;\n    }\n\n    function renderMetadataFetchers(page, availableOptions, libraryOptions) {\n        var html = \"\";\n        var elem = page.querySelector(\".metadataFetchers\");\n        for (var i = 0; i < availableOptions.TypeOptions.length; i++) {\n            var availableTypeOptions = availableOptions.TypeOptions[i];\n            html += getMetadataFetchersForTypeHtml(availableTypeOptions, getTypeOptions(libraryOptions, availableTypeOptions.Type) || {});\n        }\n        elem.innerHTML = html;\n        if (html) {\n            elem.classList.remove(\"hide\");\n            page.querySelector(\".fldAutoRefreshInterval\").classList.remove(\"hide\");\n            page.querySelector(\".fldMetadataLanguage\").classList.remove(\"hide\");\n            page.querySelector(\".fldMetadataCountry\").classList.remove(\"hide\");\n        } else {\n            elem.classList.add(\"hide\");\n            page.querySelector(\".fldAutoRefreshInterval\").classList.add(\"hide\");\n            page.querySelector(\".fldMetadataLanguage\").classList.add(\"hide\");\n            page.querySelector(\".fldMetadataCountry\").classList.add(\"hide\");\n        }\n        return true;\n    }\n\n    function renderSubtitleFetchers(page, availableOptions, libraryOptions) {\n        var html = \"\";\n        var elem = page.querySelector(\".subtitleFetchers\");\n\n        var plugins = availableOptions.SubtitleFetchers;\n        plugins = getOrderedPlugins(plugins, libraryOptions.SubtitleFetcherOrder || []);\n        if (!plugins.length) return html;\n\n        html += '<h3 class=\"checkboxListLabel\">' + globalize.translate(\"LabelSubtitleDownloaders\") + \"</h3>\";\n        html += '<div class=\"checkboxList paperList checkboxList-paperList\">';\n        for (var i = 0; i < plugins.length; i++) {\n            var plugin = plugins[i];\n            html += '<div class=\"listItem subtitleFetcherItem sortableOption\" data-pluginname=\"' + plugin.Name + '\">';\n            var isChecked = libraryOptions.DisabledSubtitleFetchers ? -1 === libraryOptions.DisabledSubtitleFetchers.indexOf(plugin.Name) : plugin.DefaultEnabled;\n            var checkedHtml = isChecked ? ' checked=\"checked\"' : \"\";\n            html += '<label class=\"listItemCheckboxContainer\"><input type=\"checkbox\" is=\"emby-checkbox\" class=\"chkSubtitleFetcher\" data-pluginname=\"' + plugin.Name + '\" ' + checkedHtml + \"><span></span></label>\";\n            html += '<div class=\"listItemBody\">';\n            html += '<h3 class=\"listItemBodyText\">';\n            html += plugin.Name;\n            html += \"</h3>\";\n            html += \"</div>\";\n            if (i > 0) {\n                html += '<button type=\"button\" is=\"paper-icon-button-light\" title=\"' + globalize.translate(\"ButtonUp\") + '\" class=\"btnSortableMoveUp btnSortable\" data-pluginindex=\"' + i + '\"><i class=\"material-icons keyboard_arrow_up\"></i></button>';\n            } else if (plugins.length > 1) {\n                html += '<button type=\"button\" is=\"paper-icon-button-light\" title=\"' + globalize.translate(\"ButtonDown\") + '\" class=\"btnSortableMoveDown btnSortable\" data-pluginindex=\"' + i + '\"><i class=\"material-icons keyboard_arrow_down\"></i></button>';\n            }\n            html += \"</div>\";\n        }\n        html += \"</div>\";\n        html += '<div class=\"fieldDescription\">' + globalize.translate(\"SubtitleDownloadersHelp\") + \"</div>\";\n        elem.innerHTML = html;\n    }\n\n    function getImageFetchersForTypeHtml(availableTypeOptions, libraryOptionsForType) {\n        var html = \"\";\n        var plugins = availableTypeOptions.ImageFetchers;\n\n        plugins = getOrderedPlugins(plugins, libraryOptionsForType.ImageFetcherOrder || []);\n        if (!plugins.length) return html;\n\n        html += '<div class=\"imageFetcher\" data-type=\"' + availableTypeOptions.Type + '\">';\n        html += '<div class=\"flex align-items-center\" style=\"margin:1.5em 0 .5em;\">';\n        html += '<h3 class=\"checkboxListLabel\" style=\"margin:0;\">' + globalize.translate(\"HeaderTypeImageFetchers\", availableTypeOptions.Type) + \"</h3>\";\n        var supportedImageTypes = availableTypeOptions.SupportedImageTypes || [];\n        if (supportedImageTypes.length > 1 || 1 === supportedImageTypes.length && \"Primary\" !== supportedImageTypes[0]) {\n            html += '<button is=\"emby-button\" class=\"raised btnImageOptionsForType\" type=\"button\" style=\"margin-left:1.5em;font-size:90%;\"><span>' + globalize.translate(\"HeaderFetcherSettings\") + \"</span></button>\";\n        }\n        html += \"</div>\";\n        html += '<div class=\"checkboxList paperList checkboxList-paperList\">';\n        for (var i = 0; i < plugins.length; i++) {\n            var plugin = plugins[i];\n            html += '<div class=\"listItem imageFetcherItem sortableOption\" data-pluginname=\"' + plugin.Name + '\">';\n            var isChecked = libraryOptionsForType.ImageFetchers ? -1 !== libraryOptionsForType.ImageFetchers.indexOf(plugin.Name) : plugin.DefaultEnabled;\n            var checkedHtml = isChecked ? ' checked=\"checked\"' : \"\";\n            html += '<label class=\"listItemCheckboxContainer\"><input type=\"checkbox\" is=\"emby-checkbox\" class=\"chkImageFetcher\" data-pluginname=\"' + plugin.Name + '\" ' + checkedHtml + \"><span></span></label>\";\n            html += '<div class=\"listItemBody\">';\n            html += '<h3 class=\"listItemBodyText\">';\n            html += plugin.Name;\n            html += \"</h3>\";\n            html += \"</div>\";\n            if (i > 0) {\n                html += '<button type=\"button\" is=\"paper-icon-button-light\" title=\"' + globalize.translate(\"ButtonUp\") + '\" class=\"btnSortableMoveUp btnSortable\" data-pluginindex=\"' + i + '\"><i class=\"material-icons keyboard_arrow_up\"></i></button>';\n            } else if (plugins.length > 1) {\n                html += '<button type=\"button\" is=\"paper-icon-button-light\" title=\"' + globalize.translate(\"ButtonDown\") + '\" class=\"btnSortableMoveDown btnSortable\" data-pluginindex=\"' + i + '\"><i class=\"material-icons keyboard_arrow_down\"></i></button>';\n            }\n            html += \"</div>\";\n        }\n        html += \"</div>\";\n        html += '<div class=\"fieldDescription\">' + globalize.translate(\"LabelImageFetchersHelp\") + \"</div>\";\n        html += \"</div>\";\n        return html;\n    }\n\n    function renderImageFetchers(page, availableOptions, libraryOptions) {\n        var html = \"\";\n        var elem = page.querySelector(\".imageFetchers\");\n        for (var i = 0; i < availableOptions.TypeOptions.length; i++) {\n            var availableTypeOptions = availableOptions.TypeOptions[i];\n            html += getImageFetchersForTypeHtml(availableTypeOptions, getTypeOptions(libraryOptions, availableTypeOptions.Type) || {});\n        }\n        elem.innerHTML = html;\n        if (html) {\n            elem.classList.remove(\"hide\");\n            page.querySelector(\".chkDownloadImagesInAdvanceContainer\").classList.remove(\"hide\");\n            page.querySelector(\".chkSaveLocalContainer\").classList.remove(\"hide\");\n        } else {\n            elem.classList.add(\"hide\");\n            page.querySelector(\".chkDownloadImagesInAdvanceContainer\").classList.add(\"hide\");\n            page.querySelector(\".chkSaveLocalContainer\").classList.add(\"hide\");\n        }\n        return true;\n    }\n\n    function populateMetadataSettings(parent, contentType, isNewLibrary) {\n        var isNewLibrary = parent.classList.contains(\"newlibrary\");\n        return ApiClient.getJSON(ApiClient.getUrl(\"Libraries/AvailableOptions\", {\n            LibraryContentType: contentType,\n            IsNewLibrary: isNewLibrary\n        })).then(function(availableOptions) {\n            currentAvailableOptions = availableOptions;\n            parent.availableOptions = availableOptions;\n            renderMetadataSavers(parent, availableOptions.MetadataSavers);\n            renderMetadataReaders(parent, availableOptions.MetadataReaders);\n            renderMetadataFetchers(parent, availableOptions, {});\n            renderSubtitleFetchers(parent, availableOptions, {});\n            renderImageFetchers(parent, availableOptions, {});\n            availableOptions.SubtitleFetchers.length ? parent.querySelector(\".subtitleDownloadSettings\").classList.remove(\"hide\") : parent.querySelector(\".subtitleDownloadSettings\").classList.add(\"hide\")\n        }).catch(function() {\n            return Promise.resolve();\n        })\n    }\n\n    function adjustSortableListElement(elem) {\n        var btnSortable = elem.querySelector(\".btnSortable\");\n        var inner = btnSortable.querySelector(\"i\");\n        if (elem.previousSibling) {\n            btnSortable.title = globalize.translate(\"ButtonUp\");\n            btnSortable.classList.add(\"btnSortableMoveUp\");\n            btnSortable.classList.remove(\"btnSortableMoveDown\");\n            inner.classList.remove(\"keyboard_arrow_down\");\n            inner.classList.add(\"keyboard_arrow_up\");\n        } else {\n            btnSortable.title = globalize.translate(\"ButtonDown\");\n            btnSortable.classList.remove(\"btnSortableMoveUp\");\n            btnSortable.classList.add(\"btnSortableMoveDown\");\n            inner.classList.remove(\"keyboard_arrow_up\");\n            inner.classList.add(\"keyboard_arrow_down\");\n        }\n    }\n\n    function showImageOptionsForType(type) {\n        require([\"imageoptionseditor\"], function(ImageOptionsEditor) {\n            var typeOptions = getTypeOptions(currentLibraryOptions, type);\n            typeOptions || (typeOptions = {\n                Type: type\n            }, currentLibraryOptions.TypeOptions.push(typeOptions));\n            var availableOptions = getTypeOptions(currentAvailableOptions || {}, type);\n            (new ImageOptionsEditor).show(type, typeOptions, availableOptions)\n        })\n    }\n\n    function onImageFetchersContainerClick(e) {\n        var btnImageOptionsForType = dom.parentWithClass(e.target, \"btnImageOptionsForType\");\n        if (btnImageOptionsForType) {\n            return void showImageOptionsForType(dom.parentWithClass(btnImageOptionsForType, \"imageFetcher\").getAttribute(\"data-type\"));\n        }\n        onSortableContainerClick.call(this, e);\n    }\n\n    function onSortableContainerClick(e) {\n        var btnSortable = dom.parentWithClass(e.target, \"btnSortable\");\n        if (btnSortable) {\n            var li = dom.parentWithClass(btnSortable, \"sortableOption\");\n            var list = dom.parentWithClass(li, \"paperList\");\n            if (btnSortable.classList.contains(\"btnSortableMoveDown\")) {\n                var next = li.nextSibling;\n                next && (li.parentNode.removeChild(li), next.parentNode.insertBefore(li, next.nextSibling))\n            } else {\n                var prev = li.previousSibling;\n                prev && (li.parentNode.removeChild(li), prev.parentNode.insertBefore(li, prev))\n            }\n            Array.prototype.forEach.call(list.querySelectorAll(\".sortableOption\"), adjustSortableListElement)\n        }\n    }\n\n    function bindEvents(parent) {\n        parent.querySelector(\".metadataReaders\").addEventListener(\"click\", onSortableContainerClick);\n        parent.querySelector(\".subtitleFetchers\").addEventListener(\"click\", onSortableContainerClick);\n        parent.querySelector(\".metadataFetchers\").addEventListener(\"click\", onSortableContainerClick);\n        parent.querySelector(\".imageFetchers\").addEventListener(\"click\", onImageFetchersContainerClick);\n    }\n\n    function embed(parent, contentType, libraryOptions) {\n        currentLibraryOptions = {\n            TypeOptions: []\n        };\n        currentAvailableOptions = null;\n        var isNewLibrary = null === libraryOptions;\n        isNewLibrary && parent.classList.add(\"newlibrary\");\n        return new Promise(function(resolve, reject) {\n            var xhr = new XMLHttpRequest;\n            xhr.open(\"GET\", \"components/libraryoptionseditor/libraryoptionseditor.template.html\", true);\n            xhr.onload = function(e) {\n                var template = this.response;\n                parent.innerHTML = globalize.translateDocument(template);\n                populateRefreshInterval(parent.querySelector(\"#selectAutoRefreshInterval\"));\n                var promises = [populateLanguages(parent), populateCountries(parent.querySelector(\"#selectCountry\"))];\n                Promise.all(promises).then(function() {\n                    return setContentType(parent, contentType).then(function() {\n                        libraryOptions && setLibraryOptions(parent, libraryOptions);\n                        bindEvents(parent);\n                        resolve();\n                    });\n                });\n            };\n            xhr.send();\n        });\n    }\n\n    function setAdvancedVisible(parent, visible) {\n        var elems = parent.querySelectorAll(\".advanced\");\n        for (var i = 0; i < elems.length; i++) {\n            visible ? elems[i].classList.remove(\"advancedHide\") : elems[i].classList.add(\"advancedHide\");\n        }\n    }\n\n    function setContentType(parent, contentType) {\n        if (contentType === \"homevideos\" || contentType === \"photos\") {\n            parent.querySelector(\".chkEnablePhotosContainer\").classList.remove(\"hide\");\n        } else {\n            parent.querySelector(\".chkEnablePhotosContainer\").classList.add(\"hide\");\n        }\n\n        if (contentType !== \"tvshows\" && contentType !== \"movies\" && contentType !== \"homevideos\" && contentType !== \"musicvideos\" && contentType !== \"mixed\") {\n            parent.querySelector(\".chapterSettingsSection\").classList.add(\"hide\");\n        } else {\n            parent.querySelector(\".chapterSettingsSection\").classList.remove(\"hide\");\n        }\n\n        if (contentType === \"tvshows\") {\n            parent.querySelector(\".chkImportMissingEpisodesContainer\").classList.remove(\"hide\");\n            parent.querySelector(\".chkAutomaticallyGroupSeriesContainer\").classList.remove(\"hide\");\n            parent.querySelector(\".fldSeasonZeroDisplayName\").classList.remove(\"hide\");\n            parent.querySelector(\"#txtSeasonZeroName\").setAttribute(\"required\", \"required\");\n        } else {\n            parent.querySelector(\".chkImportMissingEpisodesContainer\").classList.add(\"hide\");\n            parent.querySelector(\".chkAutomaticallyGroupSeriesContainer\").classList.add(\"hide\");\n            parent.querySelector(\".fldSeasonZeroDisplayName\").classList.add(\"hide\");\n            parent.querySelector(\"#txtSeasonZeroName\").removeAttribute(\"required\");\n        }\n\n        if (contentType === \"books\" || contentType === \"boxsets\" || contentType === \"playlists\" || contentType === \"music\") {\n            parent.querySelector(\".chkEnableEmbeddedTitlesContainer\").classList.add(\"hide\");\n        } else {\n            parent.querySelector(\".chkEnableEmbeddedTitlesContainer\").classList.remove(\"hide\");\n        }\n\n        if (contentType === \"tvshows\") {\n            parent.querySelector(\".chkEnableEmbeddedEpisodeInfosContainer\").classList.remove(\"hide\");\n        } else {\n            parent.querySelector(\".chkEnableEmbeddedEpisodeInfosContainer\").classList.add(\"hide\");\n        }\n\n        return populateMetadataSettings(parent, contentType);\n    }\n\n    function setSubtitleFetchersIntoOptions(parent, options) {\n        options.DisabledSubtitleFetchers = Array.prototype.map.call(Array.prototype.filter.call(parent.querySelectorAll(\".chkSubtitleFetcher\"), function(elem) {\n            return !elem.checked\n        }), function(elem) {\n            return elem.getAttribute(\"data-pluginname\")\n        });\n\n        options.SubtitleFetcherOrder = Array.prototype.map.call(parent.querySelectorAll(\".subtitleFetcherItem\"), function(elem) {\n            return elem.getAttribute(\"data-pluginname\")\n        });\n    }\n\n    function setMetadataFetchersIntoOptions(parent, options) {\n        var sections = parent.querySelectorAll(\".metadataFetcher\");\n        for (var i = 0; i < sections.length; i++) {\n            var section = sections[i];\n            var type = section.getAttribute(\"data-type\");\n            var typeOptions = getTypeOptions(options, type);\n            if (!typeOptions) {\n                typeOptions = {\n                    Type: type\n                };\n                options.TypeOptions.push(typeOptions);\n            }\n            typeOptions.MetadataFetchers = Array.prototype.map.call(Array.prototype.filter.call(section.querySelectorAll(\".chkMetadataFetcher\"), function(elem) {\n                return elem.checked;\n            }), function(elem) {\n                return elem.getAttribute(\"data-pluginname\");\n            });\n\n            typeOptions.MetadataFetcherOrder = Array.prototype.map.call(section.querySelectorAll(\".metadataFetcherItem\"), function(elem) {\n                return elem.getAttribute(\"data-pluginname\");\n            });\n        }\n    }\n\n    function setImageFetchersIntoOptions(parent, options) {\n        var sections = parent.querySelectorAll(\".imageFetcher\");\n        for (var i = 0; i < sections.length; i++) {\n            var section = sections[i];\n            var type = section.getAttribute(\"data-type\");\n            var typeOptions = getTypeOptions(options, type);\n            if (!typeOptions) {\n                typeOptions = {\n                    Type: type\n                };\n                options.TypeOptions.push(typeOptions);\n            }\n\n            typeOptions.ImageFetchers = Array.prototype.map.call(Array.prototype.filter.call(section.querySelectorAll(\".chkImageFetcher\"), function(elem) {\n                return elem.checked\n            }), function(elem) {\n                return elem.getAttribute(\"data-pluginname\")\n            });\n\n            typeOptions.ImageFetcherOrder = Array.prototype.map.call(section.querySelectorAll(\".imageFetcherItem\"), function(elem) {\n                return elem.getAttribute(\"data-pluginname\")\n            });\n        }\n    }\n\n    function setImageOptionsIntoOptions(parent, options) {\n        var originalTypeOptions = (currentLibraryOptions || {}).TypeOptions || [];\n        for (var i = 0; i < originalTypeOptions.length; i++) {\n            var originalTypeOption = originalTypeOptions[i];\n            var typeOptions = getTypeOptions(options, originalTypeOption.Type);\n\n            if (!typeOptions) {\n                typeOptions = {\n                    Type: originalTypeOption.Type\n                };\n                options.TypeOptions.push(typeOptions);\n            }\n            originalTypeOption.ImageOptions && (typeOptions.ImageOptions = originalTypeOption.ImageOptions);\n        }\n    }\n\n    function getLibraryOptions(parent) {\n        var options = {\n            EnableArchiveMediaFiles: false,\n            EnablePhotos: parent.querySelector(\".chkEnablePhotos\").checked,\n            EnableRealtimeMonitor: parent.querySelector(\".chkEnableRealtimeMonitor\").checked,\n            ExtractChapterImagesDuringLibraryScan: parent.querySelector(\".chkExtractChaptersDuringLibraryScan\").checked,\n            EnableChapterImageExtraction: parent.querySelector(\".chkExtractChapterImages\").checked,\n            DownloadImagesInAdvance: parent.querySelector(\"#chkDownloadImagesInAdvance\").checked,\n            EnableInternetProviders: true,\n            ImportMissingEpisodes: parent.querySelector(\"#chkImportMissingEpisodes\").checked,\n            SaveLocalMetadata: parent.querySelector(\"#chkSaveLocal\").checked,\n            EnableAutomaticSeriesGrouping: parent.querySelector(\".chkAutomaticallyGroupSeries\").checked,\n            PreferredMetadataLanguage: parent.querySelector(\"#selectLanguage\").value,\n            MetadataCountryCode: parent.querySelector(\"#selectCountry\").value,\n            SeasonZeroDisplayName: parent.querySelector(\"#txtSeasonZeroName\").value,\n            AutomaticRefreshIntervalDays: parseInt(parent.querySelector(\"#selectAutoRefreshInterval\").value),\n            EnableEmbeddedTitles: parent.querySelector(\"#chkEnableEmbeddedTitles\").checked,\n            EnableEmbeddedEpisodeInfos: parent.querySelector(\"#chkEnableEmbeddedEpisodeInfos\").checked,\n            SkipSubtitlesIfEmbeddedSubtitlesPresent: parent.querySelector(\"#chkSkipIfGraphicalSubsPresent\").checked,\n            SkipSubtitlesIfAudioTrackMatches: parent.querySelector(\"#chkSkipIfAudioTrackPresent\").checked,\n            SaveSubtitlesWithMedia: parent.querySelector(\"#chkSaveSubtitlesLocally\").checked,\n            RequirePerfectSubtitleMatch: parent.querySelector(\"#chkRequirePerfectMatch\").checked,\n            MetadataSavers: Array.prototype.map.call(Array.prototype.filter.call(parent.querySelectorAll(\".chkMetadataSaver\"), function(elem) {\n                return elem.checked\n            }), function(elem) {\n                return elem.getAttribute(\"data-pluginname\")\n            }),\n            TypeOptions: []\n        };\n\n        options.LocalMetadataReaderOrder = Array.prototype.map.call(parent.querySelectorAll(\".localReaderOption\"), function(elem) {\n            return elem.getAttribute(\"data-pluginname\")\n        });\n        options.SubtitleDownloadLanguages = Array.prototype.map.call(Array.prototype.filter.call(parent.querySelectorAll(\".chkSubtitleLanguage\"), function(elem) {\n            return elem.checked\n        }), function(elem) {\n            return elem.getAttribute(\"data-lang\")\n        });\n        setSubtitleFetchersIntoOptions(parent, options);\n        setMetadataFetchersIntoOptions(parent, options);\n        setImageFetchersIntoOptions(parent, options);\n        setImageOptionsIntoOptions(parent, options);\n\n        return options;\n    }\n\n    function getOrderedPlugins(plugins, configuredOrder) {\n        plugins = plugins.slice(0);\n        plugins.sort(function(a, b) {\n            return a = configuredOrder.indexOf(a.Name), b = configuredOrder.indexOf(b.Name), a < b ? -1 : a > b ? 1 : 0\n        });\n        return plugins;\n    }\n\n    function setLibraryOptions(parent, options) {\n        currentLibraryOptions = options;\n        currentAvailableOptions = parent.availableOptions;\n        parent.querySelector(\"#selectLanguage\").value = options.PreferredMetadataLanguage || \"\";\n        parent.querySelector(\"#selectCountry\").value = options.MetadataCountryCode || \"\";\n        parent.querySelector(\"#selectAutoRefreshInterval\").value = options.AutomaticRefreshIntervalDays || \"0\";\n        parent.querySelector(\"#txtSeasonZeroName\").value = options.SeasonZeroDisplayName || \"Specials\";\n        parent.querySelector(\".chkEnablePhotos\").checked = options.EnablePhotos;\n        parent.querySelector(\".chkEnableRealtimeMonitor\").checked = options.EnableRealtimeMonitor;\n        parent.querySelector(\".chkExtractChaptersDuringLibraryScan\").checked = options.ExtractChapterImagesDuringLibraryScan;\n        parent.querySelector(\".chkExtractChapterImages\").checked = options.EnableChapterImageExtraction;\n        parent.querySelector(\"#chkDownloadImagesInAdvance\").checked = options.DownloadImagesInAdvance;\n        parent.querySelector(\"#chkSaveLocal\").checked = options.SaveLocalMetadata;\n        parent.querySelector(\"#chkImportMissingEpisodes\").checked = options.ImportMissingEpisodes;\n        parent.querySelector(\".chkAutomaticallyGroupSeries\").checked = options.EnableAutomaticSeriesGrouping;\n        parent.querySelector(\"#chkEnableEmbeddedTitles\").checked = options.EnableEmbeddedTitles;\n        parent.querySelector(\"#chkEnableEmbeddedEpisodeInfos\").checked = options.EnableEmbeddedEpisodeInfos;\n        parent.querySelector(\"#chkSkipIfGraphicalSubsPresent\").checked = options.SkipSubtitlesIfEmbeddedSubtitlesPresent;\n        parent.querySelector(\"#chkSaveSubtitlesLocally\").checked = options.SaveSubtitlesWithMedia;\n        parent.querySelector(\"#chkSkipIfAudioTrackPresent\").checked = options.SkipSubtitlesIfAudioTrackMatches;\n        parent.querySelector(\"#chkRequirePerfectMatch\").checked = options.RequirePerfectSubtitleMatch;\n        Array.prototype.forEach.call(parent.querySelectorAll(\".chkMetadataSaver\"), function(elem) {\n            elem.checked = options.MetadataSavers ? -1 !== options.MetadataSavers.indexOf(elem.getAttribute(\"data-pluginname\")) : \"true\" === elem.getAttribute(\"data-defaultenabled\")\n        });\n        Array.prototype.forEach.call(parent.querySelectorAll(\".chkSubtitleLanguage\"), function(elem) {\n            elem.checked = !!options.SubtitleDownloadLanguages && -1 !== options.SubtitleDownloadLanguages.indexOf(elem.getAttribute(\"data-lang\"))\n        });\n        renderMetadataReaders(parent, getOrderedPlugins(parent.availableOptions.MetadataReaders, options.LocalMetadataReaderOrder || []));\n        renderMetadataFetchers(parent, parent.availableOptions, options);\n        renderImageFetchers(parent, parent.availableOptions, options);\n        renderSubtitleFetchers(parent, parent.availableOptions, options);\n    }\n\n    var currentLibraryOptions;\n    var currentAvailableOptions;\n\n    return {\n        embed: embed,\n        setContentType: setContentType,\n        getLibraryOptions: getLibraryOptions,\n        setLibraryOptions: setLibraryOptions,\n        setAdvancedVisible: setAdvancedVisible\n    }\n});\n"]}