"use strict";define(["lazyLoader","imageFetcher","layoutManager","browser","appSettings","userSettings","require","css!./style"],(function(lazyLoader,imageFetcher,layoutManager,browser,appSettings,userSettings,require){window.requestIdleCallback;var self={};function fillImage(elem,source,enableEffects){if(!elem)throw new Error("elem cannot be null");source||(source=elem.getAttribute("data-src")),source&&function fillImageElement(elem,source,enableEffects){imageFetcher.loadImage(elem,source).then((function(){!1!==enableEffects&&function fadeIn(elem){userSettings.enableFastFadein()?elem.classList.add("lazy-image-fadein-fast"):elem.classList.add("lazy-image-fadein")}(elem),elem.removeAttribute("data-src")}))}(elem,source,enableEffects)}return self.fillImages=function fillImages(elems){for(var i=0,length=elems.length;i<length;i++){fillImage(elems[0])}},self.lazyImage=fillImage,self.lazyChildren=function lazyChildren(elem){lazyLoader.lazyChildren(elem,fillImage)},self.getPrimaryImageAspectRatio=function getPrimaryImageAspectRatio(items){for(var values=[],i=0,length=items.length;i<length;i++){var ratio=items[i].PrimaryImageAspectRatio||0;ratio&&(values[values.length]=ratio)}if(!values.length)return null;values.sort((function(a,b){return a-b}));var result,half=Math.floor(values.length/2);return result=values.length%2?values[half]:(values[half-1]+values[half])/2,Math.abs(2/3-result)<=.15?2/3:Math.abs(16/9-result)<=.2?16/9:Math.abs(1-result)<=.15?1:Math.abs(4/3-result)<=.15?4/3:result},self}));
//# sourceMappingURL=imageLoader.js.map
