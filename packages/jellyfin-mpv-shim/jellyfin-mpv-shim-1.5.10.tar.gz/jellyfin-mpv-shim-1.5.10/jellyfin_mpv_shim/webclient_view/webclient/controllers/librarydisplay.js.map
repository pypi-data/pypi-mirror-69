{"version":3,"sources":["controllers/librarydisplay.js"],"names":["define","globalize","loading","libraryMenu","getTabs","href","name","Globalize","translate","view","params","loadData","ApiClient","getServerConfiguration","then","config","querySelector","checked","EnableFolderView","EnableGroupingIntoCollections","DisplaySpecialsWithinSeasons","EnableExternalContentInSuggestions","SaveMetadataHidden","getNamedConfiguration","metadata","loadMetadataConfig","page","$","val","UseFileCreationTimeForDateAdded","this","addEventListener","e","show","form","updateServerConfiguration","Dashboard","processServerConfigurationUpdateResult","updateNamedConfiguration","preventDefault","hide","setTabs","getSystemInfo","info","OperatingSystem","classList","remove","add"],"mappings":"AAAA,aAAAA,OAAO,CAAC,YAAa,UAAW,cAAe,gBAAiB,cAAe,gBAAgB,SAASC,UAAWC,QAASC,aAGxH,SAASC,UACL,MAAO,CAAC,CACJC,KAAM,eACNC,KAAMC,UAAUC,UAAU,oBAC3B,CACCH,KAAM,sBACNC,KAAMC,UAAUC,UAAU,eAC3B,CACCH,KAAM,sBACNC,KAAMC,UAAUC,UAAU,gBAC3B,CACCH,KAAM,mBACNC,KAAMC,UAAUC,UAAU,oBAIlC,OAAO,SAASC,KAAMC,QAClB,SAASC,WACLC,UAAUC,yBAAyBC,MAAK,SAASC,QAC7CN,KAAKO,cAAc,kBAAkBC,QAAUF,OAAOG,iBACtDT,KAAKO,cAAc,kCAAkCC,QAAUF,OAAOI,8BACtEV,KAAKO,cAAc,oCAAoCC,QAAUF,OAAOK,6BACxEX,KAAKO,cAAc,oCAAoCC,QAAUF,OAAOM,mCACxEZ,KAAKO,cAAc,0BAA0BC,QAAUF,OAAOO,sBAElEV,UAAUW,sBAAsB,YAAYT,MAAK,SAASU,WAK9D,SAASC,mBAAmBC,KAAMX,QAC9BY,EAAE,mBAAoBD,MAAME,IAAIb,OAAOc,gCAAkC,IAAM,KAL3EJ,CAAmBK,KAAMN,aAQjCf,KAAKO,cAAc,QAAQe,iBAAiB,UAAU,SAASC,GAC3D9B,QAAQ+B,OACR,IAAIC,KAAOJ,KAgBX,OAfAlB,UAAUC,yBAAyBC,MAAK,SAASC,QAC7CA,OAAOG,iBAAmBgB,KAAKlB,cAAc,kBAAkBC,QAC/DF,OAAOI,8BAAgCe,KAAKlB,cAAc,kCAAkCC,QAC5FF,OAAOK,6BAA+Bc,KAAKlB,cAAc,oCAAoCC,QAC7FF,OAAOM,mCAAqCa,KAAKlB,cAAc,oCAAoCC,QACnGF,OAAOO,mBAAqBY,KAAKlB,cAAc,0BAA0BC,QACzEL,UAAUuB,0BAA0BpB,QAAQD,KAAKsB,UAAUC,2CAE/DzB,UAAUW,sBAAsB,YAAYT,MAAK,SAASC,QACtDA,OAAOc,gCAAkC,MAAQF,EAAE,mBAAoBO,MAAMN,MAC7EhB,UAAU0B,yBAAyB,WAAYvB,WAGnDiB,EAAEO,iBACFrC,QAAQsC,QACD,KAGX/B,KAAKsB,iBAAiB,YAAY,WAC9B5B,YAAYsC,QAAQ,eAAgB,EAAGrC,SACvCO,WACAC,UAAU8B,gBAAgB5B,MAAK,SAAS6B,MAChC,YAAcA,KAAKC,gBACnBnC,KAAKO,cAAc,0BAA0B6B,UAAUC,OAAO,QAE9DrC,KAAKO,cAAc,0BAA0B6B,UAAUE,IAAI","file":"librarydisplay.js","sourcesContent":["define([\"globalize\", \"loading\", \"libraryMenu\", \"emby-checkbox\", \"emby-button\", \"emby-button\"], function(globalize, loading, libraryMenu) {\n    \"use strict\";\n\n    function getTabs() {\n        return [{\n            href: \"library.html\",\n            name: Globalize.translate(\"HeaderLibraries\")\n        }, {\n            href: \"librarydisplay.html\",\n            name: Globalize.translate(\"TabDisplay\")\n        }, {\n            href: \"metadataimages.html\",\n            name: Globalize.translate(\"TabMetadata\")\n        }, {\n            href: \"metadatanfo.html\",\n            name: Globalize.translate(\"TabNfoSettings\")\n        }]\n    }\n\n    return function(view, params) {\n        function loadData() {\n            ApiClient.getServerConfiguration().then(function(config) {\n                view.querySelector(\".chkFolderView\").checked = config.EnableFolderView;\n                view.querySelector(\".chkGroupMoviesIntoCollections\").checked = config.EnableGroupingIntoCollections;\n                view.querySelector(\".chkDisplaySpecialsWithinSeasons\").checked = config.DisplaySpecialsWithinSeasons;\n                view.querySelector(\".chkExternalContentInSuggestions\").checked = config.EnableExternalContentInSuggestions;\n                view.querySelector(\"#chkSaveMetadataHidden\").checked = config.SaveMetadataHidden;\n            });\n            ApiClient.getNamedConfiguration(\"metadata\").then(function(metadata) {\n                loadMetadataConfig(this, metadata)\n            });\n        }\n\n        function loadMetadataConfig(page, config) {\n            $(\"#selectDateAdded\", page).val(config.UseFileCreationTimeForDateAdded ? \"1\" : \"0\");\n        }\n\n        view.querySelector(\"form\").addEventListener(\"submit\", function(e) {\n            loading.show();\n            var form = this;\n            ApiClient.getServerConfiguration().then(function(config) {\n                config.EnableFolderView = form.querySelector(\".chkFolderView\").checked;\n                config.EnableGroupingIntoCollections = form.querySelector(\".chkGroupMoviesIntoCollections\").checked;\n                config.DisplaySpecialsWithinSeasons = form.querySelector(\".chkDisplaySpecialsWithinSeasons\").checked;\n                config.EnableExternalContentInSuggestions = form.querySelector(\".chkExternalContentInSuggestions\").checked;\n                config.SaveMetadataHidden = form.querySelector(\"#chkSaveMetadataHidden\").checked;\n                ApiClient.updateServerConfiguration(config).then(Dashboard.processServerConfigurationUpdateResult);\n            });\n            ApiClient.getNamedConfiguration(\"metadata\").then(function(config) {\n                config.UseFileCreationTimeForDateAdded = \"1\" === $(\"#selectDateAdded\", form).val();\n                ApiClient.updateNamedConfiguration(\"metadata\", config);\n            });\n\n            e.preventDefault();\n            loading.hide();\n            return false;\n        });\n\n        view.addEventListener(\"viewshow\", function() {\n            libraryMenu.setTabs(\"librarysetup\", 1, getTabs);\n            loadData();\n            ApiClient.getSystemInfo().then(function(info) {\n                if (\"Windows\" === info.OperatingSystem) {\n                    view.querySelector(\".fldSaveMetadataHidden\").classList.remove(\"hide\");\n                } else {\n                    view.querySelector(\".fldSaveMetadataHidden\").classList.add(\"hide\");\n                }\n            });\n        });\n    }\n});\n"]}