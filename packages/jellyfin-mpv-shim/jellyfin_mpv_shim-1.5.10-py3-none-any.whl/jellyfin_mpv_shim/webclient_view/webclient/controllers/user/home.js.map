{"version":3,"sources":["controllers/user/home.js"],"names":["define","HomescreenSettings","userSettingsBuilder","dom","globalize","loading","currentUserSettings","autoFocuser","view","params","onBeforeUnload","e","hasChanges","returnValue","homescreenSettingsInstance","userId","ApiClient","getCurrentUserId","userSettings","addEventListener","window","loadData","serverId","element","querySelector","enableSaveButton","enableSaveConfirmation","autoFocus","isEnabled","submit","destroy"],"mappings":"AAAA,aAAAA,OAAO,CAAC,qBAAsB,sBAAuB,MAAO,YAAa,UAAW,eAAgB,cAAe,kBAAkB,SAAUC,mBAAoBC,oBAAqBC,IAAKC,UAAWC,QAASC,oBAAqBC,aAGlO,OAAO,SAAUC,KAAMC,QACnB,SAASC,eAAeC,GAChBC,aACAD,EAAEE,YAAc,uEAIxB,IAAIC,2BACAF,WACAG,OAASN,OAAOM,QAAUC,UAAUC,mBACpCC,aAAeH,SAAWC,UAAUC,mBAAqBX,oBAAsB,IAAIJ,oBACvFM,KAAKW,iBAAiB,YAAY,WAC9BC,OAAOD,iBAAiB,eAAgBT,gBAEpCI,2BACAA,2BAA2BO,WAE3BP,2BAA6B,IAAIb,mBAAmB,CAChDqB,SAAUN,UAAUM,WACpBP,OAAQA,OACRQ,QAASf,KAAKgB,cAAc,gCAC5BN,aAAcA,aACdO,kBAAkB,EAClBC,wBAAwB,EACxBC,UAAWpB,YAAYqB,iBAInCpB,KAAKW,iBAAiB,UAAU,WAC5BP,YAAa,KAEjBJ,KAAKW,iBAAiB,kBAAkB,WACpCP,YAAa,EAETE,4BACAA,2BAA2Be,YAGnCrB,KAAKW,iBAAiB,eAAe,WAC7BL,6BACAA,2BAA2BgB,UAC3BhB,2BAA6B","file":"home.js","sourcesContent":["define([\"homescreenSettings\", \"userSettingsBuilder\", \"dom\", \"globalize\", \"loading\", \"userSettings\", \"autoFocuser\", \"listViewStyle\"], function (HomescreenSettings, userSettingsBuilder, dom, globalize, loading, currentUserSettings, autoFocuser) {\n    \"use strict\";\n\n    return function (view, params) {\n        function onBeforeUnload(e) {\n            if (hasChanges) {\n                e.returnValue = \"You currently have unsaved changes. Are you sure you wish to leave?\";\n            }\n        }\n\n        var homescreenSettingsInstance;\n        var hasChanges;\n        var userId = params.userId || ApiClient.getCurrentUserId();\n        var userSettings = userId === ApiClient.getCurrentUserId() ? currentUserSettings : new userSettingsBuilder();\n        view.addEventListener(\"viewshow\", function () {\n            window.addEventListener(\"beforeunload\", onBeforeUnload);\n\n            if (homescreenSettingsInstance) {\n                homescreenSettingsInstance.loadData();\n            } else {\n                homescreenSettingsInstance = new HomescreenSettings({\n                    serverId: ApiClient.serverId(),\n                    userId: userId,\n                    element: view.querySelector(\".homeScreenSettingsContainer\"),\n                    userSettings: userSettings,\n                    enableSaveButton: false,\n                    enableSaveConfirmation: false,\n                    autoFocus: autoFocuser.isEnabled()\n                });\n            }\n        });\n        view.addEventListener(\"change\", function () {\n            hasChanges = true;\n        });\n        view.addEventListener(\"viewbeforehide\", function () {\n            hasChanges = false;\n\n            if (homescreenSettingsInstance) {\n                homescreenSettingsInstance.submit();\n            }\n        });\n        view.addEventListener(\"viewdestroy\", function () {\n            if (homescreenSettingsInstance) {\n                homescreenSettingsInstance.destroy();\n                homescreenSettingsInstance = null;\n            }\n        });\n    };\n});\n"]}