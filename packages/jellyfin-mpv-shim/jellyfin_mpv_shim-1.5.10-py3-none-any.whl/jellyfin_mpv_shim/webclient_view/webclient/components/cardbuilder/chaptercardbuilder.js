"use strict";define(["datetime","imageLoader","connectionManager","layoutManager","browser"],(function(datetime,imageLoader,connectionManager,layoutManager,browser){var enableFocusTransform=!browser.slow&&!browser.edge;function buildChapterCard(item,apiClient,chapter,index,options,className,shape){var imgUrl=function getImgUrl(item,chapter,index,maxWidth,apiClient){return chapter.ImageTag?apiClient.getScaledImageUrl(item.Id,{maxWidth:2*maxWidth,tag:chapter.ImageTag,type:"Chapter",index:index}):null}(item,chapter,index,options.width||400,apiClient),cardImageContainerClass="cardContent cardContent-shadow cardImageContainer chapterCardImageContainer";options.coverImage&&(cardImageContainerClass+=" coveredImage");var dataAttributes=' data-action="play" data-isfolder="'+item.IsFolder+'" data-id="'+item.Id+'" data-serverid="'+item.ServerId+'" data-type="'+item.Type+'" data-mediatype="'+item.MediaType+'" data-positionticks="'+chapter.StartPositionTicks+'"',cardImageContainer=imgUrl?'<div class="'+cardImageContainerClass+' lazy" data-src="'+imgUrl+'">':'<div class="'+cardImageContainerClass+'">';imgUrl||(cardImageContainer+='<i class="material-icons cardImageIcon local_movies"></i>');var nameHtml="";nameHtml+='<div class="cardText">'+chapter.Name+"</div>";return'<button type="button" class="'+className+'"'+dataAttributes+'><div class="cardBox"><div class="cardScalable"><div class="cardPadder-'+shape+'"></div>'+cardImageContainer+'</div><div class="innerCardFooter">'+(nameHtml+='<div class="cardText">'+datetime.getDisplayRunningTime(chapter.StartPositionTicks)+"</div>")+"</div></div></div></button>"}return{buildChapterCards:function buildChapterCards(item,chapters,options){if(options.parentContainer){if(!document.body.contains(options.parentContainer))return;if(!chapters.length)return void options.parentContainer.classList.add("hide");options.parentContainer.classList.remove("hide")}var html=function buildChapterCardsHtml(item,chapters,options){var className="card itemAction chapterCard";layoutManager.tv&&(className+=" show-focus",enableFocusTransform&&(className+=" show-animation"));var videoStream=(((item.MediaSources||[])[0]||{}).MediaStreams||[]).filter((function(i){return"Video"===i.Type}))[0]||{},shape=options.backdropShape||"backdrop";videoStream.Width&&videoStream.Height&&videoStream.Width/videoStream.Height<=1.2&&(shape=options.squareShape||"square"),className+=" "+shape+"Card",(options.block||options.rows)&&(className+=" block");for(var html="",itemsInRow=0,apiClient=connectionManager.getApiClient(item.ServerId),i=0,length=chapters.length;i<length;i++){options.rows&&0===itemsInRow&&(html+='<div class="cardColumn">'),html+=buildChapterCard(item,apiClient,chapters[i],i,options,className,shape),itemsInRow++,options.rows&&itemsInRow>=options.rows&&(itemsInRow=0,html+="</div>")}return html}(item,chapters,options);options.itemsContainer.innerHTML=html,imageLoader.lazyChildren(options.itemsContainer)}}}));
//# sourceMappingURL=chaptercardbuilder.js.map
