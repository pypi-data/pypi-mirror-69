{"version":3,"sources":["components/listview/listview.js"],"names":["define","itemHelper","mediaInfo","indicators","connectionManager","layoutManager","globalize","datetime","appHost","getIndex","item","options","index","ParentIndexNumber","translate","code","name","sortBy","toLowerCase","indexOf","Type","SortName","Name","toUpperCase","charCodeAt","OfficialRating","CommunityRating","Math","floor","CriticRating","AlbumArtist","getImageUrl","width","apiClient","getApiClient","ServerId","maxWidth","type","ImageTags","Primary","tag","getScaledImageUrl","Id","AlbumId","AlbumPrimaryImageTag","SeriesId","SeriesPrimaryImageTag","ParentPrimaryImageTag","ParentPrimaryImageItemId","getChannelImageUrl","ChannelId","ChannelPrimaryImageTag","getTextLinesHtml","textlines","isLargeStyle","html","largeTitleTagName","tv","i","length","getRightButtonsHtml","rightButtons","button","id","title","icon","getId","getListViewHtml","items","groupTitle","action","imageSize","enableOverview","clickEntireItem","outerTagName","enableSideMediaInfo","outerHtml","enableContentWrapper","containerAlbumArtistIds","containerAlbumArtists","map","showIndex","itemGroupTitle","cssClass","border","highlight","downloadWidth","playlistItemId","PlaylistItemId","positionTicksData","UserData","PlaybackPositionTicks","collectionIdData","collectionId","playlistIdData","playlistId","mediaTypeData","MediaType","collectionTypeData","CollectionType","channelIdData","IsFolder","dragHandle","image","imgUrl","imageSource","imageClass","playOnImageClick","imagePlayButton","indicatorsHtml","getPlayedIndicatorHtml","progressHtml","getProgressBarHtml","containerClass","showIndexNumberLeft","IndexNumber","showProgramDateTime","push","toLocaleString","parseISO8601Date","StartDate","weekday","month","day","hour","minute","showProgramTime","getDisplayTime","showChannel","ChannelName","parentTitle","showParentTitle","SeriesName","IsSeries","EpisodeTitle","displayName","getDisplayName","includeParentInfo","includeParentInfoInTitle","showIndexNumber","parentTitleWithTitle","artist","showArtist","artistItems","ArtistItems","a","join","CurrentProgram","getPrimaryMediaInfoHtml","episodeTitle","originalAirDate","subtitles","Overview","year","container","criticRating","endsAt","recordButton","getTimerIndicator","replace","addToListButton","moreButton","infoButton","enableUserDataButtons","userData","likes","Likes","canMarkPlayed","Played","canRate","IsFavorite"],"mappings":"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","file":"listview.js","sourcesContent":["define(['itemHelper', 'mediaInfo', 'indicators', 'connectionManager', 'layoutManager', 'globalize', 'datetime', 'apphost', 'css!./listview', 'emby-ratingbutton', 'emby-playstatebutton'], function (itemHelper, mediaInfo, indicators, connectionManager, layoutManager, globalize, datetime, appHost) {\n    'use strict';\n\n    function getIndex(item, options) {\n\n        if (options.index === 'disc') {\n\n            return item.ParentIndexNumber == null ? '' : globalize.translate('ValueDiscNumber', item.ParentIndexNumber);\n        }\n\n        var sortBy = (options.sortBy || '').toLowerCase();\n        var code;\n        var name;\n\n        if (sortBy.indexOf('sortname') === 0) {\n\n            if (item.Type === 'Episode') {\n                return '';\n            }\n\n            // SortName\n            name = (item.SortName || item.Name || '?')[0].toUpperCase();\n\n            code = name.charCodeAt(0);\n            if (code < 65 || code > 90) {\n                return '#';\n            }\n\n            return name.toUpperCase();\n        }\n        if (sortBy.indexOf('officialrating') === 0) {\n\n            return item.OfficialRating || globalize.translate('Unrated');\n        }\n        if (sortBy.indexOf('communityrating') === 0) {\n\n            if (item.CommunityRating == null) {\n                return globalize.translate('Unrated');\n            }\n\n            return Math.floor(item.CommunityRating);\n        }\n        if (sortBy.indexOf('criticrating') === 0) {\n\n            if (item.CriticRating == null) {\n                return globalize.translate('Unrated');\n            }\n\n            return Math.floor(item.CriticRating);\n        }\n        if (sortBy.indexOf('albumartist') === 0) {\n\n            // SortName\n            if (!item.AlbumArtist) {\n                return '';\n            }\n\n            name = item.AlbumArtist[0].toUpperCase();\n\n            code = name.charCodeAt(0);\n            if (code < 65 || code > 90) {\n                return '#';\n            }\n\n            return name.toUpperCase();\n        }\n        return '';\n    }\n\n    function getImageUrl(item, width) {\n\n        var apiClient = connectionManager.getApiClient(item.ServerId);\n\n        var options = {\n            maxWidth: width * 2,\n            type: \"Primary\"\n        };\n\n        if (item.ImageTags && item.ImageTags.Primary) {\n\n            options.tag = item.ImageTags.Primary;\n            return apiClient.getScaledImageUrl(item.Id, options);\n        }\n\n        if (item.AlbumId && item.AlbumPrimaryImageTag) {\n\n            options.tag = item.AlbumPrimaryImageTag;\n            return apiClient.getScaledImageUrl(item.AlbumId, options);\n        } else if (item.SeriesId && item.SeriesPrimaryImageTag) {\n\n            options.tag = item.SeriesPrimaryImageTag;\n            return apiClient.getScaledImageUrl(item.SeriesId, options);\n\n        } else if (item.ParentPrimaryImageTag) {\n\n            options.tag = item.ParentPrimaryImageTag;\n            return apiClient.getScaledImageUrl(item.ParentPrimaryImageItemId, options);\n        }\n\n        return null;\n    }\n\n    function getChannelImageUrl(item, width) {\n\n        var apiClient = connectionManager.getApiClient(item.ServerId);\n\n        var options = {\n            maxWidth: width * 2,\n            type: \"Primary\"\n        };\n\n        if (item.ChannelId && item.ChannelPrimaryImageTag) {\n\n            options.tag = item.ChannelPrimaryImageTag;\n            return apiClient.getScaledImageUrl(item.ChannelId, options);\n        }\n\n        return null;\n    }\n\n    function getTextLinesHtml(textlines, isLargeStyle) {\n\n        var html = '';\n\n        var largeTitleTagName = layoutManager.tv ? 'h2' : 'div';\n\n        for (var i = 0, length = textlines.length; i < length; i++) {\n\n            var text = textlines[i];\n\n            if (!text) {\n                continue;\n            }\n\n            if (i === 0) {\n                if (isLargeStyle) {\n                    html += '<' + largeTitleTagName + ' class=\"listItemBodyText\">';\n                } else {\n                    html += '<div class=\"listItemBodyText\">';\n                }\n            } else {\n                html += '<div class=\"secondary listItemBodyText\">';\n            }\n            html += (textlines[i] || '&nbsp;');\n            if (i === 0 && isLargeStyle) {\n                html += '</' + largeTitleTagName + '>';\n            } else {\n                html += '</div>';\n            }\n        }\n\n        return html;\n    }\n\n    function getRightButtonsHtml(options) {\n\n        var html = '';\n\n        for (var i = 0, length = options.rightButtons.length; i < length; i++) {\n\n            var button = options.rightButtons[i];\n\n            html += '<button is=\"paper-icon-button-light\" class=\"listItemButton itemAction\" data-action=\"custom\" data-customaction=\"' + button.id + '\" title=\"' + button.title + '\"><i class=\"material-icons\">' + button.icon + '</i></button>';\n        }\n\n        return html;\n    }\n\n    function getId(item) {\n        return item.Id;\n    }\n\n    function getListViewHtml(options) {\n\n        var items = options.items;\n\n        var groupTitle = '';\n        var action = options.action || 'link';\n\n        var isLargeStyle = options.imageSize === 'large';\n        var enableOverview = options.enableOverview;\n\n        var clickEntireItem = layoutManager.tv ? true : false;\n        var outerTagName = clickEntireItem ? 'button' : 'div';\n        var enableSideMediaInfo = options.enableSideMediaInfo != null ? options.enableSideMediaInfo : true;\n\n        var outerHtml = '';\n\n        var enableContentWrapper = options.enableOverview && !layoutManager.tv;\n        var containerAlbumArtistIds = (options.containerAlbumArtists || []).map(getId);\n\n        for (var i = 0, length = items.length; i < length; i++) {\n\n            var item = items[i];\n\n            var html = '';\n\n            if (options.showIndex) {\n\n                var itemGroupTitle = getIndex(item, options);\n\n                if (itemGroupTitle !== groupTitle) {\n\n                    if (html) {\n                        html += '</div>';\n                    }\n\n                    if (i === 0) {\n                        html += '<h2 class=\"listGroupHeader listGroupHeader-first\">';\n                    } else {\n                        html += '<h2 class=\"listGroupHeader\">';\n                    }\n                    html += itemGroupTitle;\n                    html += '</h2>';\n\n                    html += '<div>';\n\n                    groupTitle = itemGroupTitle;\n                }\n            }\n\n            var cssClass = \"listItem\";\n\n            if (options.border || (options.highlight !== false && !layoutManager.tv)) {\n                cssClass += ' listItem-border';\n            }\n\n            if (clickEntireItem) {\n                cssClass += ' itemAction listItem-button';\n            }\n\n            if (layoutManager.tv) {\n                cssClass += ' listItem-focusscale';\n            }\n\n            var downloadWidth = 80;\n\n            if (isLargeStyle) {\n                cssClass += \" listItem-largeImage\";\n                downloadWidth = 500;\n            }\n\n            var playlistItemId = item.PlaylistItemId ? (' data-playlistitemid=\"' + item.PlaylistItemId + '\"') : '';\n\n            var positionTicksData = item.UserData && item.UserData.PlaybackPositionTicks ? (' data-positionticks=\"' + item.UserData.PlaybackPositionTicks + '\"') : '';\n            var collectionIdData = options.collectionId ? (' data-collectionid=\"' + options.collectionId + '\"') : '';\n            var playlistIdData = options.playlistId ? (' data-playlistid=\"' + options.playlistId + '\"') : '';\n            var mediaTypeData = item.MediaType ? (' data-mediatype=\"' + item.MediaType + '\"') : '';\n            var collectionTypeData = item.CollectionType ? (' data-collectiontype=\"' + item.CollectionType + '\"') : '';\n            var channelIdData = item.ChannelId ? (' data-channelid=\"' + item.ChannelId + '\"') : '';\n\n            if (enableContentWrapper) {\n\n                cssClass += ' listItem-withContentWrapper';\n            }\n\n            html += '<' + outerTagName + ' class=\"' + cssClass + '\"' + playlistItemId + ' data-action=\"' + action + '\" data-isfolder=\"' + item.IsFolder + '\" data-id=\"' + item.Id + '\" data-serverid=\"' + item.ServerId + '\" data-type=\"' + item.Type + '\"' + mediaTypeData + collectionTypeData + channelIdData + positionTicksData + collectionIdData + playlistIdData + '>';\n\n            if (enableContentWrapper) {\n\n                html += '<div class=\"listItem-content\">';\n            }\n\n            if (!clickEntireItem && options.dragHandle) {\n                //html += '<button is=\"paper-icon-button-light\" class=\"listViewDragHandle listItemButton\"><i class=\"material-icons drag_handle\"></i></button>';\n                // Firefox and Edge are not allowing the button to be draggable\n                html += '<i class=\"listViewDragHandle material-icons listItemIcon listItemIcon-transparent drag_handle\"></i>';\n            }\n\n            if (options.image !== false) {\n                var imgUrl = options.imageSource === 'channel' ? getChannelImageUrl(item, downloadWidth) : getImageUrl(item, downloadWidth);\n                var imageClass = isLargeStyle ? 'listItemImage listItemImage-large' : 'listItemImage';\n\n                if (isLargeStyle && layoutManager.tv) {\n                    imageClass += ' listItemImage-large-tv';\n                }\n\n                var playOnImageClick = options.imagePlayButton && !layoutManager.tv;\n\n                if (!clickEntireItem) {\n                    imageClass += ' itemAction';\n                }\n\n                var imageAction = playOnImageClick ? 'resume' : action;\n\n                if (imgUrl) {\n                    html += '<div data-action=\"' + imageAction + '\" class=\"' + imageClass + ' lazy\" data-src=\"' + imgUrl + '\" item-icon>';\n                } else {\n                    html += '<div class=\"' + imageClass + '\">';\n                }\n\n                var indicatorsHtml = '';\n                indicatorsHtml += indicators.getPlayedIndicatorHtml(item);\n\n                if (indicatorsHtml) {\n                    html += '<div class=\"indicators listItemIndicators\">' + indicatorsHtml + '</div>';\n                }\n\n                if (playOnImageClick) {\n                    html += '<button is=\"paper-icon-button-light\" class=\"listItemImageButton itemAction\" data-action=\"resume\"><i class=\"material-icons listItemImageButton-icon play_arrow\"></i></button>';\n                }\n\n                var progressHtml = indicators.getProgressBarHtml(item, {\n                    containerClass: 'listItemProgressBar'\n                });\n\n                if (progressHtml) {\n                    html += progressHtml;\n                }\n                html += '</div>';\n            }\n\n            if (options.showIndexNumberLeft) {\n\n                html += '<div class=\"listItem-indexnumberleft\">';\n                html += (item.IndexNumber || '&nbsp;');\n                html += '</div>';\n            }\n\n            var textlines = [];\n\n            if (options.showProgramDateTime) {\n                textlines.push(datetime.toLocaleString(datetime.parseISO8601Date(item.StartDate), {\n\n                    weekday: 'long',\n                    month: 'short',\n                    day: 'numeric',\n                    hour: 'numeric',\n                    minute: '2-digit'\n                }));\n            }\n\n            if (options.showProgramTime) {\n                textlines.push(datetime.getDisplayTime(datetime.parseISO8601Date(item.StartDate)));\n            }\n\n            if (options.showChannel) {\n                if (item.ChannelName) {\n                    textlines.push(item.ChannelName);\n                }\n            }\n\n            var parentTitle = null;\n\n            if (options.showParentTitle) {\n                if (item.Type === 'Episode') {\n                    parentTitle = item.SeriesName;\n                } else if (item.IsSeries || (item.EpisodeTitle && item.Name)) {\n                    parentTitle = item.Name;\n                }\n            }\n\n            var displayName = itemHelper.getDisplayName(item, {\n                includeParentInfo: options.includeParentInfoInTitle\n            });\n\n            if (options.showIndexNumber && item.IndexNumber != null) {\n                displayName = item.IndexNumber + \". \" + displayName;\n            }\n\n            if (options.showParentTitle && options.parentTitleWithTitle) {\n\n                if (displayName) {\n\n                    if (parentTitle) {\n                        parentTitle += ' - ';\n                    }\n                    parentTitle = (parentTitle || '') + displayName;\n                }\n\n                textlines.push(parentTitle || '');\n            } else if (options.showParentTitle) {\n                textlines.push(parentTitle || '');\n            }\n\n            if (displayName && !options.parentTitleWithTitle) {\n                textlines.push(displayName);\n            }\n\n            if (item.IsFolder) {\n                if (options.artist !== false) {\n\n                    if (item.AlbumArtist && item.Type === 'MusicAlbum') {\n                        textlines.push(item.AlbumArtist);\n                    }\n                }\n            } else {\n\n                var showArtist = options.artist === true;\n                var artistItems = item.ArtistItems;\n\n                if (!showArtist && options.artist !== false) {\n\n                    if (!artistItems || !artistItems.length) {\n                        showArtist = true;\n                    } else if (artistItems.length > 1 || containerAlbumArtistIds.indexOf(artistItems[0].Id) === -1) {\n                        showArtist = true;\n                    }\n                }\n\n                if (showArtist) {\n\n                    if (artistItems && item.Type !== 'MusicAlbum') {\n                        textlines.push(artistItems.map(function (a) {\n                            return a.Name;\n                        }).join(', '));\n                    }\n                }\n            }\n\n            if (item.Type === 'TvChannel') {\n\n                if (item.CurrentProgram) {\n                    textlines.push(itemHelper.getDisplayName(item.CurrentProgram));\n                }\n            }\n\n            cssClass = 'listItemBody';\n            if (!clickEntireItem) {\n                cssClass += ' itemAction';\n            }\n\n            if (options.image === false) {\n                cssClass += ' listItemBody-noleftpadding';\n            }\n\n            html += '<div class=\"' + cssClass + '\">';\n\n            var moreIcon = '&#xE5D3;';\n\n            html += getTextLinesHtml(textlines, isLargeStyle);\n\n            if (options.mediaInfo !== false) {\n                if (!enableSideMediaInfo) {\n\n                    var mediaInfoClass = 'secondary listItemMediaInfo listItemBodyText';\n\n                    html += '<div class=\"' + mediaInfoClass + '\">' + mediaInfo.getPrimaryMediaInfoHtml(item, {\n                        episodeTitle: false,\n                        originalAirDate: false,\n                        subtitles: false\n\n                    }) + '</div>';\n                }\n            }\n\n            if (enableOverview && item.Overview) {\n                html += '<div class=\"secondary listItem-overview listItemBodyText\">';\n                html += item.Overview;\n                html += '</div>';\n            }\n\n            html += '</div>';\n\n            if (options.mediaInfo !== false) {\n                if (enableSideMediaInfo) {\n                    html += '<div class=\"secondary listItemMediaInfo\">' + mediaInfo.getPrimaryMediaInfoHtml(item, {\n\n                        year: false,\n                        container: false,\n                        episodeTitle: false,\n                        criticRating: false,\n                        endsAt: false\n\n                    }) + '</div>';\n                }\n            }\n\n            if (!options.recordButton && (item.Type === 'Timer' || item.Type === 'Program')) {\n                html += indicators.getTimerIndicator(item).replace('indicatorIcon', 'indicatorIcon listItemAside');\n            }\n\n            html += '<div class=\"listViewUserDataButtons\">';\n\n            if (!clickEntireItem) {\n\n                if (options.addToListButton) {\n                    html += '<button is=\"paper-icon-button-light\" class=\"listItemButton itemAction\" data-action=\"addtoplaylist\"><i class=\"material-icons playlist_add\"></i></button>';\n                }\n\n                if (options.moreButton !== false) {\n                    html += '<button is=\"paper-icon-button-light\" class=\"listItemButton itemAction\" data-action=\"menu\"><i class=\"material-icons\">' + moreIcon + '</i></button>';\n                }\n\n                if (options.infoButton) {\n                    html += '<button is=\"paper-icon-button-light\" class=\"listItemButton itemAction\" data-action=\"link\"><i class=\"material-icons info_outline\"></i></button>';\n                }\n\n                if (options.rightButtons) {\n                    html += getRightButtonsHtml(options);\n                }\n\n                if (options.enableUserDataButtons !== false) {\n\n                    var userData = item.UserData || {};\n                    var likes = userData.Likes == null ? '' : userData.Likes;\n\n                    if (itemHelper.canMarkPlayed(item)) {\n                        html += '<button is=\"emby-playstatebutton\" type=\"button\" class=\"listItemButton paper-icon-button-light\" data-id=\"' + item.Id + '\" data-serverid=\"' + item.ServerId + '\" data-itemtype=\"' + item.Type + '\" data-played=\"' + (userData.Played) + '\"><i class=\"material-icons\">check</i></button>';\n                    }\n\n                    if (itemHelper.canRate(item)) {\n                        html += '<button is=\"emby-ratingbutton\" type=\"button\" class=\"listItemButton paper-icon-button-light\" data-id=\"' + item.Id + '\" data-serverid=\"' + item.ServerId + '\" data-itemtype=\"' + item.Type + '\" data-likes=\"' + likes + '\" data-isfavorite=\"' + (userData.IsFavorite) + '\"><i class=\"material-icons\">favorite</i></button>';\n                    }\n                }\n            }\n            html += '</div>';\n\n            if (enableContentWrapper) {\n                html += '</div>';\n\n                if (enableOverview && item.Overview) {\n                    html += '<div class=\"listItem-bottomoverview secondary\">';\n                    html += item.Overview;\n                    html += '</div>';\n                }\n            }\n\n            html += '</' + outerTagName + '>';\n\n            outerHtml += html;\n        }\n\n        return outerHtml;\n    }\n\n    return {\n        getListViewHtml: getListViewHtml\n    };\n});\n"]}