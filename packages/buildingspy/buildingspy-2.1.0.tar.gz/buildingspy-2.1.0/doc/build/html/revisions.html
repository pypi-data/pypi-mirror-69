
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Revisions &#8212; BuildingsPy documentation</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Acknowledgments" href="acknowledgments.html" /> 
  </head><body>
<div class="headerStyle">
<img src="_static/lbl-logo.png" alt="LBL logo" />
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="acknowledgments.html" title="Acknowledgments"
             accesskey="P">previous</a> |</li>
    <li><a href="http://simulationresearch.lbl.gov/modelica">Home</a> &gt;
    <a href="http://simulationresearch.lbl.gov/modelica/buildingspy">BuildingsPy</a></li>
    </br>
<!--    
        <li class="nav-item nav-item-0"><a href="index.html">BuildingsPy documentation</a> &#187;</li> -->
 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Revisions</a><ul>
<li><a class="reference internal" href="#buildingspy-changelog">BuildingsPy Changelog</a><ul>
<li><a class="reference internal" href="#version-2-1-0-may-28-2020-release-2-1">Version 2.1.0, May 28, 2020 – Release 2.1</a></li>
<li><a class="reference internal" href="#version-2-0-0-july-15-2019-release-2-0">Version 2.0.0, July 15, 2019 – Release 2.0</a></li>
<li><a class="reference internal" href="#version-1-7-0-june-14-2018-release-1-7">Version 1.7.0, June 14, 2018 – Release 1.7</a></li>
<li><a class="reference internal" href="#version-1-6-0-march-29-2017-release-1-6">Version 1.6.0, March 29, 2017 – Release 1.6</a></li>
<li><a class="reference internal" href="#version-1-5-0-march-29-2016-release-1-5">Version 1.5.0, March 29, 2016 – Release 1.5</a></li>
<li><a class="reference internal" href="#version-1-4-0-february-28-2014-release-1-4">Version 1.4.0, February 28, 2014 – Release 1.4</a></li>
<li><a class="reference internal" href="#version-1-3-0-october-24-2013-release-1-3">Version 1.3.0, October 24, 2013 – Release 1.3</a></li>
<li><a class="reference internal" href="#version-1-2-0-may-15-2013-release-1-2">Version 1.2.0, May 15, 2013 – Release 1.2</a></li>
<li><a class="reference internal" href="#version-1-1-2-january-8-2013-release-1-1">Version 1.1.2, January 8, 2013 – Release 1.1</a></li>
<li><a class="reference internal" href="#version-1-1-1-october-9-2012-release-1-1">Version 1.1.1, October 9, 2012 – Release 1.1</a></li>
<li><a class="reference internal" href="#version-1-1-0-july-26-2012-release-1-1">Version 1.1.0, July 26, 2012 – Release 1.1</a></li>
<li><a class="reference internal" href="#version-1-0-0-november-1-2011">Version 1.0.0, November 1, 2011</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="acknowledgments.html"
                        title="previous chapter">Acknowledgments</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="revisions">
<h1>Revisions<a class="headerlink" href="#revisions" title="Permalink to this headline">¶</a></h1>
<div class="section" id="buildingspy-changelog">
<h2>BuildingsPy Changelog<a class="headerlink" href="#buildingspy-changelog" title="Permalink to this headline">¶</a></h2>
<div class="section" id="version-2-1-0-may-28-2020-release-2-1">
<h3>Version 2.1.0, May 28, 2020 – Release 2.1<a class="headerlink" href="#version-2-1-0-may-28-2020-release-2-1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Updated dependency to pyfunnel, and added requirements.txt file.</p></li>
<li><p>For unit tests, display plots before asking to add new reference results. (Issue 344)</p></li>
<li><p>When writing package.order, preserved the ordering of constants from the .mo file.</p></li>
<li><p>Changed doctest to Python 3.6.</p></li>
<li><p>For unit tests, added support for OPTIMICA.</p></li>
<li><p>For unit tests, changed to non-pedantic mode in Dymola if a model
is in the Obsolete package.</p></li>
<li><p>For unit tests, corrected problem on Windows if a user enabled DDE.</p></li>
<li><p>For unit tests, corrected problem if a user saved the startup directory in Dymola.</p></li>
<li><p>Avoided text replace in binary files when merging libraries, which lead to
UnicodeDecodeError. (Issue 272)</p></li>
<li><p>In regression tests, issue error if the name of the reference results
is too long. (Issue 274)</p></li>
<li><p>Added compiler option nle_solver_tol_factor with value of 1e-2 for jmodelica
regression test. (Issue 301)</p></li>
</ul>
</div>
<div class="section" id="version-2-0-0-july-15-2019-release-2-0">
<h3>Version 2.0.0, July 15, 2019 – Release 2.0<a class="headerlink" href="#version-2-0-0-july-15-2019-release-2-0" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added handling of library specific comments in buildingspy.development.merger</p></li>
<li><p>Improved error reporting when running regression tests in batch mode.</p></li>
<li><p>Corrected bug when creating and then renaming a package with
buildingspy.development.refactor</p></li>
<li><p>Removed buildingspy.simulate.Simulator.simulate_translated
as it relies on non-standard Dymola functionality, and does no longer
work with Dymola 2019.
Also removed is the function buildingspy.simulate.Simulator.deleteTranslateDirectory
which was only needed for buildingspy.simulate.Simulator.simulate_translated</p></li>
</ul>
</div>
<div class="section" id="version-1-7-0-june-14-2018-release-1-7">
<h3>Version 1.7.0, June 14, 2018 – Release 1.7<a class="headerlink" href="#version-1-7-0-june-14-2018-release-1-7" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Corrected error in buildingspy.development.regressiontest that caused
variables in plot statements to be ignored if the plot statement was
longer than one line. Now, an error message will be written for this case.</p></li>
<li><p>Updated buildingspy.development.merger to filter out certain files,
such as the top-level .c and .mat files.</p></li>
<li><p>Updated buildingspy.development.refactor.move_class() to
correct a bug that caused package.mo to not be generated
if the new class is deeper in the class hierarchy.</p></li>
<li><p>Updated buildingspy.development.refactor.write_package_order() to
correct a bug in generating package.order file for package-level
constants.</p></li>
<li><p>Extend class buildingspy.development.validator
to check the consistency and correctness of .mos and .mo files.</p></li>
<li><p>Added validation of .mos/.mo files to unit test script.</p></li>
</ul>
</div>
<div class="section" id="version-1-6-0-march-29-2017-release-1-6">
<h3>Version 1.6.0, March 29, 2017 – Release 1.6<a class="headerlink" href="#version-1-6-0-march-29-2017-release-1-6" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>In development.regressiontest.setSinglePackage(packageName), added
option to provide a comma-separated list to allow checking multiple
packages.</p></li>
<li><p>In simulate.Simulator, changed quotes of string arguments for
Modelica parameters.</p></li>
<li><p>In development.regressiontest, added check for redundant connections.</p></li>
<li><p>Updated buildingspy.development.refactor.move_class()
to allow moving whole packages.</p></li>
<li><p>Updated buildingspy.development.refactor.write_package_order()
so that also types that are enumerations are added to the package.order file.</p></li>
<li><p>Corrected TypeError during parsing of an exception that led to a wrong
error message.</p></li>
<li><p>In regression tests for Dymola, added check for missing stateGraphRoot.</p></li>
</ul>
</div>
<div class="section" id="version-1-5-0-march-29-2016-release-1-5">
<h3>Version 1.5.0, March 29, 2016 – Release 1.5<a class="headerlink" href="#version-1-5-0-march-29-2016-release-1-5" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added module fmi with a function that outputs fmu dependencies.</p></li>
<li><p>Added regression tests for OpenModelica.</p></li>
<li><p>Changed implementation of addParameters(…) to allow
setting values of parameters that are arrays.</p></li>
<li><p>Corrected bug that lead to files such as .DStore in Resources/Scripts
to be processed as if they were scripts that run unit tests.</p></li>
<li><p>Added class buildingspy.development.merger, which can be used
to merge the Annex60 Modelica library to other Modelica libraries,
such as the Buildings library.</p></li>
<li><p>Corrected bug in copying the files for the unit tests, which
caused libpython2.7.so not to be copied on some computers</p></li>
<li><p>Added method development.include_fmu_tests that allow testing
the export of FMUs.</p></li>
<li><p>development.regressiontest now also reports when Dymola
had to select default initial conditions,
a model had redundant consistent initial conditions, or
a model had type inconsistent definition equations.</p></li>
<li><p>Corrected bug in simulate.Simulator that caused a syntax error
in the Modelica .mos script when setting boolean variables.</p></li>
<li><p>Changed the API of buildingspy.simulate.Simulator.
Previously, the MODELICAPATH was used as the default
to load the package.mo file. This was changed because the
MODELICAPATH variable points one directory higher than the
location of the package.mo file.
Now, the current directory is used as the default value, which
can be overwritten using the parameter packagePath.</p></li>
<li><p>Corrected bug in buildingspy.development.regressiontest that
only used the first word in the result mat file. This bug
caused the unit tests to return with an error if for example
an output file was named Obsolete.FlowMachine</p></li>
<li><p>Corrected bug in buildingspy.development.Validator that
caused the html section to be not validated if the Modelica
file contained the &lt;/html&gt; and &lt;html&gt; element on the same line.</p></li>
<li><p>Added new module buildingspy.development.refactor that provides
functions to refactor Modelica libraries.</p></li>
<li><p>Corrected forward and backward slashes in module that runs
the regression tests.</p></li>
<li><p>Added new function buildingspy.io.outputfile.get_model_statistics,
which allows obtaining the statistics of the model, such as the
number of nonlinear equations.</p></li>
<li><p>Added in buildingspy.development.regressiontest.Tester() the
new function writeOpenModelicaResultDictionary() that writes
a result dictionary for the OpenModelica regression tests.</p></li>
<li><p>Added regression tests for FMU export for Dymola.</p></li>
<li><p>In regression tests, added a check for parameters that only have
a start value assigned.</p></li>
<li><p>In buildingspy.development.regressiontest, added functionality
to save Output, InitialUnknown and Derivatives dependency on
inputs to the reference results.</p></li>
<li><p>In buildingspy.development.regressiontest, added option to
use pedantic Modelica check.</p></li>
<li><p>Improved regression tests so that the list of plot variables
no longer needed to be on a single line. This was done
as later versions of Dymola do not write line breaks when
exporting the .mos script.</p></li>
<li><p>Added option to simulate a Modelica model without recompilation.</p></li>
<li><p>In buildingspy.development.regressiontest, added tests for
differentiation of if-expressions,
invalid connect statements,
redeclaration of non-replaceable classes,
failure to interpret experiment annotation,
file not found, and
missing .mos script.</p></li>
<li><p>Corrected html check if the html is on a single line.</p></li>
<li><p>In buildingspy.development.regressiontest, changed reading of
dslog.txt to be line by line as opposed to the whole file at once.
The reason is that reading the whole file can give an “out of memory for strings”
error for very long files as the size of Stringbuffer in
dymola/source/matrixop.h is not dynamically allocated.</p></li>
</ul>
</div>
<div class="section" id="version-1-4-0-february-28-2014-release-1-4">
<h3>Version 1.4.0, February 28, 2014 – Release 1.4<a class="headerlink" href="#version-1-4-0-february-28-2014-release-1-4" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>In development.unittest, added test that addresses the situation
that some results are parameters in the Buildings library, but
variables in the Annex 60 library.</p></li>
<li><p>In simulate.Simulator, corrected error that prevented output
files from being copied if the result directory was set to ‘.’</p></li>
<li><p>Added unit tests and documentation tests.</p></li>
<li><p>Corrected various errors in the documentation.</p></li>
<li><p>Renamed development.unittest to development.regressiontest. This
was required for the python doctest to work.</p></li>
<li><p>In development.regressiontest, added new method setLibraryRoot(rootDir)
to allow running the unit tests from a directory other than the library
root directory.</p></li>
<li><p>In development.regressiontest, added a test that avoids an IndexError
if a new simulation result contains a different number of support points
than the reference result. This is needed if models change variables
to parameters or vice versa.</p></li>
<li><p>In development.regressiontest, added the method setSinglePackage.
This allows running the regression tests for a single package only.</p></li>
</ul>
</div>
<div class="section" id="version-1-3-0-october-24-2013-release-1-3">
<h3>Version 1.3.0, October 24, 2013 – Release 1.3<a class="headerlink" href="#version-1-3-0-october-24-2013-release-1-3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added class buildingspy.development.validator
that can be used to validate the html syntax
of the info section of .mo files.</p></li>
<li><p>Added validation of html syntax to unit test script.</p></li>
<li><p>In io.outputfile, changed name of argument of _init__
from format to simulator as format is a reserved keyword
in Python.</p></li>
<li><p>In simulate.Simulator, corrected use of variable that was not defined.
Avoided use of variable name exit which is a reserved keyword.
Avoided the use of temporary variables that are not needed.</p></li>
<li><p>In development.unittest,</p>
<ul>
<li><p>removed non-needed import statement,</p></li>
<li><p>removed argument dir from method printNumberOfClasses(self)
as this argument is not used.</p></li>
</ul>
</li>
<li><p>Updated to latest version of DyMat as on <a class="reference external" href="https://bitbucket.org/jraedler/dymat/">https://bitbucket.org/jraedler/dymat/</a>,
commit 4e819cb</p></li>
<li><p>In development.Tester, method __getSimulationResults(),
corrected error that caused results only to be stored if there is
at least one variable requested for comparison that has more than
two support points. That is, if a script only requested to store
parameters, or variables that solely depend on parameters,
then no results from this simulation were not stored.</p></li>
</ul>
</div>
<div class="section" id="version-1-2-0-may-15-2013-release-1-2">
<h3>Version 1.2.0, May 15, 2013 – Release 1.2<a class="headerlink" href="#version-1-2-0-may-15-2013-release-1-2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Changed buildingspy.development.unittest so that
the string ‘svn-id’ is no longer searched in,
or written to, the reference result files.</p></li>
<li><p>Improved error reporting of the package that runs
the unit tests.</p></li>
<li><p>Updated buildingspy.development.unittest to allow testing
of other libraries than the Buildings library.</p></li>
<li><p>Updated buildingspy.development.unittest to include
a model check in the pedantic mode of Dymola.</p></li>
</ul>
</div>
<div class="section" id="version-1-1-2-january-8-2013-release-1-1">
<h3>Version 1.1.2, January 8, 2013 – Release 1.1<a class="headerlink" href="#version-1-1-2-january-8-2013-release-1-1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fixed bug in Simulator.py to allow setting Modelica parameters
that are of type string.</p></li>
</ul>
</div>
<div class="section" id="version-1-1-1-october-9-2012-release-1-1">
<h3>Version 1.1.1, October 9, 2012 – Release 1.1<a class="headerlink" href="#version-1-1-1-october-9-2012-release-1-1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Improved error reporting in unittest.py</p></li>
<li><dl class="simple">
<dt>Fixed bug in constructor of simulate.Simulator.py that caused</dt><dd><p>TypeError: __init__() got an unexpected keyword argument ‘directory’</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="version-1-1-0-july-26-2012-release-1-1">
<h3>Version 1.1.0, July 26, 2012 – Release 1.1<a class="headerlink" href="#version-1-1-0-july-26-2012-release-1-1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added class buildingspy.io.postprocess.Plotter.
This simplifies the creation of boxplot and the
plotting of data that repeat every day.</p></li>
<li><p>Moved function buildingspy.development.unittest.Tester.__interpolate
to buildingspy.io.postprocess.Plotter.interpolate</p></li>
<li><p>Caught exception that is caused when non-ascii characters are
used in the comments of constants, parameters or variables. Now,
these files are excluded from the unit tests and a warning is issued.</p></li>
<li><p>Centralized error reporting to using buildings.io.reporter instead
of writing directly to stderr.</p></li>
<li><p>Fixed error in buildingspy.io.postprocess.Plotter.interpolate().
The previous version could lead to non-increasing time for
the last time stamp of the results, and then led to an wrong result
of the interpolation function.</p></li>
<li><p>Changed file output: The output of Dymola is now in the file dymola.log,
whereas unitTests.log contains the warning and error messages of the python
unit test scripts.</p></li>
<li><p>Changed buildingspy.development.unittest.py to achieve better load
balancing. This change reduced the computing time for all unit tests on a
24 core computer from 38 minutes to 21 minutes.</p></li>
</ul>
</div>
<div class="section" id="version-1-0-0-november-1-2011">
<h3>Version 1.0.0, November 1, 2011<a class="headerlink" href="#version-1-0-0-november-1-2011" title="Permalink to this headline">¶</a></h3>
<p>Initial release.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="acknowledgments.html" title="Acknowledgments"
             >previous</a> |</li>
    <li><a href="http://simulationresearch.lbl.gov/modelica">Home</a> &gt;
    <a href="http://simulationresearch.lbl.gov/modelica/buildingspy">BuildingsPy</a></li>
    </br>
<!--    
        <li class="nav-item nav-item-0"><a href="index.html">BuildingsPy documentation</a> &#187;</li> -->
 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2011-2020, The Regents of the University of California (through Lawrence Berkeley National Laboratory), subject to receipt of any required approvals from U.S. Department of Energy.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.1.2.
    </div>
  </body>
</html>