(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["snapshots"],{"6bc8":function(e,t,n){},af56:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",[n("v-flex",{staticClass:"pr-4",attrs:{xs7:""}},[n("v-header",{attrs:{sub:""}},[e._v("Snapshots")]),n("snapshot-list-table",{attrs:{repos:e.repos}})],1),n("v-flex",{staticClass:"pl-4",attrs:{xs5:""}},[n("v-header",{attrs:{sub:""}},[e._v("Create a snapshot")]),n("create-snapshot",{attrs:{repos:e.repos}})],1)],1)},s=[],i=n("4795"),r=n.n(i),o=n("b01f");function l(e,t,n,a,s,i,r){try{var o=e[i](r),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(a,s)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(a,s){var i=e.apply(t,n);function r(e){l(i,a,s,r,o,"next",e)}function o(e){l(i,a,s,r,o,"throw",e)}r(void 0)}))}}var u={methods:{listRepos:function(){var e=this;return c(r.a.mark((function t(){var n;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("startLoading"),t.next=3,Object(o["a"])("/api/v1/snapshot/list_repos");case 3:return n=t.sent,e.$store.commit("stopLoading"),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))()},listSnapshots:function(e){var t=this;return c(r.a.mark((function n(){var a;return r.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.$store.commit("startLoading"),n.next=3,Object(o["a"])("/api/v1/snapshot/".concat(e,"/list"));case 3:return a=n.sent,t.$store.commit("stopLoading"),n.abrupt("return",a);case 6:case"end":return n.stop()}}),n)})))()},restore:function(e,t,n){return c(r.a.mark((function a(){return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(o["b"])("/api/v1/snapshot/restore/".concat(e,"/").concat(t),n);case 2:case"end":return a.stop()}}),a)})))()},createSnapshot:function(e,t,n){return c(r.a.mark((function a(){return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(o["b"])("/api/v1/snapshot/create/".concat(e,"/").concat(t),n);case 2:case"end":return a.stop()}}),a)})))()}}},p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("repo-selector",{attrs:{repos:e.repos},on:{select:e.loadRepo}}),n("v-dialog",{attrs:{width:"60%"},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[n("restore-form",{attrs:{repo:e.repo,snapshot:e.snapshot},on:{close:function(t){e.showDialog=!1}}})],1),n("v-data-table",{staticClass:"elevation-1 small-table",attrs:{headers:e.headers,items:e.snapshots,"item-key":"id","footer-props":{"items-per-page-options":[30,100,200]},"sort-by":"start_time_in_millis","sort-desc":!0},scopedSlots:e._u([{key:"item.start_time_in_millis",fn:function(t){var n=t.item;return[e._v(" "+e._s(e.fromNow(n.start_time_in_millis))+" ")]}},{key:"item.duration_in_millis",fn:function(t){var n=t.item;return[e._v(" "+e._s(parseInt(n.duration_in_millis/1e3))+"s ")]}},{key:"item.restore",fn:function(t){var a=t.item;return[n("v-btn",{attrs:{text:"",icon:"",small:""},on:{click:function(t){return e.showRestoreDialog(a)}}},[n("v-icon",{attrs:{small:""}},[e._v("settings_backup_restore")])],1)]}}])})],1)},d=[],h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",{staticClass:"headline green lighten-2",attrs:{"primary-title":""}},[e._v(" Restore from snapshot ")]),e.repo?n("div",{staticClass:"restore-form"},[n("v-layout",[n("v-flex",{staticClass:"pr-4",staticStyle:{flex:"1"}},[n("v-text-field",{attrs:{label:"Rename Pattern",placeholder:"index_(.+)"},model:{value:e.renamePattern,callback:function(t){e.renamePattern=t},expression:"renamePattern"}})],1),n("v-flex",{staticClass:"pr-4",staticStyle:{flex:"1"}},[n("v-text-field",{attrs:{label:"Rename Replacement",placeholder:"restored_index_$1"},model:{value:e.renameReplacement,callback:function(t){e.renameReplacement=t},expression:"renameReplacement"}})],1)],1),n("div",{staticClass:"mb-2 mt-4",staticStyle:{"font-size":"18px"}},[e._v("Restore Options")]),e._l(e.booleanOptions,(function(t){return n("doc-checkbox",{key:t.title,attrs:{doc:t.doc,label:t.title},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"option.value"}})})),n("div",{staticClass:"mt-4",staticStyle:{"font-size":"18px"}},[e._v("Choose indices")]),n("index-selector",{attrs:{indices:e.snapshot.indices},model:{value:e.selectedIndices,callback:function(t){e.selectedIndices=t},expression:"selectedIndices"}}),n("div",{staticClass:"mt-4",staticStyle:{"font-size":"18px"}},[e._v("Override index Settings")]),n("query-editor",{ref:"editor",attrs:{init:{"index.number_of_replicas":0}}})],2):e._e(),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"success",disabled:0===e.selectedIndices.length},on:{click:e.onRestore}},[e._v(" Restore ")])],1)],1)},v=[],f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-select",{attrs:{items:e.indices,label:"Select indices*",multiple:""},scopedSlots:e._u([{key:"prepend-item",fn:function(){return[n("v-list-item",{attrs:{ripple:""},on:{click:e.toggle}},[n("v-list-item-action",[n("v-icon",[e._v(e._s(e.icon))])],1),n("v-list-item-content",[n("v-list-item-title",[e._v(" "+e._s(e.allSelected?"Unselect all":"Select All")+" ")])],1)],1)]},proxy:!0},{key:"selection",fn:function(t){var a=t.item,s=t.index;return[e.value.length===e.indices.length&&0===s?n("v-chip",[n("span",[e._v("ALL")])]):e._e(),e.value.length===e.indices.length&&0===s?n("span",{staticClass:"caption"},[e._v(" ("+e._s(e.value.length)+" indices) ")]):e.value.length!==e.indices.length?n("v-chip",[n("span",[e._v(e._s(a))])]):e._e()]}}]),model:{value:e.inner,callback:function(t){e.inner=t},expression:"inner"}})],1)},m=[],b={props:{indices:{type:Array,required:!0},value:{type:Array,required:!0}},computed:{inner:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},allSelected:function(){return this.value.length===this.indices.length},likesSomeFruit:function(){return this.value.length>0&&!this.allSelected},icon:function(){return this.allSelected?"check_box":this.likesSomeFruit?"indeterminate_check_box":"check_box_outline_blank"}},methods:{toggle:function(){var e=this;this.$nextTick((function(){e.allSelected?e.inner=[]:e.inner=e.indices.slice()}))}}},_=b,x=n("2877"),g=n("6544"),y=n.n(g),w=n("cc20"),k=n("132d"),S=n("da13"),O=n("1800"),V=n("5d23"),I=n("b974"),C=Object(x["a"])(_,f,m,!1,null,"5492d4aa",null),j=C.exports;y()(C,{VChip:w["a"],VIcon:k["a"],VListItem:S["a"],VListItemAction:O["a"],VListItemContent:V["a"],VListItemTitle:V["c"],VSelect:I["a"]});var P=n("90bf"),R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-checkbox",{staticClass:"doc-checkbox",attrs:{"hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(" "+e._s(e.label)+" "),n("v-tooltip",{attrs:{bottom:"","max-width":"400px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-icon",e._g({staticClass:"ml-1",attrs:{size:"14",color:"secondary lighten-3"}},a),[e._v(" help_outline ")])]}}])},[n("span",[e._v(e._s(e.doc))])])]},proxy:!0}]),model:{value:e.internalValue,callback:function(t){e.internalValue=t},expression:"internalValue"}})},$=[],D={data:function(){return{internalValue:null}},created:function(){this.internalValue=this.value},props:{doc:{type:String,required:!0},label:{type:String,required:!0},value:{type:Boolean}},watch:{internalValue:function(e){this.$emit("input",e)}}},B=D,L=n("ac7c"),T=n("3a2f"),q=Object(x["a"])(B,R,$,!1,null,"739f2ed0",null),A=q.exports;function E(e,t,n,a,s,i,r){try{var o=e[i](r),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(a,s)}function F(e){return function(){var t=this,n=arguments;return new Promise((function(a,s){var i=e.apply(t,n);function r(e){E(i,a,s,r,o,"next",e)}function o(e){E(i,a,s,r,o,"throw",e)}r(void 0)}))}}y()(q,{VCheckbox:L["a"],VIcon:k["a"],VTooltip:T["a"]});var z={props:["snapshot","repo"],components:{IndexSelector:j,QueryEditor:P["a"],DocCheckbox:A},mixins:[u],data:function(){return{renamePattern:void 0,lol:!1,renameReplacement:void 0,booleanOptions:{partial:{title:"Partial",value:!1,doc:"By default, the entire restore operation will fail if one or more indices participating in the operation don’t have snapshots of all shards available. It can occur if some shards failed to snapshot for example. It is still possible to restore such indices by setting partial to true. Please note, that only successfully snapshotted shards will be restored in this case and all missing shards will be recreated empty."},include_global_state:{title:"Include global state",value:!0,doc:"By setting include_global_state to false it’s possible to prevent the cluster global state to be stored as part of the snapshot. By default, the entire snapshot will fail if one or more indices participating in the snapshot don’t have all primary shards available. This behaviour can be changed by setting partial to true."},include_aliases:{title:"Include aliases",value:!0,doc:"Set include_aliases to false to prevent aliases from being restored together with associated indices"},ignore_unavailable:{title:"Ignore unavailable",value:!1,doc:"The snapshot request also supports the ignore_unavailable option. Setting it to true will cause indices that do not exist to be ignored during snapshot creation. By default, when ignore_unavailable option is not set and an index is missing the snapshot request will fail. By setting include_global_state to false it’s possible to prevent the cluster global state to be stored as part of the snapshot. By default, the entire snapshot will fail if one or more indices participating in the snapshot don’t have all primary shards available. This behaviour can be changed by setting partial to true."}},selectedIndices:[]}},methods:{makeBody:function(){var e=JSON.parse,t=JSON.stringify;return e(t({indices:this.selectedIndices,partial:this.booleanOptions.partial.value,include_global_state:this.booleanOptions.include_global_state.value,include_aliases:this.booleanOptions.include_aliases.value,ignore_unavailable:this.booleanOptions.ignore_unavailable.value,rename_pattern:this.renamePattern,rename_replacement:this.renameReplacement,index_settings:this.$refs.editor.getQuery()}))},onRestore:function(){var e=this;return F(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.restore(e.repo,e.snapshot.snapshot,e.makeBody());case 2:e.$emit("close");case 3:case"end":return t.stop()}}),t)})))()}}},J=z,N=(n("c0e9"),n("8336")),Q=n("b0af"),H=n("99d9"),U=n("ce7e"),G=n("0e8f"),K=n("a722"),M=n("2fa4"),W=n("8654"),X=Object(x["a"])(J,h,v,!1,null,"481f125e",null),Y=X.exports;y()(X,{VBtn:N["a"],VCard:Q["a"],VCardActions:H["a"],VCardTitle:H["c"],VDivider:U["a"],VFlex:G["a"],VLayout:K["a"],VSpacer:M["a"],VTextField:W["a"]});var Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-combobox",{staticClass:"mb-2",attrs:{items:e.repos,label:"Select repository","item-text":"id"},on:{change:function(t){return e.$emit("select",t.id)}},scopedSlots:e._u([{key:"item",fn:function(t){t.index;var a=t.item;return[n("v-list-item-content",[n("v-chip",{attrs:{dark:"",label:"",small:""}},[e._v(e._s(a.id)+" "+e._s(a.location)+" ")])],1),n("v-list-item-action",[n("v-chip",{attrs:{dark:"",label:"",small:"",color:"success"}},[e._v(e._s(a.type.type))])],1)]}}])})},ee=[],te={props:{repos:{type:Array,required:!0}}},ne=te,ae=n("2b5d"),se=Object(x["a"])(ne,Z,ee,!1,null,"ae58b11c",null),ie=se.exports;y()(se,{VChip:w["a"],VCombobox:ae["a"],VListItemAction:O["a"],VListItemContent:V["a"]});var re=n("ef1b");function oe(e,t,n,a,s,i,r){try{var o=e[i](r),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(a,s)}function le(e){return function(){var t=this,n=arguments;return new Promise((function(a,s){var i=e.apply(t,n);function r(e){oe(i,a,s,r,o,"next",e)}function o(e){oe(i,a,s,r,o,"throw",e)}r(void 0)}))}}var ce={props:{repos:{type:Array,required:!0}},mixins:[u],components:{RestoreForm:Y,RepoSelector:ie},methods:{showRestoreDialog:function(e){this.snapshot=e,this.showDialog=!0},fromNow:function(e){return Object(re["a"])(e,{addSuffix:!0})},loadRepo:function(e){var t=this;return le(r.a.mark((function n(){return r.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,t.listSnapshots(e);case 4:t.snapshots=n.sent,t.repo=e;case 6:case"end":return n.stop()}}),n)})))()}},data:function(){return{showDialog:!1,snapshots:[],repo:"",snapshot:{indices:[]},headers:[{text:"Id",value:"snapshot"},{text:"Started",value:"start_time_in_millis"},{text:"State",value:"state"},{text:"Took",value:"duration_in_millis"},{text:"Restore",value:"restore",sortable:!1}]}}},ue=ce,pe=n("8fea"),de=n("169a"),he=Object(x["a"])(ue,p,d,!1,null,null,null),ve=he.exports;y()(he,{VBtn:N["a"],VDataTable:pe["a"],VDialog:de["a"],VIcon:k["a"]});var fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("repo-selector",{attrs:{repos:e.repos},on:{select:function(t){return e.repo=t}}}),n("v-text-field",{attrs:{label:"Snapshot name*"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("index-selector",{attrs:{indices:Object.keys(e.indices)},model:{value:e.selectedIndices,callback:function(t){e.selectedIndices=t},expression:"selectedIndices"}}),e._l(e.booleanOptions,(function(t){return n("doc-checkbox",{key:t.title,attrs:{doc:t.doc,label:t.title},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"option.value"}})})),n("v-btn",{staticClass:"mt-6",attrs:{block:"",color:"success",disabled:0===e.selectedIndices.length||!e.name||!e.repo}},[e._v(" Create Snapshot ")])],2)},me=[],be=n("2f62");function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){ge(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ye={components:{IndexSelector:j,DocCheckbox:A,RepoSelector:ie},props:{repos:{type:Array,required:!0}},computed:xe({},Object(be["d"])(["indices"])),data:function(){return{selectedIndices:[],repo:null,name:null,booleanOptions:{partial:{title:"Partial",value:!1,doc:"By default, the entire snapshot will fail if one or more indices participating in the snapshot don’t have all primary shards available. This behaviour can be changed by setting partial to true."},include_global_state:{title:"Include global state",value:!0,doc:"By setting include_global_state to false it’s possible to prevent the cluster global state to be stored as part of the snapshot."},ignore_unavailable:{title:"Ignore unavailable",value:!1,doc:"By default, when ignore_unavailable option is not set and an index is missing the snapshot request will fail."}}}}},we=ye,ke=Object(x["a"])(we,fe,me,!1,null,"354c1fe4",null),Se=ke.exports;y()(ke,{VBtn:N["a"],VTextField:W["a"]});var Oe=n("97b1");function Ve(e,t,n,a,s,i,r){try{var o=e[i](r),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(a,s)}function Ie(e){return function(){var t=this,n=arguments;return new Promise((function(a,s){var i=e.apply(t,n);function r(e){Ve(i,a,s,r,o,"next",e)}function o(e){Ve(i,a,s,r,o,"throw",e)}r(void 0)}))}}var Ce={mixins:[u],components:{SnapshotListTable:ve,CreateSnapshot:Se,VHeader:Oe["a"]},created:function(){var e=this;return Ie(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.listRepos();case 2:e.repos=t.sent;case 3:case"end":return t.stop()}}),t)})))()},data:function(){return{repos:[]}}},je=Ce,Pe=Object(x["a"])(je,a,s,!1,null,null,null);t["default"]=Pe.exports;y()(Pe,{VFlex:G["a"],VLayout:K["a"]})},c0e9:function(e,t,n){"use strict";var a=n("6bc8"),s=n.n(a);s.a}}]);